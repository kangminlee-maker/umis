# ========================================
# UMIS ì„¸ì…˜ ë§ˆë¬´ë¦¬ ê°€ì´ë“œ
# Session Closure Protocol v1.0
# ========================================
# @purpose: AIê°€ ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‹¤í–‰
# @trigger: ì‚¬ìš©ìžê°€ "/umis close" ë˜ëŠ” "ì„¸ì…˜ ì¢…ë£Œ" ìž…ë ¥
# ========================================

version: 1.0
created: 2025-11-27
format: yaml
audience: ai_agent

# ========================================
# STEP 0: íŒŒì¼ ì •ë¦¬ ë° ì´ë™
# ========================================

file_organization:
  purpose: "ê°œë°œ ê³¼ì •ì—ì„œ ìƒì„±ëœ íŒŒì¼ì„ ì í•©í•œ í´ë”ë¡œ ì´ë™"
  
  principle: |
    âš ï¸ ì¤‘ìš”: íŒŒì¼ëª… íŒ¨í„´ì´ ì•„ë‹Œ **íŒŒì¼ ë‚´ìš©**ì„ ì½ê³  ë¶„ë¥˜!
    ê° í´ë”ì˜ README.mdë¥¼ ì°¸ì¡°í•˜ì—¬ ì—­í• ê³¼ ì •ì˜ì— ë§žëŠ”ì§€ í™•ì¸.
  
  classification_process:
    step_1_scan:
      action: "ë£¨íŠ¸ í´ë” ë° ì£¼ìš” ìœ„ì¹˜ ìŠ¤ìº”"
      command: "ls -la (ë£¨íŠ¸, scripts/, dev_docs/ ë“±)"
      focus: "ì •ë¦¬ë˜ì§€ ì•Šì€ íŒŒì¼ ì‹ë³„"
      
    step_2_read_content:
      action: "ê° íŒŒì¼ ë‚´ìš© ì½ê¸° (ì²˜ìŒ 50-100ì¤„)"
      command: "read_file(path, limit=100)"
      purpose: "íŒŒì¼ ëª©ì , ì£¼ì œ, ì»¨í…ìŠ¤íŠ¸ íŒŒì•…"
      
    step_3_read_folder_definitions:
      action: "í›„ë³´ í´ë”ì˜ README.md ì½ê¸°"
      files:
        - "dev_docs/README.md"
        - "docs/README.md"
        - "scripts/README.md"
        - "config/README.md"
        - "deliverable_specs/README.md"
        - "data/core/README.md"
        - "projects/README.md"
      purpose: "í´ë”ë³„ ì—­í• ê³¼ í¬í•¨ ê¸°ì¤€ íŒŒì•…"
      
    step_4_match:
      action: "ë‚´ìš©ê³¼ í´ë” ì—­í•  ë§¤ì¹­"
      logic: |
        if (íŒŒì¼ ë‚´ìš© == "ê°œë°œ ê³¼ì • ê¸°ë¡" AND "ížˆìŠ¤í† ë¦¬"):
          â†’ dev_docs/
        elif (íŒŒì¼ ë‚´ìš© == "ì‹œìŠ¤í…œ ì‚¬ìš© ê°€ì´ë“œ" OR "í™œì„± í”„ë¡œí† ì½œ"):
          â†’ docs/
        elif (íŒŒì¼ ë‚´ìš© == "ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸" OR "ë¹Œë“œ/ì¿¼ë¦¬/í…ŒìŠ¤íŠ¸"):
          â†’ scripts/
        elif (íŒŒì¼ ë‚´ìš© == "ì‹œìŠ¤í…œ ì„¤ì •" OR "ë ˆì§€ìŠ¤íŠ¸ë¦¬"):
          â†’ config/
        elif (íŒŒì¼ ë‚´ìš© == "ì‚°ì¶œë¬¼ ìŠ¤íŽ™" OR "Agent ëª…ì„¸"):
          â†’ deliverable_specs/
        elif (íŒŒì¼ ë‚´ìš© == "ì‹œìž¥ ë¶„ì„ ì‚°ì¶œë¬¼"):
          â†’ projects/{project_name}/
        else:
          â†’ archive/ (deprecated) ë˜ëŠ” ì‚¬ìš©ìž ìŠ¹ì¸ í•„ìš”
          
    step_5_subfolder:
      action: "í•˜ìœ„ í´ë” ê²°ì •"
      examples:
        dev_docs_subfolders:
          session_summaries: "ê°œë°œ ì„¸ì…˜ ìš”ì•½"
          testing_reports: "í…ŒìŠ¤íŠ¸/ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼"
          estimator: "Estimator ê°œë°œ ë¬¸ì„œ"
          rag_system: "RAG ì‹œìŠ¤í…œ ê°œë°œ"
          dart_crawler: "DART í¬ë¡¤ëŸ¬ ê°œë°œ"
          validator: "Validator ê°œë°œ"
          sga_parser: "SGA íŒŒì„œ ê°œë°œ"
          llm_strategy: "LLM ì „ëžµ ë° ë¹„ìš© ìµœì í™”"
          deployment: "ë°°í¬ ë° ìš´ì˜"
          system: "ì‹œìŠ¤í…œ ì „ë°˜ (ìƒíƒœ, ë¶„ì„)"
          
        docs_subfolders:
          api: "API ë¬¸ì„œ"
          guides: "ì‚¬ìš©ìž ê°€ì´ë“œ"
          architecture: "ì•„í‚¤í…ì²˜ ë¬¸ì„œ (í™œì„±)"
          
        deliverable_specs_subfolders:
          explorer: "Steve"
          quantifier: "Bill"
          observer: "Albert"
          validator: "Rachel"
          estimator: "Fermi"
          project: "í”„ë¡œì íŠ¸ ê³µí†µ"
  
  folder_definitions:
    dev_docs:
      role: "ê°œë°œ ížˆìŠ¤í† ë¦¬ ë° ì„¤ê³„ ë¬¸ì„œ (ì‹œìŠ¤í…œ ë¹„ì˜ì¡´)"
      include:
        - "ê°œë°œ ê³¼ì • ê¸°ë¡"
        - "ì˜ì‚¬ê²°ì • ì»¨í…ìŠ¤íŠ¸"
        - "ì„¸ì…˜ ìš”ì•½"
        - "í…ŒìŠ¤íŠ¸ ë³´ê³ ì„œ"
        - "ì‹œìŠ¤í…œ ë¶„ì„"
        - "ì•„í‚¤í…ì²˜ ì„¤ê³„ ížˆìŠ¤í† ë¦¬"
      exclude:
        - "í˜„ìž¬ í™œì„± í”„ë¡œí† ì½œ (â†’ docs/)"
        - "ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (â†’ scripts/)"
      reference: "dev_docs/README.md"
        
    docs:
      role: "í™œì„± ì°¸ì¡° ë¬¸ì„œ ë° í”„ë¡œí† ì½œ (ì‹œìŠ¤í…œ ì˜ì¡´)"
      include:
        - "í˜„ìž¬ ì‚¬ìš© ì¤‘ì¸ í”„ë¡œí† ì½œ"
        - "ì‚¬ìš©ìž ê°€ì´ë“œ"
        - "API ë¬¸ì„œ"
        - "ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (ìµœì‹ )"
      exclude:
        - "ê°œë°œ ížˆìŠ¤í† ë¦¬ (â†’ dev_docs/)"
        - "Deprecated ë¬¸ì„œ (â†’ archive/)"
      reference: "docs/README.md"
        
    scripts:
      role: "ì‹¤í–‰ ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸ (ë¹Œë“œ, ì¿¼ë¦¬, í…ŒìŠ¤íŠ¸)"
      include:
        - "ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸"
        - "ì¿¼ë¦¬ ìŠ¤í¬ë¦½íŠ¸"
        - "í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸"
        - "ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸"
      exclude:
        - "ì¼íšŒì„± ë””ë²„ê¹… ìŠ¤í¬ë¦½íŠ¸ (â†’ archive/)"
      reference: "scripts/README.md"
        
    config:
      role: "ëª¨ë“  UMIS ì„¤ì • íŒŒì¼ ì¤‘ì•™ ê´€ë¦¬"
      include:
        - "Agent ì„¤ì •"
        - "ìŠ¤í‚¤ë§ˆ"
        - "ëª¨ë¸ ì„¤ì •"
        - "ë„êµ¬ ë ˆì§€ìŠ¤íŠ¸ë¦¬"
      exclude:
        - "í”„ë¡œì íŠ¸ë³„ ì„¤ì • (â†’ projects/)"
      reference: "config/README.md"
        
    deliverable_specs:
      role: "6-Agent ì‚°ì¶œë¬¼ ëª…ì„¸ì„œ (100% YAML)"
      include:
        - "Agent ì‚°ì¶œë¬¼ ìŠ¤íŽ™"
        - "ìŠ¤í‚¤ë§ˆ ì •ì˜"
        - "ê²€ì¦ ê·œì¹™"
      exclude:
        - "ì‹¤ì œ ì‚°ì¶œë¬¼ (â†’ projects/)"
      reference: "deliverable_specs/README.md"
        
    projects:
      role: "ì‹¤ì œ ì‹œìž¥ ë¶„ì„ ì‚°ì¶œë¬¼"
      include:
        - "í”„ë¡œì íŠ¸ êµ¬ì¡°"
        - "Agent ì‚°ì¶œë¬¼"
        - "ì‚¬ìš© ì„¸ì…˜ ê¸°ë¡"
      exclude:
        - "ê°œë°œ ì„¸ì…˜ ê¸°ë¡ (â†’ dev_docs/)"
      reference: "projects/README.md"
        
    archive:
      role: "Deprecated ë¬¸ì„œ ë° ì½”ë“œ"
      include:
        - "ê³¼ê±° ë²„ì „ ë¬¸ì„œ"
        - "Deprecated ê¸°ëŠ¥"
        - "ì¼íšŒì„± ìŠ¤í¬ë¦½íŠ¸"
      exclude:
        - "í™œì„± ë¬¸ì„œ"
      reference: "archive/README.md"
  
  execution_workflow:
    step_1: |
      ë£¨íŠ¸ í´ë” ìŠ¤ìº”:
        ls -la /Users/kangmin/Documents/AI_dev/umis/umis_1127/umis/
    
    step_2: |
      ì •ë¦¬ë˜ì§€ ì•Šì€ íŒŒì¼ ì‹ë³„ (ë£¨íŠ¸ì— MD/YAML/PY ë“±)
    
    step_3: |
      ê° íŒŒì¼ ë‚´ìš© ì½ê¸° (ìµœì†Œ 50ì¤„):
        read_file(path, limit=100)
        â†’ íŒŒì¼ ëª©ì , ì£¼ì œ íŒŒì•…
    
    step_4: |
      í›„ë³´ í´ë”ì˜ README.md ì½ê¸°:
        read_file("dev_docs/README.md")
        read_file("docs/README.md")
        â†’ í´ë” ì—­í•  íŒŒì•…
    
    step_5: |
      ë‚´ìš©ê³¼ ì—­í•  ë§¤ì¹­:
        if (íŒŒì¼ ë‚´ìš© matches í´ë” ì—­í• ):
          ëª©ì ì§€ ê²°ì •
        else:
          ë³´ìˆ˜ì ìœ¼ë¡œ ê¸°ì¡´ í´ë” í™œìš©
    
    step_6: |
      ìžë™ ì´ë™ ì‹¤í–‰:
        mv {source} {destination}
        git add {destination}
    
    step_7: |
      ì´ë™ ë‚´ì—­ ë¡œê·¸ ê¸°ë¡:
        - íŒŒì¼ëª…
        - ì´ë™ ê²½ë¡œ (from â†’ to)
        - ì´ë™ ì´ìœ  (ê°„ëžµ)
        - íŒŒì¼ ë‚´ìš© ìš”ì•½ (1-2ì¤„)
    
    step_8: |
      ì„¸ì…˜ ì„œë¨¸ë¦¬ì— í†µí•©
  
  keep_in_root:
    - "README.md"
    - "CHANGELOG.md"
    - "umis.yaml"
    - "umis_core.yaml"
    - "umis_deliverable_standards.yaml"
    - "umis_examples.yaml"
    - ".cursorrules"
    - ".gitignore"
    - ".python-version"
    - "requirements.txt"
    - "env.template"
  
  common_hints:
    # íŒŒì¼ëª… íŒ¨í„´ì€ ë³´ì¡° ížŒíŠ¸ì¼ ë¿! ìµœì¢… ê²°ì •ì€ ë‚´ìš©!
    session_documents:
      hints: ["session_summary_", "SESSION_"]
      likely: "dev_docs/session_summaries/"
      
    test_reports:
      hints: ["_test_", "_benchmark_", "TEST_RESULTS"]
      likely: "dev_docs/testing_reports/"
      
    guides:
      hints: ["GUIDE", "SETUP", "HOW_TO"]
      likely: "docs/guides/ (í™œì„±) or dev_docs/ (ížˆìŠ¤í† ë¦¬)"
      
    system_status:
      hints: ["STATUS", "ìƒíƒœ"]
      likely: "dev_docs/system/"
  
  execution_mode: "auto_with_log"
  
  notes:
    - "âš ï¸ íŒŒì¼ëª… íŒ¨í„´ì€ ížŒíŠ¸ì¼ ë¿, ìµœì¢… ê²°ì •ì€ ë‚´ìš© ê¸°ë°˜!"
    - "ì• ë§¤í•œ ê²½ìš° ë³´ìˆ˜ì ìœ¼ë¡œ íŒë‹¨ (ê¸°ì¡´ í´ë” í™œìš©)"
    - "ê° í´ë”ì˜ README.mdê°€ Single Source of Truth"
    - "ì´ë™ ì „ ë°˜ë“œì‹œ íŒŒì¼ ë‚´ìš© ì½ê¸° (ìµœì†Œ 50ì¤„)"
    - "ëª¨ë“  ìž‘ì—…ì„ ìžë™ ì‹¤í–‰í•˜ê³  ë¡œê·¸ì— ê¸°ë¡"
    - "Git add ìžë™ ìˆ˜í–‰ (ì»¤ë°‹ì€ ì„¸ì…˜ ë§ˆë¬´ë¦¬ ì‹œ ì¼ê´„)"
  
  # ========================================
  # í•˜ìœ„ í´ë” ìƒì„± ê·œì¹™
  # ========================================
  
  subfolder_creation:
    when_to_create:
      condition_1:
        description: "ê¸°ì¡´ í•˜ìœ„ í´ë”ì— ë§žì§€ ì•ŠëŠ” ìƒˆë¡œìš´ ì£¼ì œ/ì¹´í…Œê³ ë¦¬"
        example: "ìƒˆë¡œìš´ ê¸°ëŠ¥ ê°œë°œ ë¬¸ì„œ â†’ dev_docs/new_feature/"
      
      condition_2:
        description: "ê´€ë ¨ íŒŒì¼ì´ 3ê°œ ì´ìƒ ëˆ„ì ë˜ì–´ ê·¸ë£¹í™” í•„ìš”"
        example: "API í†µí•© ê´€ë ¨ ë¬¸ì„œ 5ê°œ â†’ dev_docs/api_integration/"
      
      condition_3:
        description: "READMEì— ëª…ì‹œë˜ì§€ ì•Šì€ ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬"
        example: "ì„±ëŠ¥ ìµœì í™” ë³´ê³ ì„œ â†’ dev_docs/performance/"
    
    decision_process:
      step_1_check_existing:
        action: "ë¶€ëª¨ í´ë”ì˜ README.md ë° ê¸°ì¡´ í•˜ìœ„ í´ë” êµ¬ì¡° í™•ì¸"
        command: |
          read_file("{parent_folder}/README.md")
          ls -la {parent_folder}/
        purpose: "ì´ë¯¸ ì í•©í•œ í•˜ìœ„ í´ë”ê°€ ìžˆëŠ”ì§€ í™•ì¸"
      
      step_2_evaluate_need:
        criteria:
          semantic_fit: "ê¸°ì¡´ í•˜ìœ„ í´ë”ì™€ ì˜ë¯¸ì ìœ¼ë¡œ ëª…í™•ížˆ êµ¬ë¶„ë˜ëŠ”ê°€?"
          volume: "ê´€ë ¨ íŒŒì¼ì´ 3ê°œ ì´ìƒì¸ê°€? (í˜„ìž¬ ë˜ëŠ” ì˜ˆìƒ)"
          longevity: "ì¼íšŒì„±ì´ ì•„ë‹Œ ì§€ì†ì ìœ¼ë¡œ ì‚¬ìš©ë  ì¹´í…Œê³ ë¦¬ì¸ê°€?"
          clarity: "í´ë”ëª…ì´ ëª…í™•í•˜ê³  ì˜¤í•´ì˜ ì—¬ì§€ê°€ ì—†ëŠ”ê°€?"
        
        decision_matrix: |
          if (semantic_fit AND volume >= 3 AND longevity AND clarity):
            â†’ ìƒˆ í•˜ìœ„ í´ë” ìžë™ ìƒì„±
          else:
            â†’ ê¸°ì¡´ í´ë” í™œìš© (ë³´ìˆ˜ì  ì ‘ê·¼)
      
      step_3_naming:
        rules:
          format: "snake_case (ì†Œë¬¸ìž + ì–¸ë”ìŠ¤ì½”ì–´)"
          length: "2-3 ë‹¨ì–´ (ìµœëŒ€ 20ìž)"
          clarity: "ì•½ì–´ ì§€ì–‘, ëª…í™•í•œ ì˜ë¯¸"
          consistency: "ê¸°ì¡´ í´ë”ëª… ìŠ¤íƒ€ì¼ê³¼ ì¼ê´€ì„±"
        
        examples:
          good:
            - "dev_docs/api_integration/"
            - "dev_docs/performance/"
            - "dev_docs/migration_v8/"
            - "docs/guides/advanced/"
          
          bad:
            - "dev_docs/misc/" (ë„ˆë¬´ ëª¨í˜¸)
            - "dev_docs/API-Integration/" (ëŒ€ë¬¸ìž ì‚¬ìš©)
            - "dev_docs/temp/" (ì¼íšŒì„± ëŠë‚Œ)
            - "dev_docs/very_long_folder_name_here/" (ë„ˆë¬´ ê¹€)
      
      step_4_readme_creation:
        required: true
        reason: "í´ë” ì—­í•  ì •ì˜ ë° ë¯¸ëž˜ AI/ê°œë°œìž ê°€ì´ë“œ"
        
        template: |
          # {í´ë”ëª…}
          
          **ëª©ì **: {ì´ í´ë”ì˜ ì—­í• ì„ 1-2ë¬¸ìž¥ìœ¼ë¡œ}
          **ìƒì„±ì¼**: {YYYY-MM-DD}
          **ê´€ë ¨ ê¸°ëŠ¥**: {ê´€ë ¨ëœ UMIS ê¸°ëŠ¥/Agent}
          
          ## í¬í•¨ ëŒ€ìƒ
          - {ì´ í´ë”ì— ë“¤ì–´ê°ˆ ë¬¸ì„œ ìœ í˜• 1}
          - {ì´ í´ë”ì— ë“¤ì–´ê°ˆ ë¬¸ì„œ ìœ í˜• 2}
          
          ## ì œì™¸ ëŒ€ìƒ
          - {ë‹¤ë¥¸ í´ë”ë¡œ ê°€ì•¼ í•  ê²ƒ 1} (â†’ {ì˜¬ë°”ë¥¸ í´ë”})
          
          ## ë¬¸ì„œ ëª©ë¡
          (ìžë™ ì—…ë°ì´íŠ¸ ë˜ëŠ” ìˆ˜ë™ ê´€ë¦¬)
        
        location: "{new_subfolder}/README.md"
      
      step_5_update_parent_readme:
        required: true
        action: "ë¶€ëª¨ í´ë”ì˜ README.mdì— ìƒˆ í•˜ìœ„ í´ë” ìžë™ ì¶”ê°€"
        
        example: |
          # dev_docs/README.md ì—…ë°ì´íŠ¸
          
          ### í•µì‹¬ ê¸°ëŠ¥ë³„ ë¬¸ì„œ
          ...
          #### 10. API Integration (`api_integration/`)
          API í†µí•© ê°œë°œ ë¬¸ì„œ
          
          - ì£¼ìš” ê¸°ëŠ¥: REST API, WebSocket, ì¸ì¦
          - ê´€ë ¨ ì½”ë“œ: `umis_rag/api/`
      
      step_6_auto_log:
        action: "ìƒì„± ë‚´ì—­ ë¡œê·¸ ê¸°ë¡ (ì„¸ì…˜ ì„œë¨¸ë¦¬ì— í¬í•¨)"
        
        log_format: |
          ðŸ†• í•˜ìœ„ í´ë” ìƒì„± (ìžë™)
          
          **ìœ„ì¹˜**: {parent_folder}/{new_subfolder}/
          **ì´ìœ **: {ìƒì„± ì´ìœ  (ì¡°ê±´ 1/2/3)}
          **í¬í•¨ íŒŒì¼**:
            - {file1}
            - {file2}
          
          **ìƒì„± ìž‘ì—…**:
            âœ… í´ë” ìƒì„±: mkdir -p {path}
            âœ… README.md ìƒì„±
            âœ… ë¶€ëª¨ README ì—…ë°ì´íŠ¸
            âœ… íŒŒì¼ ì´ë™ ì™„ë£Œ
    
    common_new_subfolders:
      dev_docs:
        - "new_feature/: ìƒˆ ê¸°ëŠ¥ ê°œë°œ ë¬¸ì„œ (Feature X)"
        - "performance/: ì„±ëŠ¥ ìµœì í™” ë³´ê³ ì„œ"
        - "migration_v{n}/: ë²„ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¬¸ì„œ"
        - "integration/: ì™¸ë¶€ ì‹œìŠ¤í…œ í†µí•©"
        - "refactoring/: ë¦¬íŒ©í† ë§ ê¸°ë¡"
        - "security/: ë³´ì•ˆ ê´€ë ¨ ë¶„ì„"
      
      docs:
        - "guides/advanced/: ê³ ê¸‰ ì‚¬ìš©ìž ê°€ì´ë“œ"
        - "guides/troubleshooting/: íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"
        - "protocols/: íŠ¹ì • í”„ë¡œí† ì½œ ëª¨ìŒ"
      
      deliverable_specs:
        - "{agent_id}/: ìƒˆ Agent ì¶”ê°€ ì‹œ"
    
    execution_steps:
      step_1: "ê¸°ì¡´ í•˜ìœ„ í´ë” êµ¬ì¡° íŒŒì•… (ls + README ì½ê¸°)"
      step_2: "ìƒì„± í•„ìš”ì„± í‰ê°€ (decision_matrix ì ìš©)"
      step_3: "í´ë”ëª… ê²°ì • (naming rules ì¤€ìˆ˜)"
      step_4: "ìžë™ í´ë” ìƒì„± (mkdir -p)"
      step_5: "README.md ìƒì„± (template í™œìš©)"
      step_6: "ë¶€ëª¨ README.md ì—…ë°ì´íŠ¸"
      step_7: "íŒŒì¼ ì´ë™ (mv)"
      step_8: "git add (í´ë” + íŒŒì¼)"
      step_9: "ë¡œê·¸ ê¸°ë¡ (ì„¸ì…˜ ì„œë¨¸ë¦¬ì— í¬í•¨)"
    
    validation:
      before_creation:
        - "í´ë”ëª… ì¤‘ë³µ ì²´í¬ (ls)"
        - "ë¶€ëª¨ READMEì— ìœ ì‚¬ ì¹´í…Œê³ ë¦¬ ì¡´ìž¬ ì—¬ë¶€ í™•ì¸"
        - "í´ë”ëª… ë„¤ì´ë° ê·œì¹™ ì¤€ìˆ˜ í™•ì¸"
      
      after_creation:
        - "README.md ì¡´ìž¬ í™•ì¸"
        - "ë¶€ëª¨ README.md ì—…ë°ì´íŠ¸ í™•ì¸"
        - "íŒŒì¼ì´ ì •ìƒ ì´ë™ë˜ì—ˆëŠ”ì§€ í™•ì¸"

  execution:
    mode: "auto"
    
    command_sequence:
      - "ls *.md | grep -v 'README\\|CHANGELOG\\|CONTEXT_WINDOW'"
      - "# ê° íŒŒì¼ ìžë™ ë¶„ë¥˜ ë° ì´ë™"
      - "# í•„ìš” ì‹œ í•˜ìœ„ í´ë” ìžë™ ìƒì„±"
      - "mkdir -p {new_subfolder} && cat > {new_subfolder}/README.md <<EOF\n{template}\nEOF"
      - "mv {file} {target_folder}/"
      - "git add {moved_files} {new_folders}"
      - "# ëª¨ë“  ìž‘ì—…ì„ ë¡œê·¸ì— ê¸°ë¡"
    
    output_summary:
      format: |
        ðŸ“‚ íŒŒì¼ ì •ë¦¬ ì™„ë£Œ
        
        **ì´ë™ëœ íŒŒì¼**: {count}ê°œ
        
        {ì´ë™ ë‚´ì—­ ë¦¬ìŠ¤íŠ¸}
        
        **ìƒì„±ëœ í´ë”**: {count}ê°œ
        
        {ìƒì„±ëœ í´ë” ë¦¬ìŠ¤íŠ¸}
        
        **Git ìƒíƒœ**:
          git statusë¡œ ë³€ê²½ì‚¬í•­ í™•ì¸ ê°€ëŠ¥

# ========================================
# STEP 1: ì„¸ì…˜ ì„œë¨¸ë¦¬ ìž‘ì„±
# ========================================

session_summary:
  purpose: "ìž‘ì—… ë‚´ìš© ì •ë¦¬ + ë‹¤ìŒ ì„¸ì…˜ì„ ìœ„í•œ ì™„ì „í•œ ì»¨í…ìŠ¤íŠ¸ ë³´ì¡´"
  
  file_naming:
    format: "session_summary_{date}_{time}_{keyword1}_{keyword2}.yaml"
    example: "session_summary_20251127_1430_cursorrules_optimization.yaml"
    location: "dev_docs/session_summaries/"
    note: "ì†Œë¬¸ìž + ì–¸ë”ìŠ¤ì½”ì–´ (snake_case)"
  
  # ========================================
  # SECTION 1: ë©”íƒ€ë°ì´í„°
  # ========================================
  
  metadata:
    fields:
      session_date: "YYYY-MM-DD"
      session_time: "HH:MM-HH:MM"
      duration: "Xh Ymin"
      branch: "alpha / main"
      version_before: "v7.11.0"
      version_after: "v7.11.1 (ë³€ê²½ ì‹œ)"
      keywords: ["keyword1", "keyword2", "keyword3"]
      ai_model: "Claude Sonnet 4.5 / GPT-4o (ì‚¬ìš©ëœ ëª¨ë¸)"
  
  # ========================================
  # SECTION 2: ì„¸ì…˜ ëª©í‘œ ë° ì»¨í…ìŠ¤íŠ¸
  # ========================================
  
  session_objective:
    purpose: "ì´ ì„¸ì…˜ì—ì„œ ë¬´ì—‡ì„ í•˜ë ¤ê³  í–ˆëŠ”ê°€?"
    
    fields:
      primary_goal: |
        ì£¼ìš” ëª©í‘œë¥¼ 1-2ë¬¸ìž¥ìœ¼ë¡œ ëª…í™•ížˆ ê¸°ìˆ 
        ì˜ˆ: ".cursorrules íŒŒì¼ì„ 75ì¤„ë¡œ ì••ì¶•í•˜ì—¬ AIê°€ 100% ì½ë„ë¡ ìµœì í™”"
      
      background: |
        ì™œ ì´ ìž‘ì—…ì´ í•„ìš”í–ˆëŠ”ê°€?
        ì˜ˆ: "ê¸°ì¡´ 798ì¤„ íŒŒì¼ì„ AIê°€ ì™„ì „ížˆ ì½ì§€ ëª»í•˜ëŠ” ë¬¸ì œ ë°œìƒ"
      
      trigger: |
        ë¬´ì—‡ì´ ì´ ì„¸ì…˜ì„ ì‹œìž‘í•˜ê²Œ í–ˆëŠ”ê°€?
        ì˜ˆ: "ì‚¬ìš©ìž ìš”ì²­: .cursorrules ìž¬êµ¬ì„± í•„ìš”"
      
      scope: |
        ìž‘ì—… ë²”ìœ„
        ì˜ˆ: ".cursorrules ì••ì¶•, ì™¸ë¶€ ì°¸ì¡° ë¬¸ì„œ ìƒì„±, System RAG Onboarding ì¶”ê°€"
  
  # ========================================
  # SECTION 3: ìˆ˜í–‰í•œ ìž‘ì—… (ìƒì„¸)
  # ========================================
  
  work_performed:
    purpose: "ë¬´ì—‡ì„ í–ˆëŠ”ê°€? (êµ¬ì²´ì ìœ¼ë¡œ)"
    
    structure:
      task_1:
        name: "ìž‘ì—…ëª… (ì˜ˆ: .cursorrules ì••ì¶•)"
        description: "ìž‘ì—… ë‚´ìš© ì„¤ëª… (2-3ë¬¸ìž¥)"
        
        files_modified:
          - path: "/Users/.../umis/.cursorrules"
            action: "compressed (798 â†’ 75 lines)"
            changes:
              - "ë¶ˆí•„ìš”í•œ ì„¤ëª… ì œê±°"
              - "ì™¸ë¶€ ì°¸ì¡°ë¡œ ìœ„ìž„"
              - "í•µì‹¬ ëª…ë ¹ì–´ë§Œ ìœ ì§€"
            before_state: "798ì¤„, ì¤‘ë³µ ë‚´ìš© ë‹¤ìˆ˜"
            after_state: "75ì¤„, í•µì‹¬ë§Œ ìœ ì§€"
            validation: "read_fileë¡œ í™•ì¸ ì™„ë£Œ"
        
        files_created:
          - path: "UMIS_AI_REFERENCE.json"
            purpose: "AI ì „ìš© ì°¸ì¡° ë¬¸ì„œ (minified JSON)"
            size: "4,896 bytes (~1,300 tokens)"
            content_summary: "System RAG ì‚¬ìš©ë²•, Agent ë§¤í•‘, ë„êµ¬ ëª©ë¡"
        
        files_deleted:
          - path: "UMIS_AI_REFERENCE.yaml"
            reason: "JSONìœ¼ë¡œ ëŒ€ì²´ (35% ë” ìž‘ìŒ)"
        
        result: "ì„±ê³µ / ë¶€ë¶„ ì™„ë£Œ / ì‹¤íŒ¨"
        notes: "íŠ¹ì´ì‚¬í•­ ë˜ëŠ” ì˜ˆìƒê³¼ ë‹¤ë¥¸ ì "
      
      task_2:
        name: "umis.yamlì— ai_onboarding ì„¹ì…˜ ì¶”ê°€"
        # ... ë™ì¼ êµ¬ì¡°
  
  # ========================================
  # SECTION 4: íŒŒì¼ ë³€ê²½ ë‚´ì—­ (ì „ì²´)
  # ========================================
  
  files_changed:
    purpose: "ëª¨ë“  ë³€ê²½ëœ íŒŒì¼ì˜ ì™„ì „í•œ ëª©ë¡"
    
    summary:
      total_modified: 5
      total_created: 3
      total_deleted: 1
      total_moved: 0
    
    modified_files:
      - path: ".cursorrules"
        line_changes: "798 â†’ 75 (-723ì¤„, 91% ê°ì†Œ)"
        change_type: "major refactor"
        sections_affected:
          - "ì „ì²´ êµ¬ì¡° ìž¬ì„¤ê³„"
          - "System Commands ì¶”ê°€"
          - "ì™¸ë¶€ ì°¸ì¡°ë¡œ ìœ„ìž„"
        depends_on: []
        affects:
          - "UMIS_AI_REFERENCE.json (ì°¸ì¡° ëŒ€ìƒ)"
          - "CURSOR_SYSTEM_COMMANDS.md (ì°¸ì¡° ëŒ€ìƒ)"
      
      - path: "umis.yaml"
        line_changes: "6,613 â†’ 6,838 (+225ì¤„)"
        change_type: "section addition"
        sections_affected:
          - "ai_onboarding (Lines 38-262, ì‹ ê·œ)"
        depends_on:
          - "sync_umis_to_rag.py (ìžë™ ìƒì„± ë¡œì§)"
        affects:
          - "tool_registry.yaml (ìžë™ ìž¬ìƒì„± í•„ìš”)"
          - "umis_core.yaml (INDEX ì—…ë°ì´íŠ¸ í•„ìš”)"
          - "System RAG (ìž¬êµ¬ì¶• í•„ìš”)"
      
      - path: "scripts/sync_umis_to_rag.py"
        line_changes: "547 â†’ 612 (+65ì¤„)"
        change_type: "feature addition"
        sections_affected:
          - "_create_onboarding_tools() ë©”ì„œë“œ ì¶”ê°€"
          - "_generate_registry() ë¡œì§ ìˆ˜ì •"
        depends_on:
          - "umis.yaml (ai_onboarding ì„¹ì…˜)"
        affects:
          - "tool_registry.yaml (ìƒì„± ì‚°ì¶œë¬¼)"
    
    created_files:
      - path: "UMIS_AI_REFERENCE.json"
        size: "4,896 bytes"
        purpose: "AI ì „ìš© ì°¸ì¡° (minified JSON)"
        created_from: "UMIS_AI_REFERENCE.yaml ë³€í™˜"
      
      - path: "CURSOR_SYSTEM_COMMANDS.md"
        size: "~2KB"
        purpose: "ì‚¬ìš©ìžìš© ì‹œìŠ¤í…œ ëª…ë ¹ì–´ ê°€ì´ë“œ"
        created_from: "ìƒˆë¡œ ìž‘ì„±"
      
      - path: "SESSION_CLOSURE_PROTOCOL.yaml"
        size: "~25KB"
        purpose: "ì„¸ì…˜ ë§ˆë¬´ë¦¬ ê°€ì´ë“œ (ì´ ë¬¸ì„œ!)"
        created_from: "ìƒˆë¡œ ìž‘ì„±"
    
    deleted_files:
      - path: "UMIS_AI_REFERENCE.yaml"
        reason: "JSONìœ¼ë¡œ ëŒ€ì²´"
        backup: "ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì— ë³´ì¡´"
  
  # ========================================
  # SECTION 5: ì˜ì¡´ì„± ë§µ
  # ========================================
  
  dependency_map:
    purpose: "íŒŒì¼ ê°„ ì˜ì¡´ì„± ëª…ì‹œ (ì–´ë–¤ íŒŒì¼ì´ ì–´ë–¤ íŒŒì¼ì— ì˜í–¥ì„ ì£¼ëŠ”ê°€?)"
    
    chains:
      chain_1_system_rag:
        trigger: "umis.yaml ë³€ê²½"
        cascade:
          - step: "umis.yaml ìˆ˜ì • (ai_onboarding ì¶”ê°€)"
          - step: "â†’ sync_umis_to_rag.py ì‹¤í–‰ í•„ìš”"
          - step: "â†’ tool_registry.yaml ìžë™ ìž¬ìƒì„±"
          - step: "â†’ System RAG ìž¬êµ¬ì¶• í•„ìš” (python scripts/build_system_knowledge.py)"
          - step: "â†’ (ë³„ë„) umis_core.yaml ìˆ˜ë™ ì—…ë°ì´íŠ¸ (INDEX)"
        
        status: "ì™„ë£Œ / ë¯¸ì™„ë£Œ / ë¶€ë¶„ ì™„ë£Œ"
        
        files_involved:
          - umis.yaml: "source (ìˆ˜ì •ë¨)"
          - sync_umis_to_rag.py: "processor (ì‹¤í–‰ í•„ìš”)"
          - tool_registry.yaml: "output (ìž¬ìƒì„± í•„ìš”)"
          - data/chroma_db/system_knowledge/: "database (ìž¬êµ¬ì¶• í•„ìš”)"
          - umis_core.yaml: "index (ìˆ˜ë™ ì—…ë°ì´íŠ¸, ë³„ë„ ì²´ì¸)"
        
        note: |
          umis_core.yamlì€ ì£¼ ì²´ì¸ì— í¬í•¨ë˜ì§€ ì•ŠìŒ (ìˆ˜ë™ ê´€ë¦¬ INDEX)
          tool_registry.yaml â†’ System RAGê°€ ì§ì ‘ ì—°ê²°ë¨
      
      chain_2_cursorrules:
        trigger: ".cursorrules ì••ì¶•"
        cascade:
          - step: ".cursorrules ì••ì¶• (75ì¤„)"
          - step: "â†’ UMIS_AI_REFERENCE.json ìƒì„± (ì™¸ë¶€ ì°¸ì¡°)"
          - step: "â†’ CURSOR_SYSTEM_COMMANDS.md ìƒì„± (ì‚¬ìš©ìž ê°€ì´ë“œ)"
        
        status: "ì™„ë£Œ"
        
        files_involved:
          - .cursorrules: "main file (ìˆ˜ì •ë¨)"
          - UMIS_AI_REFERENCE.json: "reference (ìƒì„±ë¨)"
          - CURSOR_SYSTEM_COMMANDS.md: "guide (ìƒì„±ë¨)"
      
      chain_3_architecture_docs:
        trigger: "ì•„í‚¤í…ì²˜ ë³€ê²½"
        cascade:
          - step: "ì‹œìŠ¤í…œ êµ¬ì¡° ë³€ê²½ ì‹œ"
          - step: "â†’ UMIS_ARCHITECTURE_BLUEPRINT.md ì—…ë°ì´íŠ¸ í•„ìš”"
          - step: "â†’ README.md ì—…ë°ì´íŠ¸ í•„ìš” (ìš”ì•½ ì„¹ì…˜)"
          - step: "â†’ CHANGELOG.md ì—…ë°ì´íŠ¸ í•„ìš”"
        
        status: "ì´ë²ˆ ì„¸ì…˜ì—ì„œëŠ” ë¯¸ìˆ˜í–‰"
  
  # ========================================
  # SECTION 6: ë‚¨ì€ ìž‘ì—… (ìš°ì„ ìˆœìœ„ë³„)
  # ========================================
  
  remaining_tasks:
    purpose: "ë‹¤ìŒ ì„¸ì…˜ì—ì„œ í•´ì•¼ í•  ìž‘ì—… (êµ¬ì²´ì ìœ¼ë¡œ)"
    
    critical:
      priority: "P0 (ì¦‰ì‹œ)"
      tasks:
        - task: "System RAG ìž¬êµ¬ì¶•"
          reason: "umis.yaml ë³€ê²½ì‚¬í•­ ë°˜ì˜ í•„ìš”"
          command: "python scripts/build_system_knowledge.py"
          estimated_time: "2-3ë¶„"
          dependencies: ["tool_registry.yaml ìž¬ìƒì„±"]
          blocked_by: []
          
        - task: "tool_registry.yaml ìž¬ìƒì„±"
          reason: "ai_onboarding ë„êµ¬ ì¶”ê°€"
          command: "python scripts/sync_umis_to_rag.py"
          estimated_time: "30ì´ˆ"
          dependencies: []
          blocked_by: []
    
    high:
      priority: "P1 (1-2ì¼ ë‚´)"
      tasks:
        - task: "UMIS_ARCHITECTURE_BLUEPRINT.md ì—…ë°ì´íŠ¸"
          reason: "Onboarding êµ¬ì¡° ì¶”ê°€ ë°˜ì˜"
          sections_to_update:
            - "System RAG ì„¹ì…˜ (Tier 0 Onboarding ì¶”ê°€)"
            - "Metadata ì„¹ì…˜ (ìµœì‹  ì»¤ë°‹ í•´ì‹œ)"
          estimated_time: "30ë¶„"
          
        - task: "README.md ì—…ë°ì´íŠ¸"
          reason: "ìµœì‹  ì—…ë°ì´íŠ¸ ìš”ì•½ ì¶”ê°€"
          section: "## ðŸ“° Latest Updates (ìµœí•˜ë‹¨)"
          estimated_time: "10ë¶„"
    
    medium:
      priority: "P2 (1ì£¼ì¼ ë‚´)"
      tasks:
        - task: "CHANGELOG.md ì—…ë°ì´íŠ¸"
          reason: "v7.11.1 ë³€ê²½ì‚¬í•­ ê¸°ë¡"
          sections:
            - ".cursorrules ìµœì í™”"
            - "Onboarding RAG ì¶”ê°€"
          estimated_time: "20ë¶„"
    
    low:
      priority: "P3 (ì„ íƒì )"
      tasks:
        - task: "Onboarding ë„êµ¬ í…ŒìŠ¤íŠ¸"
          reason: "ìƒˆ AI ì„¸ì…˜ì—ì„œ ì‹¤ì œ ìž‘ë™ ê²€ì¦"
          test_scenario: "ìƒˆ Cursor ì„¸ì…˜ ì‹œìž‘ â†’ Onboarding ìˆœì„œ ì‹¤í–‰"
  
  # ========================================
  # SECTION 7: ë‹¤ìŒ ì„¸ì…˜ ì¤€ë¹„ (í•„ë…!)
  # ========================================
  
  next_session_prep:
    purpose: "ë‹¤ìŒ ì„¸ì…˜ ì‹œìž‘ ì „ ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•  ë‚´ìš©"
    
    must_read_files:
      - file: "dev_docs/session_summaries/session_summary_{this_session}.yaml"
        reason: "ì´ë²ˆ ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸"
        sections: "ì „ì²´ (íŠ¹ížˆ SECTION 6, 7)"
        read_command: "read_file(...)"
      
      - file: "umis.yaml"
        reason: "ai_onboarding ì„¹ì…˜ í™•ì¸"
        sections: "Lines 38-262 (ai_onboarding)"
        read_command: "read_file(..., offset=38, limit=225)"
      
      - file: ".cursorrules"
        reason: "ìµœì‹  ê·œì¹™ í™•ì¸"
        sections: "ì „ì²´ (75ì¤„)"
        read_command: "read_file(...)"
      
      - file: "UMIS_AI_REFERENCE.json"
        reason: "AI ì°¸ì¡° ë¬¸ì„œ í™•ì¸"
        sections: "ì „ì²´ (minified, 2ì¤„)"
        read_command: "read_file(...)"
    
    must_know_context:
      - context: ".cursorrulesëŠ” ì´ì œ 75ì¤„ (ì™¸ë¶€ ì°¸ì¡° ë°©ì‹)"
        why: "AIê°€ ì „ì²´ë¥¼ ì½ì„ ìˆ˜ ìžˆë„ë¡ ìµœì í™”ë¨"
        
      - context: "Onboarding RAG (Tier 0) ì¶”ê°€ë¨"
        why: "ìƒˆ AI ì„¸ì…˜ ì‹œ ë¹ ë¥¸ í•™ìŠµ ê°€ëŠ¥"
        tool_keys:
          - "tool:onboarding:quick_start"
          - "tool:onboarding:state_machine"
          - "tool:onboarding:agent_essentials"
        
      - context: "System RAG ìž¬êµ¬ì¶• í•„ìš”"
        why: "umis.yaml ë³€ê²½ì‚¬í•­ ë¯¸ë°˜ì˜"
        action: "python scripts/build_system_knowledge.py ì‹¤í–‰"
    
    potential_issues:
      - issue: "System RAG ë¯¸êµ¬ì¶• ì‹œ"
        symptom: "tool:onboarding:* ê²€ìƒ‰ ì‹¤íŒ¨"
        solution: "scripts/build_system_knowledge.py ì‹¤í–‰"
        
      - issue: "tool_registry.yaml ë¯¸ë™ê¸°í™” ì‹œ"
        symptom: "Onboarding ë„êµ¬ ê°œìˆ˜ ë¶ˆì¼ì¹˜"
        solution: "scripts/sync_umis_to_rag.py ì‹¤í–‰"
    
    recommended_start_sequence:
      step_1: "session_summary íŒŒì¼ ì½ê¸° (ì´ íŒŒì¼)"
      step_2: "ë‚¨ì€ ìž‘ì—… í™•ì¸ (SECTION 6)"
      step_3: "ì˜ì¡´ì„± íŒŒì¼ ì½ê¸° (SECTION 7 must_read_files)"
      step_4: "Critical ìž‘ì—…ë¶€í„° ì‹œìž‘ (P0)"
      step_5: "ìž‘ì—… ì¤‘ ì˜ì¡´ì„± ì²´ì¸ í™•ì¸ (SECTION 5)"
  
  # ========================================
  # SECTION 8: ì£¼ìš” ê²°ì •ì‚¬í•­ ë° ì¸ì‚¬ì´íŠ¸
  # ========================================
  
  key_decisions:
    purpose: "ì™œ ì´ë ‡ê²Œ ê²°ì •í–ˆëŠ”ê°€? (ë¯¸ëž˜ ì°¸ì¡°ìš©)"
    
    decisions:
      - decision: ".cursorrulesë¥¼ 75ì¤„ë¡œ ì••ì¶•"
        reason: "AIê°€ ì „ì²´ íŒŒì¼ì„ ì½ì§€ ëª»í•˜ëŠ” ë¬¸ì œ í•´ê²°"
        alternatives_considered:
          - "ê·¸ëŒ€ë¡œ ìœ ì§€ â†’ ê¸°ê° (AIê°€ ëª» ì½ìŒ)"
          - "200ì¤„ë¡œ ì••ì¶• â†’ ê¸°ê° (ì—¬ì „ížˆ ê¸º)"
        trade_offs:
          pros: ["AI 100% ì½ê¸°", "í•µì‹¬ë§Œ ìœ ì§€", "ê°€ë…ì„± í–¥ìƒ"]
          cons: ["ìƒì„¸ ì„¤ëª… ë¶€ì¡± â†’ ì™¸ë¶€ ì°¸ì¡°ë¡œ í•´ê²°"]
        
      - decision: "YAML â†’ JSON ë³€í™˜ (AI ì°¸ì¡° ë¬¸ì„œ)"
        reason: "35% í¬ê¸° ê°ì†Œ, 3.6ë°° ë¹ ë¥¸ íŒŒì‹±"
        alternatives_considered:
          - "YAML ìœ ì§€ â†’ ê¸°ê° (ëœ íš¨ìœ¨ì )"
          - "TOML â†’ ê¸°ê° (ìƒíƒœê³„ ìž‘ìŒ)"
        trade_offs:
          pros: ["í† í° íš¨ìœ¨", "íŒŒì‹± ì†ë„"]
          cons: ["ê°€ë…ì„± ë‚®ìŒ â†’ ì‚¬ìš©ìžìš©ì€ MD ì œê³µ"]
      
      - decision: "Onboarding RAG (Tier 0) ì¶”ê°€"
        reason: "ìƒˆ AI ì„¸ì…˜ ì‹œ ë¹ ë¥¸ í•™ìŠµ í•„ìš”"
        expected_impact: "AI í•™ìŠµ ì‹œê°„ 70% ë‹¨ì¶• (ì˜ˆìƒ)"
  
  insights:
    purpose: "ìž‘ì—… ì¤‘ ë°œê²¬í•œ ì¤‘ìš”í•œ ì‚¬ì‹¤"
    
    - insight: ".cursorrules íŒŒì¼ í¬ê¸°ì™€ AI ì´í•´ë„ëŠ” ë°˜ë¹„ë¡€"
      evidence: "798ì¤„ â†’ ì½ì§€ ëª»í•¨, 75ì¤„ â†’ 100% ì½ìŒ"
      
    - insight: "íŒŒì¼ëª… íŒ¨í„´ ê¸°ë°˜ ë¶„ë¥˜ëŠ” ë¶ˆì¶©ë¶„"
      evidence: "ë‚´ìš© í™•ì¸ ì—†ì´ëŠ” ì˜¤ë¶„ë¥˜ ìœ„í—˜"
      action_taken: "SESSION_CLOSURE_PROTOCOLì— ë‚´ìš© ê¸°ë°˜ ë¶„ë¥˜ ê·œì¹™ ì¶”ê°€"
  
  # ========================================
  # SECTION 9: ì˜¤ë¥˜ ë° í•´ê²°
  # ========================================
  
  errors_encountered:
    purpose: "ë°œìƒí•œ ë¬¸ì œì™€ í•´ê²° ë°©ë²• (ë¯¸ëž˜ ì°¸ì¡°)"
    
    - error: "StrReplace ì‹¤íŒ¨ (old_string ë¶ˆì¼ì¹˜)"
      context: ".cursorrules ìˆ˜ì • ì¤‘"
      cause: "íŒŒì¼ì´ ì´ì „ ë‹¨ê³„ì—ì„œ ì´ë¯¸ ìˆ˜ì •ë¨"
      solution: "read_fileë¡œ ìµœì‹  ë‚´ìš© í™•ì¸ í›„ ìž¬ì‹œë„"
      lesson: "ì—°ì† ìˆ˜ì • ì‹œ íŒŒì¼ ìƒíƒœ í™•ì¸ í•„ìˆ˜"
      
    - error: "(ë‹¤ë¥¸ ì˜¤ë¥˜ê°€ ìžˆë‹¤ë©´ ì¶”ê°€)"
  
  # ========================================
  # SECTION 10: ìž¬ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´
  # ========================================
  
  useful_commands:
    purpose: "ì´ ì„¸ì…˜ì—ì„œ ì‚¬ìš©í•œ ìœ ìš©í•œ ëª…ë ¹ì–´"
    
    - command: "python scripts/sync_umis_to_rag.py"
      purpose: "umis.yaml â†’ tool_registry.yaml ë™ê¸°í™”"
      when: "umis.yaml ìˆ˜ì • í›„"
      
    - command: "python scripts/build_system_knowledge.py"
      purpose: "System RAG ìž¬êµ¬ì¶•"
      when: "tool_registry.yaml ë³€ê²½ í›„"
      duration: "~2ë¶„"
    
    - command: "python scripts/query_system_rag.py tool:onboarding:quick_start"
      purpose: "Onboarding ë„êµ¬ í…ŒìŠ¤íŠ¸"
      when: "ìƒˆ ë„êµ¬ ì¶”ê°€ í›„ ê²€ì¦"
  
  # ========================================
  # SECTION 11: ì„¸ì…˜ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
  # ========================================
  
  completion_checklist:
    - "[ ] ëª¨ë“  íŒŒì¼ ë³€ê²½ì‚¬í•­ ì €ìž¥ë¨"
    - "[ ] ì˜ì¡´ì„± íŒŒì¼ ëª©ë¡ ìž‘ì„±ë¨"
    - "[ ] ë‚¨ì€ ìž‘ì—… ìš°ì„ ìˆœìœ„ë³„ ì •ë¦¬ë¨"
    - "[ ] ë‹¤ìŒ ì„¸ì…˜ ì¤€ë¹„ ì„¹ì…˜ ìž‘ì„±ë¨"
    - "[ ] git status í™•ì¸ë¨"
    - "[ ] ìž„ì‹œ íŒŒì¼ ì •ë¦¬ë¨"
    - "[ ] ì„¸ì…˜ ì„œë¨¸ë¦¬ íŒŒì¼ ì €ìž¥ë¨ (dev_docs/session_summaries/)"

# ========================================
# STEP 2: UMIS_ARCHITECTURE_BLUEPRINT.md ì—…ë°ì´íŠ¸
# ========================================

architecture_update:
  purpose: "ì•„í‚¤í…ì²˜ ë¬¸ì„œë¥¼ í•­ìƒ ìµœì‹  ìƒíƒœë¡œ ìœ ì§€"
  file: "docs/architecture/UMIS_ARCHITECTURE_BLUEPRINT.md"
  
  check_process:
    1_compare_changes:
      action: "ì„¸ì…˜ì—ì„œ ë³€ê²½ëœ ë‚´ìš©ê³¼ í˜„ìž¬ ë¬¸ì„œ ë¹„êµ"
      focus_areas:
        - "ì‹œìŠ¤í…œ êµ¬ì¡° ë³€ê²½"
        - "Agent ì—­í•  ë³€ê²½"
        - "ì›Œí¬í”Œë¡œìš° ë³€ê²½"
        - "RAG êµ¬ì¡° ë³€ê²½"
        - "ë„êµ¬/ëª…ë ¹ì–´ ì¶”ê°€"
    
    2_identify_updates:
      check_sections:
        - "System Overview"
        - "Agent Definitions"
        - "Workflow Diagrams"
        - "RAG Architecture"
        - "File Structure"
    
    3_update_metadata:
      required_fields:
        - version: "v7.11.1"
        - updated: "2025-11-27"
        - alpha_branch_commit: "git rev-parse HEAD"
        - alpha_branch_date: "git log -1 --format=%cd HEAD"
        - main_branch_commit: "git rev-parse main (if synced)"
        - main_branch_date: "git log -1 --format=%cd main (if synced)"
        - last_sync: "alphaì™€ main ë§ˆì§€ë§‰ ë™ê¸°í™” ë‚ ì§œ"
      
      metadata_location: "ë¬¸ì„œ ìƒë‹¨ YAML frontmatter"
      
      commands:
        get_commit_hash: "git rev-parse HEAD"
        get_commit_date: "git log -1 --format='%Y-%m-%d %H:%M:%S' HEAD"
    
    4_remove_changelog:
      rule: "CHANGELOG ë‚´ìš© ì œê±° (í˜„ìž¬ ìƒíƒœë§Œ ìœ ì§€)"
      note: "ë³€ê²½ ì´ë ¥ì€ CHANGELOG.mdë¡œ"
  
  update_commands:
    - "Read current UMIS_ARCHITECTURE_BLUEPRINT.md"
    - "Compare with session changes"
    - "Update changed sections"
    - "Update metadata (commits, dates)"
    - "Verify no changelog content"

# ========================================
# STEP 3: umis.yaml ì—…ë°ì´íŠ¸ ë° ì˜ì¡´ì„± íŒŒì•…
# ========================================

umis_yaml_update:
  purpose: "umis.yaml ë³€ê²½ì‚¬í•­ ë°˜ì˜ + ì˜ì¡´ì„± ì²´ì¸ íŒŒì•…"
  file: "umis.yaml"
  
  update_process:
    1_identify_changes:
      check_sections:
        - "system: (SECTION 1)"
        - "agents: (SECTION 6)"
        - "implementation_guide: (SECTION 8)"
        - "ai_onboarding: (ì‹ ê·œ)"
      
      compare_with: "ì„¸ì…˜ ìž‘ì—… ë‚´ìš©"
    
    2_update_sections:
      action: "ë³€ê²½ëœ ì„¹ì…˜ ìˆ˜ì •"
      validate: "YAML ë¬¸ë²• ê²€ì¦"
    
    3_dependency_mapping:
      purpose: "ìˆ˜ì •ìœ¼ë¡œ ì˜í–¥ë°›ëŠ” íŒŒì¼ ì‹ë³„"
      
      dependency_chain:
        umis_yaml_changes:
          affects:
            - "umis_core.yaml (INDEX ì—…ë°ì´íŠ¸ í•„ìš”)"
            - "tool_registry.yaml (ìžë™ ìƒì„±)"
            - "System RAG (ìž¬êµ¬ì¶• í•„ìš”)"
            - ".cursorrules (ì°¸ì¡° ì—…ë°ì´íŠ¸ í•„ìš”)"
            - "UMIS_AI_REFERENCE.json (ìž¬ìƒì„± í•„ìš”)"
        
        agent_section_changes:
          affects:
            - "tool:{agent}:complete (ìžë™ ìž¬ìƒì„±)"
            - "í•´ë‹¹ Agent ë¬¸ì„œ (docs/ ë˜ëŠ” dev_docs/)"
        
        system_section_changes:
          affects:
            - "tool:system:{section} (ìžë™ ìž¬ìƒì„±)"
            - "ê´€ë ¨ ê°€ì´ë“œ ë¬¸ì„œ"
      
      modification_scope:
        rule: "í•œ ì„¹ì…˜ ìˆ˜ì • ì‹œ ì˜í–¥ ë²”ìœ„ ëª…ì‹œ"
        example:
          modified: "agents.observer"
          impacts:
            - "tool:observer:complete (ìžë™)"
            - "tool:system:agents (ìžë™)"
            - "UMIS_ARCHITECTURE_BLUEPRINT.md (ìˆ˜ë™)"
            - "docs/guides/ ê´€ë ¨ ë¬¸ì„œ (ìˆ˜ë™)"
    
    4_update_todo:
      action: "ë‹¤ìŒ ì„¸ì…˜ ìž‘ì—… ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸"
      location: "ì„¸ì…˜ ì„œë¨¸ë¦¬ íŒŒì¼"

# ========================================
# STEP 4: umis_core.yaml ë™ê¸°í™” í™•ì¸
# ========================================

umis_core_sync:
  purpose: "umis_core.yamlì´ umis.yaml ë³€ê²½ì‚¬í•­ ë°˜ì˜í–ˆëŠ”ì§€ í™•ì¸"
  file: "umis_core.yaml"
  
  check_items:
    version:
      umis_yaml: "version: 7.11.1"
      umis_core_yaml: "version: 7.11.1"
      must_match: true
    
    tool_count:
      current: "15 tools (v7.11.0)"
      after_onboarding: "19 tools (v7.11.1)"
      verify: "total_tools: 19"
    
    tool_list:
      check: "tools: ì„¹ì…˜"
      verify_exists:
        - "tier_0_onboarding (4ê°œ, ì‹ ê·œ)"
        - "tier_1_system (9ê°œ)"
        - "tier_2_complete (6ê°œ)"
    
    ai_guide:
      check: "ai_guide: ì„¹ì…˜"
      verify: "Onboarding ë¡œë“œ ê²½ë¡œ í¬í•¨"
  
  update_if_needed:
    command: "ìˆ˜ë™ íŽ¸ì§‘ í•„ìš”"
    note: "umis_core.yamlì€ ìˆ˜ë™ ê´€ë¦¬ íŒŒì¼"

# ========================================
# STEP 5: System RAG ìµœì‹ í™”
# ========================================

system_rag_update:
  purpose: "umis.yaml ë³€ê²½ì‚¬í•­ì„ System RAGì— ë°˜ì˜"
  
  execution:
    step_1_sync:
      command: "python3 scripts/sync_umis_to_rag.py"
      action: "umis.yaml â†’ tool_registry.yaml ë™ê¸°í™”"
      output: "19ê°œ ë„êµ¬ ìƒì„± (Onboarding 4 + System 9 + Complete 6)"
      backup: "config/backups/ ìžë™ ìƒì„±"
    
    step_2_rebuild:
      command: "python3 scripts/build_system_knowledge.py"
      action: "ChromaDB ìž¬êµ¬ì¶•"
      duration: "30ì´ˆ-1ë¶„"
    
    step_3_verify:
      command: "python3 scripts/query_system_rag.py --list"
      expected: "19ê°œ ë„êµ¬ ëª©ë¡"
      verify:
        - "tool:onboarding:* (4ê°œ)"
        - "tool:system:* (9ê°œ)"
        - "tool:{agent}:complete (6ê°œ)"
    
    step_4_test:
      command: "python3 scripts/query_system_rag.py tool:onboarding:quick_start"
      expected: "ì •ìƒ ì¶œë ¥ (56ì¤„)"
  
  combined_command: "/umis rebuild (ìžë™ ì‹¤í–‰)"

# ========================================
# STEP 6: CHANGELOG & README ì—…ë°ì´íŠ¸
# ========================================

documentation_update:
  
  changelog:
    file: "CHANGELOG.md"
    purpose: "ê¸°ìˆ ì  ë³€ê²½ ì´ë ¥ (ê°œë°œìžìš©)"
    
    structure:
      format: "## [v7.11.1] - 2025-11-27"
      sections:
        added:
          - "ì‹ ê·œ ê¸°ëŠ¥/íŒŒì¼/ë„êµ¬"
          - "ì˜ˆ: Added ai_onboarding section to umis.yaml"
        
        changed:
          - "ê¸°ì¡´ ê¸°ëŠ¥ ìˆ˜ì •"
          - "ì˜ˆ: Optimized .cursorrules from 360 to 74 lines"
        
        fixed:
          - "ë²„ê·¸ ìˆ˜ì •"
          - "ì˜ˆ: Fixed System RAG tool count validation"
        
        deprecated:
          - "ë” ì´ìƒ ì‚¬ìš© ì•ˆ í•¨ (ê³§ ì œê±°)"
        
        removed:
          - "ì œê±°ëœ ê¸°ëŠ¥"
    
    style:
      - "ê¸°ìˆ ì  ìƒì„¸ í¬í•¨ (ê°œë°œìžê°€ ì´í•´ ê°€ëŠ¥)"
      - "íŒŒì¼ëª…, ë¼ì¸ ìˆ˜, í•¨ìˆ˜ëª… ë“± êµ¬ì²´ì "
      - "Before/After ë¹„êµ í¬í•¨"
  
  readme:
    file: "README.md"
    purpose: "í”„ë¡œì íŠ¸ ì†Œê°œ (ì²« ë°©ë¬¸ìžìš©)"
    
    update_areas:
      top_section:
        when: "ë©”ì´ì € ê¸°ëŠ¥ ì¶”ê°€"
        example: "6-Agent â†’ 7-Agent"
        location: "ìƒë‹¨ ì†Œê°œ"
      
      features_list:
        when: "í•µì‹¬ ê¸°ëŠ¥ ì¶”ê°€"
        example: "AI Onboarding System"
        location: "Features ì„¹ì…˜"
      
      bottom_summary:
        when: "ëª¨ë“  ì—…ë°ì´íŠ¸"
        location: "ë¬¸ì„œ í•˜ë‹¨ Update Summary"
        format: |
          ## Recent Updates
          
          ### 2025-11-27 - v7.11.1
          - Optimized .cursorrules (360â†’74 lines, 80% reduction)
          - Added AI Onboarding system (4 new tools)
          - Introduced /umis system commands
          - Created UMIS_AI_REFERENCE.json (35% smaller than YAML)
    
    style:
      - "ê°„ê²°í•˜ê³  ëª…í™• (ë¹„ê¸°ìˆ ì )"
      - "ì£¼ìš” ë³€ê²½ì‚¬í•­ë§Œ (ì„¸ë¶€ì‚¬í•­ ì œì™¸)"
      - "ì‚¬ìš©ìž ê´€ì  (ì™œ ì¤‘ìš”í•œì§€)"

# ========================================
# ADDITIONAL CHECKS (ì¶”ê°€ ì²´í¬ í•­ëª©)
# ========================================

additional_checks:
  
  git_status:
    purpose: "ì»¤ë°‹ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ í™•ì¸"
    command: "git status"
    action: "ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ í™•ì¸ â†’ ì„¸ì…˜ ì„œë¨¸ë¦¬ì— í¬í•¨"
  
  linting:
    purpose: "YAML ë¬¸ë²• ê²€ì¦"
    files:
      - "umis.yaml"
      - "umis_core.yaml"
      - "config/tool_registry.yaml"
    command: "python3 scripts/validate_all_yaml.py"
    fix_if_errors: true
  
  test_execution:
    purpose: "ì£¼ìš” ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸"
    when: "ì½”ë“œ ë³€ê²½ ì‹œ"
    commands:
      - "python3 -m pytest tests/unit/ -v"
      - "python3 scripts/query_system_rag.py --list"
  
  backup_check:
    purpose: "ì¤‘ìš” íŒŒì¼ ë°±ì—… í™•ì¸"
    files:
      - "config/backups/tool_registry_*.yaml (ìžë™)"
      - "umis.yaml (ìˆ˜ë™ ë°±ì—… ê¶Œìž¥)"
    command: "ls config/backups/ -lt | head -5"
  
  cross_reference_check:
    purpose: "ë¬¸ì„œ ê°„ ì¼ê´€ì„± í™•ì¸"
    checks:
      - ".cursorrules ë²„ì „ = umis.yaml ë²„ì „"
      - "umis_core.yaml ë„êµ¬ ìˆ˜ = tool_registry.yaml ë„êµ¬ ìˆ˜"
      - "UMIS_ARCHITECTURE_BLUEPRINT.md ë²„ì „ = system ë²„ì „"
      - "README.md ìµœì‹  ì—…ë°ì´íŠ¸ ë‚ ì§œ = ì˜¤ëŠ˜"

# ========================================
# EXECUTION SEQUENCE (ì‹¤í–‰ ìˆœì„œ)
# ========================================

execution_sequence:
  trigger: ["/umis close", "ì„¸ì…˜ ì¢…ë£Œ", "ì„¸ì…˜ ë§ˆë¬´ë¦¬"]
  
  step_by_step:
    
    step_0:
      name: "íŒŒì¼ ì •ë¦¬ ë° ì´ë™"
      duration: "2-3ë¶„"
      actions:
        - "ë£¨íŠ¸ í´ë” .md íŒŒì¼ í™•ì¸"
        - "file_organization.rules ì ìš©"
        - "ìž„ì‹œ íŒŒì¼ ì‚­ì œ"
        - "git add (ì´ë™ëœ íŒŒì¼)"
      output: "ì •ë¦¬ëœ í´ë” êµ¬ì¡°"
    
    step_1:
      name: "ì„¸ì…˜ ì„œë¨¸ë¦¬ ìž‘ì„±"
      duration: "5-10ë¶„"
      actions:
        - "ì„¸ì…˜ ë‚´ìš© íšŒê³ "
        - "YAML í¬ë§·ìœ¼ë¡œ ìž‘ì„±"
        - "ë‹¤ìŒ ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ ì •ë¦¬"
        - "git add session_summary"
      output: "dev_docs/session_summaries/session_summary_*.yaml"
    
    step_2:
      name: "ì•„í‚¤í…ì²˜ ë¬¸ì„œ ì—…ë°ì´íŠ¸"
      duration: "3-5ë¶„"
      actions:
        - "UMIS_ARCHITECTURE_BLUEPRINT.md ì½ê¸°"
        - "ë³€ê²½ ì„¹ì…˜ ì°¾ê¸°"
        - "ì—…ë°ì´íŠ¸ ì ìš©"
        - "ë©”íƒ€ë°ì´í„° ê°±ì‹  (git rev-parse HEADë¡œ ì»¤ë°‹ í•´ì‹œ ê°€ì ¸ì˜¤ê¸°)"
        - "git add UMIS_ARCHITECTURE_BLUEPRINT.md"
      output: "ìµœì‹  ìƒíƒœ ì•„í‚¤í…ì²˜ ë¬¸ì„œ"
    
    step_3:
      name: "umis.yaml ì—…ë°ì´íŠ¸ ë° ì˜ì¡´ì„± íŒŒì•…"
      duration: "5-10ë¶„"
      actions:
        - "ë³€ê²½ëœ ì„¹ì…˜ ìˆ˜ì •"
        - "YAML ê²€ì¦"
        - "ì˜ì¡´ì„± ì²´ì¸ íŒŒì•…"
        - "ì˜í–¥ë°›ëŠ” íŒŒì¼ ëª©ë¡ ìž‘ì„±"
        - "git add umis.yaml"
      output: "ì˜ì¡´ì„± ë§¤íŠ¸ë¦­ìŠ¤ + ì—…ë°ì´íŠ¸ ê³„íš"
    
    step_4:
      name: "umis_core.yaml ë™ê¸°í™”"
      duration: "2-3ë¶„"
      actions:
        - "ë²„ì „ ì¼ì¹˜ í™•ì¸"
        - "ë„êµ¬ ìˆ˜ ì¼ì¹˜ í™•ì¸"
        - "í•„ìš” ì‹œ ìˆ˜ë™ ì—…ë°ì´íŠ¸"
        - "git add umis_core.yaml"
      output: "ë™ê¸°í™”ëœ INDEX"
    
    step_5:
      name: "System RAG ìž¬êµ¬ì¶•"
      duration: "2-3ë¶„"
      actions:
        - "python scripts/sync_umis_to_rag.py"
        - "python scripts/build_system_knowledge.py"
        - "tool_registry.yaml í™•ì¸"
      output: "ìµœì‹  System RAG"
    
    step_6:
      name: "CHANGELOG ë° README ì—…ë°ì´íŠ¸"
      duration: "5-10ë¶„"
      actions:
        - "CHANGELOG.md ì—…ë°ì´íŠ¸ (ê¸°ìˆ ì  ë³€ê²½)"
        - "README.md ì—…ë°ì´íŠ¸ (ìš”ì•½ ì„¹ì…˜)"
        - "git add CHANGELOG.md README.md"
      output: "ìµœì‹  ë¬¸ì„œ"
    
    step_7:
      name: "ì¶”ê°€ ê²€ì¦"
      duration: "2-3ë¶„"
      actions:
        - "git status í™•ì¸"
        - "YAML ë¬¸ë²• ê²€ì¦"
        - "êµì°¨ ì°¸ì¡° í™•ì¸"
        - "ë°±ì—… í™•ì¸"
      output: "ê²€ì¦ ì™„ë£Œ"
    
    step_8:
      name: "Git ì»¤ë°‹"
      duration: "1-2ë¶„"
      actions:
        - "git status ìµœì¢… í™•ì¸"
        - "git diff ê²€í† "
        - "ì»¤ë°‹ ë©”ì‹œì§€ ìž‘ì„±"
        - "git commit -m '{message}'"
        - "ì»¤ë°‹ í•´ì‹œ í™•ì¸ (git rev-parse HEAD)"
      output: "ì»¤ë°‹ ì™„ë£Œ + ì»¤ë°‹ í•´ì‹œ"
      
      commit_message_template: |
        {type}: {subject}
        
        {body}
        
        Changed files:
        - {file1}
        - {file2}
        
        Session: session_summary_{date}_{time}_{keywords}.yaml
      
      commit_types:
        - "feat: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€"
        - "refactor: ë¦¬íŒ©í† ë§"
        - "docs: ë¬¸ì„œ ì—…ë°ì´íŠ¸"
        - "fix: ë²„ê·¸ ìˆ˜ì •"
        - "chore: ìœ ì§€ë³´ìˆ˜"
        - "style: ì½”ë“œ ìŠ¤íƒ€ì¼ ë³€ê²½"
        - "test: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •"
      
      commit_best_practices:
        - "ì œëª©ì€ 50ìž ì´ë‚´"
        - "ë³¸ë¬¸ì€ 72ìžì—ì„œ ì¤„ë°”ê¿ˆ"
        - "ë¬´ì—‡ì„, ì™œ í–ˆëŠ”ì§€ ì„¤ëª… (ì–´ë–»ê²ŒëŠ” ì½”ë“œ ì°¸ì¡°)"
        - "ì„¸ì…˜ ì„œë¨¸ë¦¬ íŒŒì¼ ë§í¬ í¬í•¨"

# ========================================
# CHECKLIST TEMPLATE
# ========================================

checklist_template:
  use: "AIê°€ ì‹¤í–‰ ì‹œ ì²´í¬"
  
  items:
    - "[ ] Step 0: íŒŒì¼ ì´ë™ (ë£¨íŠ¸ ì •ë¦¬)"
    - "[ ] Step 1: ì„¸ì…˜ ì„œë¨¸ë¦¬ ìž‘ì„± (YAML)"
    - "[ ] Step 2: ARCHITECTURE_BLUEPRINT ì—…ë°ì´íŠ¸ (ë©”íƒ€ë°ì´í„°)"
    - "[ ] Step 3: umis.yaml ì—…ë°ì´íŠ¸ (ì˜ì¡´ì„± íŒŒì•…)"
    - "[ ] Step 4: umis_core.yaml ë™ê¸°í™”"
    - "[ ] Step 5: System RAG ìž¬êµ¬ì¶•"
    - "[ ] Step 6: CHANGELOG & README ì—…ë°ì´íŠ¸"
    - "[ ] Step 7: ì¶”ê°€ ê²€ì¦ (git status, YAML, êµì°¨ì°¸ì¡°)"
    - "[ ] Step 8: Git ì»¤ë°‹ (ì»¤ë°‹ í•´ì‹œ ì €ìž¥)"

# ========================================
# EXAMPLE OUTPUT
# ========================================

example_session_summary:
  filename: "SESSION_SUMMARY_20251127_1430_cursorrules_optimization.yaml"
  content_preview: |
    metadata:
      session_date: "2025-11-27"
      session_time: "14:30-16:45"
      duration: "2h 15min"
      branch: "alpha"
      version_before: "v7.11.0"
      version_after: "v7.11.1"
      keywords: ["cursorrules", "optimization", "system_rag"]
    
    summary:
      objective: "Optimize .cursorrules for AI comprehension and add AI Onboarding system"
      
      achievements:
        - "Reduced .cursorrules from 360 to 74 lines (80% compression)"
        - "Added ai_onboarding section to umis.yaml (225 lines)"
        - "Created 4 new Onboarding tools in System RAG"
        - "Introduced /umis system commands"
        - "Created UMIS_AI_REFERENCE.json (35% smaller than YAML)"
      
      key_decisions:
        - decision: "Use /umis prefix for system commands"
          reason: "Avoid LLM injection confusion, explicit user consent"
        
        - decision: "Use Minified JSON for AI reference"
          reason: "35% smaller, 3.6x faster parsing than YAML"
        
        - decision: "Keep .cursorrules in YAML"
          reason: "Natural language instructions + comments + readability"
      
      technical_changes:
        umis_yaml:
          - "Line 38-262: Added ai_onboarding section (225 lines)"
          - "Total: 6,838 â†’ 7,063 lines"
        
        sync_script:
          - "Line 105-228: Added _create_onboarding_tools() method"
          - "Line 111-113: Filter ai_onboarding from system sections"
          - "Line 346: Added onboarding:quick_start to required tools"
        
        cursorrules:
          - "Complete rewrite: 360 â†’ 74 lines"
          - "Added system commands section"
          - "Added installation check"
          - "Removed verbose explanations"
        
        new_files:
          - "UMIS_AI_REFERENCE.json (4,896 bytes, minified)"
          - "CURSOR_SYSTEM_COMMANDS.md (guide)"
          - "CURSOR_AUTO_SETUP.md (deprecated by system commands)"
    
    context_for_next_session:
      remaining_tasks:
        priority_1:
          - task: "Test .cursorrules with fresh Cursor IDE instance"
            context: "Verify installation detection works"
            files: [".cursorrules", "setup/setup.py"]
        
        priority_2:
          - task: "Update UMIS_ARCHITECTURE_BLUEPRINT.md"
            context: "Add ai_onboarding section, update metadata"
            files: ["docs/architecture/UMIS_ARCHITECTURE_BLUEPRINT.md"]
        
        priority_3:
          - task: "Consider TOON format for future optimization"
            context: "30-60% token savings, but experimental"
            research: "https://abdulkadersafi.com/blog/toon-the-token-efficient-data-format"
      
      required_context:
        file_structure:
          - "ai_onboarding at Line 38-262 of umis.yaml"
          - "Onboarding tools in System RAG (4 tools)"
        
        commands:
          - "python3 scripts/sync_umis_to_rag.py"
          - "python3 scripts/query_system_rag.py tool:onboarding:quick_start"
        
        key_insights:
          - "Minified JSON is 3.6x faster than YAML for parsing"
          - "AI reads 100% of 72-line files but only ~60% of 360-line files"
          - "System commands (/umis) prevent LLM injection confusion"
      
      errors_encountered:
        - error: "None"
          resolution: "All operations successful"
      
      terminal_commands:
        - "python3 scripts/sync_umis_to_rag.py"
        - "python3 scripts/query_system_rag.py --list"
        - "ls data/chroma_db/system_knowledge/"
    
    dependencies:
      modified_files:
        - path: "umis.yaml"
          lines_changed: "+225"
          sections: ["ai_onboarding (new)"]
        
        - path: "scripts/sync_umis_to_rag.py"
          lines_changed: "+68"
          methods: ["_create_onboarding_tools()"]
        
        - path: ".cursorrules"
          lines_changed: "-286"
          approach: "complete rewrite"
        
        - path: "UMIS_AI_REFERENCE.json"
          lines_changed: "+2"
          type: "new file"
      
      dependency_chain:
        umis_yaml:
          affects:
            - "tool_registry.yaml (auto-generated)"
            - "System RAG ChromaDB (rebuild required)"
            - "umis_core.yaml (manual sync needed)"
            - ".cursorrules (reference update)"
        
        sync_script:
          affects:
            - "tool_registry.yaml generation"
            - "Onboarding tools creation"
      
      update_required:
        immediate:
          - "umis_core.yaml (add Onboarding tools to list)"
          - "UMIS_ARCHITECTURE_BLUEPRINT.md (add Onboarding section)"
        
        next_session:
          - "CHANGELOG.md (add v7.11.1 entry)"
          - "README.md (update summary)"
    
    next_steps:
      immediate:
        - "Update umis_core.yaml (add tier_0_onboarding)"
        - "Update UMIS_ARCHITECTURE_BLUEPRINT.md metadata"
        - "Test installation detection on fresh fork"
      
      short_term:
        - "Write user documentation for /umis commands"
        - "Add /umis commands to README.md"
        - "Create video demo for onboarding"
      
      long_term:
        - "Evaluate TOON format (30-60% token savings)"
        - "A/B test: 74-line vs 360-line .cursorrules"
        - "Measure actual AI comprehension rate"

# ========================================
# USER APPROVAL SECTION
# ========================================

user_approval_required:
  step_0_folder_rules:
    status: "draft"
    action: "Review file_organization.rules and approve/modify"
    
  step_3_dependency_scope:
    status: "needs confirmation"
    action: "Verify dependency_chain is complete"
  
  step_8_commit_message:
    status: "needs review"
    action: "Review commit message before executing"

# ========================================
# END
# ========================================
