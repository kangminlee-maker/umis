# ========================================
# UMIS 환경 변수 설정 (v7.7.0)
# ========================================
#
# 사용법:
#   1. 이 파일을 .env로 복사
#   2. 아래 설정 입력
#   3. 저장
#
# ========================================

# ========================================
# 🎯 UMIS 전역 설정 (6-Agent System)
# ========================================

# LLM 제공자 설정 (전체 시스템 적용)
UMIS_MODE=native
# 옵션:
#   native   - Cursor Agent LLM 사용 (권장, 비용 $0, 최고 품질) ✅ v7.7.0 진짜 구현!
#            
#            Agent별 동작:
#            → Explorer: RAG 검색 → Cursor LLM이 가설 생성 (LLM API 호출 없음)
#            → Observer: RAG 검색만 (시장 구조 패턴 매칭)
#            → Quantifier: RAG 검색만 (계산 방법론 검색)
#            → Validator: RAG 검색 (데이터 소스 85% 커버)
#            → Estimator: 5-Phase (RAG + Web Search, LLM API 없음)
#            → Guardian: 목표/순환/품질 모니터링
#            
#            비용: $0 (RAG 임베딩만, ~$0.0001/요청)
#            워크플로우: Python RAG → Cursor Composer 분석
#
#   external - External API LLM 사용 (자동화, 비용 발생)
#            
#            Agent별 동작:
#            → Explorer: RAG + OpenAI API 호출 → 완성된 가설
#            → 나머지 Agent: native와 동일 (RAG만)
#            
#            비용: ~$0.10/요청 (100회 시 $10)
#            워크플로우: Python RAG + API → 완성된 결과
#            사용 시나리오: 완전 자동화, 배치 처리, cron job
#
# v7.7.0 변경사항:
#   - 이전 (v7.4.0): Native 모드 개념만 존재, 실제로는 External 동작
#   - 현재 (v7.7.0): Native 모드 실제 구현 완료! ✅
#   - LLMProvider 클래스 추가
#   - Explorer Native/External 분기 처리
#   - 테스트: python scripts/test_native_mode.py

# ========================================
# 참고: Estimator (Fermi) Agent - 5-Phase Architecture (v7.7.0)
# ========================================
#
# Estimator는 5-Phase Architecture로 작동합니다.
# Native/External 모드 모두에서 LLM API 호출 없이 동작 (비용 $0)
#
# 용어 정의:
#   - Phase: Estimator 전체 프로세스 단계 (0-4)
#   - Step: Phase 4 (Fermi) 내부 세부 단계 (1-4)
#
# Phase 0: Literal (프로젝트 명시 데이터, 즉시 반환)
# Phase 1: Direct RAG (Tier 1 학습 규칙, <0.5초, 95%+ 커버)
# Phase 2: Validator (확정 데이터 검색, <1초, 85% 처리)
# Phase 3: Guestimation (Tier 2 추정, 3-8초, 80%+ 신뢰도)
# Phase 4: Fermi Decomposition (Tier 3 분해, 10-30초)
#   └─ Step 1: 초기 스캔 (가용 데이터 파악)
#   └─ Step 2: 모형 생성 (3-5개 후보)
#   └─ Step 3: 실행 가능성 체크 (재귀 추정)
#   └─ Step 4: 모형 실행 (Backtracking)
#
# 특징:
#   - 100% 커버리지 (LLM API 없이)
#   - Web Search 자동화 (DuckDuckGo/Google)
#   - 단위 자동 변환, Relevance/Boundary 검증
#
# ⚠️ Deprecated:
#   - 3-Tier Architecture (v7.5.0 이전) → 5-Phase로 대체
#
# 상세: umis_core.yaml (Line 603-693)
#
# ========================================

# ========================================
# 🔑 API Keys
# ========================================

# OpenAI API 키 (필수!)
OPENAI_API_KEY=your-openai-api-key-here

# ========================================
# 🌐 Web Search 설정 (v7.6.2)
# ========================================

# 검색 엔진 선택: "duckduckgo" (무료, 기본) or "google" (유료, 고품질)
WEB_SEARCH_ENGINE=duckduckgo

# Web Search 활성화 여부
WEB_SEARCH_ENABLED=true

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Google Custom Search (선택적 - google 사용 시만 필요)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# API 키: https://console.cloud.google.com/apis/credentials
# Engine ID: https://programmablesearchengine.google.com/
GOOGLE_API_KEY=your-google-api-key-here
GOOGLE_SEARCH_ENGINE_ID=your-search-engine-id-here

# 비용: $5/1000 쿼리 (100/일 무료)
# 품질: 최고
# 권장: 프로덕션, 품질 중시

# ========================================
# 📦 RAG 설정
# ========================================

# Embedding 모델
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSION=3072

# LLM 모델 (External Mode 사용 시)
LLM_MODEL=gpt-4-turbo-preview
LLM_TEMPERATURE=0.7

# Chroma DB 경로
CHROMA_PERSIST_DIR=./data/chroma

# ========================================
# 🔗 Neo4j 설정 (Knowledge Graph)
# ========================================

NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=umis_password
NEO4J_DATABASE=neo4j

# ========================================
# 🔍 LangSmith 설정 (선택적, 디버깅/모니터링)
# ========================================

# LangSmith Tracing 활성화 (기본: false)
# true로 설정 시 모든 LLM 호출이 LangSmith에 기록됨
LANGCHAIN_TRACING_V2=false

# LangSmith API 키 (활성화 시 필요)
# 받기: https://smith.langchain.com/
LANGCHAIN_API_KEY=your-langchain-api-key-here

# LangSmith 프로젝트명 (기본: umis-rag)
LANGCHAIN_PROJECT=umis-rag

# 용도:
#   - LLM 호출 추적 및 디버깅
#   - 성능 모니터링
#   - 비용 추적
#   - 품질 개선
#
# 권장:
#   - 개발 중: false (불필요)
#   - 디버깅: true (문제 해결 시)
#   - 프로덕션: false (개인정보 보호)

