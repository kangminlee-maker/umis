# ========================================
# UMIS RAG Cursor Rules - AI Optimized
# v6.3.0-alpha | Non-coder | Cursor-only
# ========================================

# === PART 1: UMIS ê°œë… (AI í•„ìˆ˜ ì´í•´) ===

system:
  name: Universal Market Intelligence System
  version: 6.3.0-alpha
  
  agents:
    Observer: {name: Albert, role: market_structure, rag: false}
    Explorer: {name: Steve, role: opportunity_discovery, rag: true}  # ìœ ì¼!
    Quantifier: {name: Bill, role: market_sizing, rag: false}
    Validator: {name: Rachel, role: data_verification, rag: false}
    Guardian: {name: Stewart, role: process_monitoring, rag: false}
  
  # id: Agent ID (Observer, Explorer, ...)
  # name: Default name (Albert, Steve, ...) â†’ agent_names.yamlë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
  
  flow: Observer(observe)â†’Explorer(rag+hypothesize)â†’Quantifier(calculate)â†’Validator(verify)â†’Guardian(approve)
  
  discovery_sprint: ëª…í™•ë„<7 â†’ 5-Agent ë³‘ë ¬ íƒìƒ‰ â†’ ëª©í‘œ êµ¬ì²´í™”
  
  rag:
    active: Explorer only
    db: data/chroma/explorer_knowledge_base (54 patterns/cases)
    sources: 
      - umis_business_model_patterns.yaml (31 patterns)
      - umis_disruption_patterns.yaml (23 patterns)

user:
  skill: no-coding
  tool: Cursor Composer + Agent mode
  lang: í•œêµ­ì–´
  workflow: ëŒ€í™”â†’ìë™í™”â†’ê²°ê³¼

# === PART 2: ìë™í™” ê·œì¹™ ===

## ì´ˆê¸° ì„¤ì¹˜
setup:
  detect: ["umis ì„¤ì¹˜", "ì„¤ì •", "setup"]
  
  flow:
    check_env:
      no: cp env.template .env â†’ msg_api_key â†’ build_index â†’ msg_ready
      yes: msg_already_setup
  
  commands:
    build_index: python scripts/02_build_index.py --agent explorer
  
  messages:
    api_key: |
      âœ… .env ìƒì„± ì™„ë£Œ!
      
      ë‹¤ìŒ: .env íŒŒì¼ ì—´ì–´ì„œ
      OPENAI_API_KEY=your-key â†’ ìì‹ ì˜ í‚¤ë¡œ ë³€ê²½
      
      ë°›ê¸°: https://platform.openai.com/api-keys
    
    ready: |
      âœ… ì„¤ì • ì™„ë£Œ!
      
      ì‚¬ìš©: Cmd+I â†’ @umis_guidelines.yaml
      "@Explorer, ì‹œì¥ ë¶„ì„í•´ì¤˜"

## Agent ì´ë¦„ ì»¤ìŠ¤í„°ë§ˆì´ì§•
agent_names:
  file: agent_names.yaml
  format: {observer: Albert, explorer: Steve, ...}
  bidirectional: true
  
  mapping:
    input: @Steve â†’ Explorer
    output: Explorer â†’ Steve
  
  defaults: {Observer: Albert, Explorer: Steve, Quantifier: Bill, Validator: Rachel, Guardian: Stewart}

## YAML ìˆ˜ì • â†’ RAG ì¬êµ¬ì¶•
yaml_watch:
  files: [umis_business_model_patterns.yaml, umis_disruption_patterns.yaml, umis_ai_guide.yaml]
  
  on_save:
    ask: "RAG ì¬êµ¬ì¶•? (2ì´ˆ)"
    if_yes: python scripts/01_convert_yaml.py â†’ python scripts/02_build_index.py --agent explorer
    msg: "âœ… RAG ì—…ë°ì´íŠ¸!"

## Explorer RAG ìë™ í™œìš©
explorer_rag:
  pattern_search:
    detect: ["íŒ¨í„´ ë§¤ì¹­", "íŠ¸ë¦¬ê±° ì‹œê·¸ë„"]
    cmd: python scripts/query_rag.py pattern "{signals}"
    msg: "ğŸ” {pattern_id} ë°œê²¬!"
  
  case_search:
    detect: ["ìœ ì‚¬ ì‚¬ë¡€", "ì„±ê³µ ì‚¬ë¡€"]
    cmd: python scripts/query_rag.py case "{industry}" --pattern {id}
    integrate: analysis

## ë°ì´í„° ì¶”ê°€
data_add:
  detect: ["ë°ì´í„° ì¶”ê°€", "ìˆ˜ì •", "ë„£ì–´ì¤˜"]
  
  flow:
    open_yaml â†’ find_section â†’ suggest_diff â†’
    if_approved: save â†’ rebuild_rag â†’ "âœ… ì™„ë£Œ!"
  
  example: "ì½”ì›¨ì´ í•´ì§€ìœ¨ ì¶”ê°€" â†’ umis_business_model_patterns.yaml ìë™ ìˆ˜ì •

## ë‹¨ì¶• ëª…ë ¹
shortcuts:
  - "rag ê²€ìƒ‰ {q}": python scripts/query_rag.py {q}
  - "rag ì¬êµ¬ì¶•": scripts/01+02
  - "rag í†µê³„": show collection stats
  - "rag í…ŒìŠ¤íŠ¸": scripts/03_test_search.py

# === PART 3: ê²½ë¡œ & ì„¤ì • ===

paths:
  root: /Users/kangmin/Documents/AI_dev/umis-main
  yamls: umis_*.yaml
  scripts: scripts/
  data: data/
  venv: source venv/bin/activate

execution:
  cd: {root}
  activate: venv
  relative: from root

# === PART 4: ë©”ì‹œì§€ í…œí”Œë¦¿ ===

messages:
  í•œêµ­ì–´: ëª¨ë“  ì‘ë‹µ
  ì¹œí™”ì : ê¸°ìˆ ìš©ì–´ ì‰½ê²Œ
  ì´ëª¨ì§€: ìµœì†Œ (í•„ìš”ì‹œë§Œ)
  
  format:
    progress: "ğŸ” {action} ì¤‘..."
    success: "âœ… {result}"
    error: "âŒ {problem} â†’ {solution}"

# ========================================
# END (80ì¤„)
# ========================================

