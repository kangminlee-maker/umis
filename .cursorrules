# ========================================
# UMIS RAG Cursor Rules - AI Optimized
# v7.2.0 | Non-coder | Cursor-only
# ========================================

# === PART 1: UMIS ê°œë… (AI í•„ìˆ˜ ì´í•´) ===

system:
  name: Universal Market Intelligence System
  version: 7.2.0
  
  agents:
    Observer: {name: Albert, role: market_structure, rag: true}       # v7.1.0+
    Explorer: {name: Steve, role: opportunity_discovery, rag: true}   # v7.0.0+
    Quantifier: {name: Bill, role: market_sizing, rag: true}         # v7.1.0+
    Validator: {name: Rachel, role: data_verification, rag: true}    # v7.1.0+
    Guardian: {name: Stewart, role: process_monitoring, rag: true}   # v7.1.0+ (Meta-RAG)
  
  # id: Agent ID (Observer, Explorer, ...)
  # name: Default name (Albert, Steve, ...) â†’ agent_names.yamlë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
  
  flow: Observer(observe)â†’Explorer(rag+hypothesize)â†’Quantifier(calculate)â†’Validator(verify)â†’Guardian(approve)
  
  discovery_sprint: ëª…í™•ë„<7 â†’ 5-Agent ë³‘ë ¬ íƒìƒ‰ â†’ ëª©í‘œ êµ¬ì²´í™”
  
  rag:
    active: 5-Agent RAG (v7.1.0+)
    architecture: v3.0 (4-Layer: Canonical â†’ Projected â†’ Graph â†’ Memory)
    
    layers:
      layer_1_canonical: "ì •ê·œí™”ëœ ì›ë³¸"
      layer_2_projected: "Agentë³„ ê²€ìƒ‰ìš© ë·°"
      layer_3_graph: "Neo4j (13 ë…¸ë“œ, 45 ê´€ê³„)"
      layer_4_memory: "Query/Goal/RAE Memory"
    
    collections:
      explorer:
        - "explorer_knowledge_base (54ê°œ íŒ¨í„´)"
        - "31 Business Models + 23 Disruption Patterns"
      
      quantifier:
        - "calculation_methodologies (30ê°œ, ë¹Œë“œ í•„ìš”)"
        - "market_benchmarks (100ê°œ, ë¹Œë“œ í•„ìš”)"
      
      validator:
        - "data_sources_registry (50ê°œ, ë¹Œë“œ í•„ìš”)"
        - "definition_validation_cases (84ê°œ, ë¹Œë“œ í•„ìš”)"
      
      observer:
        - "market_structure_patterns (30ê°œ, ë¹Œë“œ í•„ìš”)"
        - "value_chain_benchmarks (50ê°œ, ë¹Œë“œ í•„ìš”)"
      
      guardian:
        - "goal_memory (ëª©í‘œ ì •ë ¬)"
        - "query_memory (ìˆœí™˜ ê°ì§€)"
        - "rae_index (í‰ê°€ ì¼ê´€ì„±)"
      
      system:
        - "system_knowledge (28ê°œ ë„êµ¬)" # âœ… ë¹Œë“œ ì™„ë£Œ!
    
    sources: 
      - data/raw/umis_business_model_patterns.yaml (31 patterns)
      - data/raw/umis_disruption_patterns.yaml (23 patterns)
      - data/raw/market_benchmarks.yaml (ì¶”ê°€ ì˜ˆì •)
      - data/raw/definition_validation_cases.yaml (ì¶”ê°€ ì˜ˆì •)

user:
  skill: no-coding
  tool: Cursor Composer + Agent mode
  lang: í•œêµ­ì–´
  workflow: ëŒ€í™”â†’ìë™í™”â†’ê²°ê³¼

# === PART 2: ìë™í™” ê·œì¹™ ===

## ì´ˆê¸° ì„¤ì¹˜
setup:
  detect: ["umis ì„¤ì¹˜", "ì„¤ì •", "setup", "@setup"]
  
  flow:
    check_env:
      no: python setup/setup.py â†’ ìë™ ì„¤ì¹˜
      yes: python setup/setup.py --check â†’ ìƒíƒœ í™•ì¸
  
  commands:
    auto_install: python setup/setup.py
    minimal_install: python setup/setup.py --minimal
    check_status: python setup/setup.py --check
    build_index: python scripts/02_build_index.py --agent explorer
  
  guide: setup/AI_SETUP_GUIDE.md (AI ìë™ ì„¤ì¹˜ ê°€ì´ë“œ)
  
  messages:
    start: |
      ğŸš€ UMIS v7.0.0 ìë™ ì„¤ì¹˜ ì‹œì‘
      
      setup/AI_SETUP_GUIDE.md ì°¸ì¡°í•˜ì—¬ ì§„í–‰í•©ë‹ˆë‹¤.
      ì†Œìš” ì‹œê°„: 2-3ë¶„
    
    api_key: |
      âœ… .env ìƒì„± ì™„ë£Œ!
      
      ë‹¤ìŒ: .env íŒŒì¼ ì—´ì–´ì„œ
      OPENAI_API_KEY=your-key â†’ ìì‹ ì˜ í‚¤ë¡œ ë³€ê²½
      
      ë°›ê¸°: https://platform.openai.com/api-keys
    
    ready: |
      âœ… ì„¤ì¹˜ ì™„ë£Œ!
      
      ì‚¬ìš©: Cmd+I â†’ @umis.yaml
      "@Explorer, ì‹œì¥ ë¶„ì„í•´ì¤˜"

## Agent ì´ë¦„ ì»¤ìŠ¤í„°ë§ˆì´ì§•
agent_names:
  file: agent_names.yaml
  format: {observer: Albert, explorer: Steve, ...}
  bidirectional: true
  
  mapping:
    input: @Steve â†’ Explorer
    output: Explorer â†’ Steve
  
  defaults: {Observer: Albert, Explorer: Steve, Quantifier: Bill, Validator: Rachel, Guardian: Stewart}

## YAML ìˆ˜ì • â†’ RAG ì¬êµ¬ì¶•
yaml_watch:
  files: [umis_business_model_patterns.yaml, umis_disruption_patterns.yaml, umis_ai_guide.yaml]
  
  on_save:
    ask: "RAG ì¬êµ¬ì¶•? (2ì´ˆ)"
    if_yes: python scripts/01_convert_yaml.py â†’ python scripts/02_build_index.py --agent explorer
    msg: "âœ… RAG ì—…ë°ì´íŠ¸!"

## Explorer RAG ìë™ í™œìš©
explorer_rag:
  pattern_search:
    detect: ["íŒ¨í„´ ë§¤ì¹­", "íŠ¸ë¦¬ê±° ì‹œê·¸ë„"]
    cmd: python scripts/query_rag.py pattern "{signals}"
    msg: "ğŸ” {pattern_id} ë°œê²¬!"
  
  case_search:
    detect: ["ìœ ì‚¬ ì‚¬ë¡€", "ì„±ê³µ ì‚¬ë¡€"]
    cmd: python scripts/query_rag.py case "{industry}" --pattern {id}
    integrate: analysis

## ë°ì´í„° ì¶”ê°€
data_add:
  detect: ["ë°ì´í„° ì¶”ê°€", "ìˆ˜ì •", "ë„£ì–´ì¤˜"]
  
  flow:
    open_yaml â†’ find_section â†’ suggest_diff â†’
    if_approved: save â†’ rebuild_rag â†’ "âœ… ì™„ë£Œ!"
  
  example: "ì½”ì›¨ì´ í•´ì§€ìœ¨ ì¶”ê°€" â†’ umis_business_model_patterns.yaml ìë™ ìˆ˜ì •

## ë‹¨ì¶• ëª…ë ¹
shortcuts:
  - "rag ê²€ìƒ‰ {q}": python scripts/query_rag.py {q}
  - "rag ì¬êµ¬ì¶•": scripts/01+02
  - "rag í†µê³„": show collection stats
  - "rag í…ŒìŠ¤íŠ¸": scripts/03_test_search.py

# === PART 3: ê²½ë¡œ & ì„¤ì • ===

paths:
  root: {workspace_root}
  setup: setup/
  scripts: scripts/
  data: data/
  docs: docs/
  dev_docs: dev_docs/
  projects: projects/
  
files:
  main_guide: umis.yaml
  architecture: UMIS_ARCHITECTURE_BLUEPRINT.md
  install: INSTALL.md
  schema: schema_registry.yaml
  
execution:
  cd: {root}
  venv: source venv/bin/activate (optional)
  relative: from root

# === PART 4: ë©”ì‹œì§€ í…œí”Œë¦¿ ===

messages:
  í•œêµ­ì–´: ëª¨ë“  ì‘ë‹µ
  ì¹œí™”ì : ê¸°ìˆ ìš©ì–´ ì‰½ê²Œ
  ì´ëª¨ì§€: ìµœì†Œ (í•„ìš”ì‹œë§Œ)
  
  format:
    progress: "ğŸ” {action} ì¤‘..."
    success: "âœ… {result}"
    error: "âŒ {problem} â†’ {solution}"

# === PART 5: í´ë” êµ¬ì¡° (v7.0.0) ===

folders:
  setup: ì„¤ì¹˜ ê´€ë ¨ (AI_SETUP_GUIDE.md, setup.py)
  umis_rag: RAG ì½”ë“œ (ì‹¤ì œ ì‹œìŠ¤í…œ)
  scripts: RAG ìŠ¤í¬ë¦½íŠ¸
  data: Vector DB + íŒ¨í„´
  docs: í™œì„± í”„ë¡œí† ì½œ
  dev_docs: ê°œë°œ íˆìŠ¤í† ë¦¬ (ì‹œìŠ¤í…œ ë¹„ì˜ì¡´)
  projects: ë¶„ì„ í”„ë¡œì íŠ¸ (Git ì œì™¸)
  archive: Deprecated (main ë¸Œëœì¹˜ì—ì„œ ì œì™¸)

# === PART 6: Guardian Meta-RAG (v7.1.0) ===

guardian_meta_rag:
  enabled: true
  
  # í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ
  project_start:
    detect: ["í”„ë¡œì íŠ¸ ì‹œì‘", "[PROJECT_START]", "ìƒˆ í”„ë¡œì íŠ¸"]
    
    action: |
      from umis_rag.guardian import GuardianMetaRAG
      
      guardian = GuardianMetaRAG()
      goal_id = guardian.set_goal("{project_goal}")
      
      print("âœ… Guardian í™œì„±í™”: ëª©í‘œ ì„¤ì • ì™„ë£Œ")
      print("  - ìˆœí™˜ íŒ¨í„´ ê°ì§€")
      print("  - ëª©í‘œ ì •ë ¬ ëª¨ë‹ˆí„°ë§")
      print("  - í’ˆì§ˆ ìë™ í‰ê°€")
  
  # ì¿¼ë¦¬ ëª¨ë‹ˆí„°ë§
  circular_detection:
    check: "ë§¤ ì¿¼ë¦¬ë§ˆë‹¤"
    
    action: |
      result = guardian.memory.check_circular(query_text)
      
      if result['is_circular']:
          print("âš ï¸ ìˆœí™˜ ê°ì§€: ê°™ì€ ì£¼ì œ 3íšŒ ë°˜ë³µ")
          print(f"ğŸ’¡ ì œì•ˆ: {result['suggestion']}")
  
  # ì‚°ì¶œë¬¼ í‰ê°€
  deliverable_evaluation:
    detect: ["[DELIVERABLE_COMPLETE]", "ì‚°ì¶œë¬¼ ì™„ì„±"]
    
    action: |
      result = guardian.evaluate_deliverable({
          'id': deliverable_id,
          'content': content,
          'task_description': task
      })
      
      if result.passed:
          print(f"âœ… í’ˆì§ˆ ê²€ì¦ í†µê³¼: {result.grade}")
      else:
          for warning in result.warnings:
              print(f"âš ï¸ {warning}")
          for rec in result.recommendations:
              print(f"ğŸ’¡ {rec}")

# ========================================
# PART 7: System RAG (Key-based) - AI í•„ìˆ˜ ì‹¤í–‰!
# ========================================
#
# âš ï¸ AI: ëª¨ë“  UMIS í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ ì´ ì„¹ì…˜ì„ ë”°ë¥´ì„¸ìš”!
# ========================================

system_rag:
  enabled: true
  collection: "system_knowledge"
  total_tools: 28
  
  purpose: |
    AIê°€ UMIS ì „ì²´ ì‹œìŠ¤í…œì„ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê³ 
    í•„ìš”í•œ ë„êµ¬ë§Œ ì •í™•íˆ ë¡œë“œí•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ 77% ì ˆì•½

# ========================================
# AI í•„ìˆ˜ ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤ (ëª¨ë“  í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ!)
# ========================================

ai_mandatory_process:
  
  when_to_execute:
    - "í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ (ì²« ëŒ€í™”)"
    - "Agent ë©˜ì…˜ ê°ì§€ ì‹œ (@Explorer, @Quantifier ë“±)"
    - "ì‹œì¥ ë¶„ì„ ìš”ì²­ ì‹œ"
    - "ë³µì¡í•œ ì‘ì—… ì‹œì‘ ì „"
  
  # ===== STEP 1: umis_core.yaml ë¡œë“œ (í•„ìˆ˜!) =====
  step_1_load_index:
    action: "read_file tool ì‚¬ìš©"
    file: "umis_core.yaml"
    reason: "UMIS ì „ì²´ ê°œìš” íŒŒì•… (709ì¤„, INDEX)"
    
    what_to_read:
      critical:
        - "Lines 40-87: Quick Start (AI ì‚¬ìš©ë²•)"
        - "Lines 88-110: Agent Selection (ì–´ë–¤ Agent?)"
        - "Lines 289-469: Decision Guide (ì–´ë–¤ ë„êµ¬?)"
      
      optional:
        - "Lines 477-686: Agent Summary (ìƒì„¸)"
    
    key_takeaways:
      - "28ê°œ ë„êµ¬ tool_key í˜•ì‹"
      - "Agentë³„ ì£¼ìš” ë„êµ¬"
      - "Workflow ìˆœì„œ"
    
    mandatory: true
    skip_condition: "none (í•­ìƒ ì‹¤í–‰)"
  
  # ===== STEP 2: ì¿¼ë¦¬ ë¶„ì„ =====
  step_2_parse_query:
    action: "ì‚¬ìš©ì ìš”ì²­ì—ì„œ í•„ìš”í•œ Agent + ë„êµ¬ íŒŒì•…"
    
    parsing_rules:
      
      agent_detection:
        - "@Explorer" â†’ agent=explorer
        - "@Quantifier" â†’ agent=quantifier
        - "@Validator" â†’ agent=validator
        - "@Observer" â†’ agent=observer
        - "@Guardian" â†’ agent=guardian
        - "ì‹œì¥ ë¶„ì„" â†’ observer+explorer+quantifier
        - "ê¸°íšŒ ë°œêµ´" â†’ explorer
        - "SAM ê³„ì‚°" â†’ quantifier+validator
      
      tool_key_mapping:
        explorer:
          "íŒ¨í„´": "tool:explorer:pattern_search"
          "ê¸°íšŒ": "tool:explorer:7_step_process"
          "ê²€ì¦": "tool:explorer:validation_protocol"
          "ê°€ì„¤": "tool:explorer:hypothesis_generation"
        
        quantifier:
          "SAM|ì‹œì¥ ê·œëª¨": "tool:quantifier:sam_4methods"
          "ì„±ì¥": "tool:quantifier:growth_analysis"
          "ì‹œë‚˜ë¦¬ì˜¤": "tool:quantifier:scenario_planning"
          "ë²¤ì¹˜ë§ˆí¬": "tool:quantifier:benchmark_analysis"
        
        validator:
          "ì •ì˜": "tool:validator:data_definition"
          "ì¶œì²˜": "tool:validator:source_verification"
          "ì†Œì‹±": "tool:validator:creative_sourcing"
          "Gap": "tool:validator:gap_analysis"
        
        observer:
          "êµ¬ì¡°": "tool:observer:market_structure"
          "ê°€ì¹˜ì‚¬ìŠ¬": "tool:observer:value_chain"
          "ë¹„íš¨ìœ¨": "tool:observer:inefficiency_detection"
          "íŒŒê´´": "tool:observer:disruption_opportunity"
        
        guardian:
          "ì§„í–‰": "tool:guardian:progress_monitoring"
          "í’ˆì§ˆ": "tool:guardian:quality_evaluation"
        
        framework:
          "ì‹œì¥ ì •ì˜": "tool:framework:13_dimensions"
          "Discovery": "tool:framework:discovery_sprint"
          "7 Powers": "tool:framework:7_powers"
          "ê²½ìŸ": "tool:framework:competitive_analysis"
        
        universal:
          "guestimate|ì¶”ì •": "tool:universal:guestimation"
          "reasoner|ì •ë°€": "tool:universal:domain_reasoner_10_signals"
          "hybrid|auto": "tool:universal:hybrid_strategy"
  
  # ===== STEP 3: System RAG ê²€ìƒ‰ (í•„ìˆ˜!) =====
  step_3_execute_system_rag:
    action: "run_terminal_cmd tool ì‚¬ìš©í•˜ì—¬ í•„ìš”í•œ ë„êµ¬ ë¡œë“œ"
    
    command_template: "python3 scripts/query_system_rag.py {tool_key}"
    
    execution_examples:
      
      example_1_single_tool:
        query: "@Explorer, êµ¬ë… ëª¨ë¸ íŒ¨í„´"
        tool_key: "tool:explorer:pattern_search"
        command: "python3 scripts/query_system_rag.py tool:explorer:pattern_search"
        expected_output: "ë„êµ¬ content (~400ì¤„)"
        context_total: "709 (umis_core) + 400 (ë„êµ¬) = 1,109ì¤„"
      
      example_2_multiple_tools:
        query: "ìŒì•… ìŠ¤íŠ¸ë¦¬ë° ì‹œì¥ ë¶„ì„"
        tool_keys:
          - "tool:observer:market_structure"
          - "tool:explorer:pattern_search"
          - "tool:quantifier:sam_4methods"
        commands:
          - "python3 scripts/query_system_rag.py tool:observer:market_structure"
          - "python3 scripts/query_system_rag.py tool:explorer:pattern_search"
          - "python3 scripts/query_system_rag.py tool:quantifier:sam_4methods"
        expected_output: "3ê°œ ë„êµ¬ content (~1,200ì¤„)"
        context_total: "709 + 1,200 = 1,909ì¤„ (vs 6,102ì¤„, 69% ì ˆì•½)"
      
      example_3_workflow:
        query: "í”¼ì•„ë…¸ êµ¬ë… ì„œë¹„ìŠ¤ Discovery Sprint"
        tool_keys:
          - "tool:framework:discovery_sprint"
          - "tool:observer:market_structure"
          - "tool:explorer:pattern_search"
          - "tool:quantifier:sam_4methods"
          - "tool:validator:data_definition"
        commands: "ê° ë„êµ¬ë³„ query_system_rag.py ì‹¤í–‰"
        expected_output: "5ê°œ ë„êµ¬ content (~2,500ì¤„)"
        context_total: "709 + 2,500 = 3,209ì¤„ (vs 6,102ì¤„, 47% ì ˆì•½)"
    
    mandatory: true
    reason: "ë„êµ¬ ì—†ì´ëŠ” ì‘ì—… ë¶ˆê°€ëŠ¥"
    fallback: "System RAG ì‹¤íŒ¨ ì‹œ umis.yaml ì „ì²´ ë¡œë“œ (ë¹„íš¨ìœ¨)"
  
  # ===== STEP 4: Workflow ì‹¤í–‰ =====
  step_4_execute_workflow:
    action: "ë¡œë“œëœ ë„êµ¬ content ê¸°ë°˜ìœ¼ë¡œ ì‘ì—… ìˆ˜í–‰"
    
    workflow_types:
      
      discovery_sprint:
        when: "ëª©í‘œ ë¶ˆëª…í™• (ëª…í™•ë„ < 7)"
        tools:
          - "tool:framework:discovery_sprint"
          - "ëª¨ë“  Agent ë„êµ¬ (5-Agent ë³‘ë ¬)"
        duration: "1-3ì¼"
      
      comprehensive_study:
        when: "ìƒì„¸ ë¶„ì„ í•„ìš”"
        tools:
          - "tool:observer:market_structure"
          - "tool:explorer:7_step_process"
          - "tool:quantifier:sam_4methods"
          - "tool:validator:data_definition"
        duration: "2-4ì£¼"
      
      rapid_assessment:
        when: "ë¹ ë¥¸ íŒŒì•…"
        tools:
          - "tool:observer:market_structure"
          - "tool:explorer:pattern_search"
          - "tool:universal:guestimation"
        duration: "1-3ì¼"
      
      opportunity_discovery:
        when: "ê¸°íšŒ ë°œêµ´"
        tools:
          - "tool:explorer:pattern_search"
          - "tool:explorer:7_step_process"
          - "tool:explorer:validation_protocol"
        duration: "3-5ì¼"

# ========================================
# AI ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ëª¨ë“  í”„ë¡œì íŠ¸!)
# ========================================

ai_execution_checklist:
  
  before_starting_any_project:
    - step: "1. umis_core.yaml ì½ê¸° (read_file)"
      file: "umis_core.yaml"
      focus: "Lines 40-110 (Quick Start + Agent Selection)"
      mandatory: true
    
    - step: "2. ì¿¼ë¦¬ ë¶„ì„ (agent + keywords)"
      action: "ì‚¬ìš©ì ìš”ì²­ì—ì„œ í•„ìš”í•œ Agentì™€ ë„êµ¬ íŒŒì•…"
      output: "agent_id, tool_keys ë¦¬ìŠ¤íŠ¸"
      mandatory: true
    
    - step: "3. System RAG ì‹¤í–‰ (run_terminal_cmd)"
      action: "ê° tool_keyë§ˆë‹¤ query_system_rag.py ì‹¤í–‰"
      command: "python3 scripts/query_system_rag.py {tool_key}"
      repeat: "í•„ìš”í•œ ëª¨ë“  ë„êµ¬ì— ëŒ€í•´"
      mandatory: true
    
    - step: "4. ë¡œë“œëœ ë„êµ¬ content í™œìš©"
      action: "System RAG ê²°ê³¼ë¥¼ ì»¨í…ìŠ¤íŠ¸ì— í¬í•¨í•˜ì—¬ ì‘ì—… ìˆ˜í–‰"
      mandatory: true
  
  failure_handling:
    if_system_rag_fails:
      - action: "umis.yaml ì „ì²´ ë¡œë“œ (fallback)"
      - warning: "ì»¨í…ìŠ¤íŠ¸ ë¹„íš¨ìœ¨ (6,102ì¤„)"
      - notify_user: "System RAG ì‹¤íŒ¨, ì „ì²´ íŒŒì¼ ë¡œë“œ ì¤‘"
    
    if_collection_missing:
      - command: "python3 scripts/build_system_knowledge.py"
      - message: "System RAG ì¸ë±ìŠ¤ êµ¬ì¶• ì¤‘ (1ë¶„)"
      - retry: "êµ¬ì¶• í›„ ë‹¤ì‹œ ê²€ìƒ‰"

# ========================================
# AI ì‚¬ìš© ì˜ˆì‹œ (ë”°ë¼í•˜ì„¸ìš”!)
# ========================================

ai_usage_examples:
  
  example_1_simple:
    user_query: "@Explorer, êµ¬ë… ëª¨ë¸ íŒ¨í„´ ì°¾ì•„ì¤˜"
    
    ai_process:
      step_1: |
        # umis_core.yaml ì½ê¸°
        read_file("umis_core.yaml", offset=40, limit=70)
        â†’ Quick Start ì´í•´
      
      step_2: |
        # ì¿¼ë¦¬ ë¶„ì„
        agent = "explorer"
        keywords = ["êµ¬ë…", "ëª¨ë¸", "íŒ¨í„´"]
        tool_key = "tool:explorer:pattern_search"
      
      step_3: |
        # System RAG ì‹¤í–‰
        run_terminal_cmd("python3 scripts/query_system_rag.py tool:explorer:pattern_search")
        
        ê²°ê³¼: ë„êµ¬ content (~400ì¤„) íšë“
      
      step_4: |
        # ì‘ì—… ìˆ˜í–‰
        ë¡œë“œëœ "tool:explorer:pattern_search" content ê¸°ë°˜ìœ¼ë¡œ
        â†’ RAG íŒ¨í„´ ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤ ì´í•´
        â†’ ì‹¤ì œ RAG ê²€ìƒ‰ ì‹¤í–‰
        â†’ êµ¬ë… ëª¨ë¸ íŒ¨í„´ ë¶„ì„
    
    context_used: "709 + 400 = 1,109ì¤„ (vs 6,102ì¤„, 82% ì ˆì•½)"
  
  example_2_complex:
    user_query: "ìŒì•… ìŠ¤íŠ¸ë¦¬ë° ì‹œì¥ ë¶„ì„"
    
    ai_process:
      step_1: |
        # umis_core.yaml ì½ê¸°
        read_file("umis_core.yaml", offset=88, limit=110)
        â†’ Decision Guide ì°¸ì¡°
        â†’ "ì‹œì¥ ë¶„ì„" = Observer â†’ Explorer â†’ Quantifier
      
      step_2: |
        # í•„ìš”í•œ ë„êµ¬ ì‹ë³„
        tool_keys = [
          "tool:observer:market_structure",
          "tool:explorer:pattern_search",
          "tool:quantifier:sam_4methods"
        ]
      
      step_3: |
        # System RAG ì‹¤í–‰ (ë³‘ë ¬ ë˜ëŠ” ìˆœì°¨)
        for key in tool_keys:
          run_terminal_cmd(f"python3 scripts/query_system_rag.py {key}")
        
        ê²°ê³¼: 3ê°œ ë„êµ¬ content (~1,200ì¤„) íšë“
      
      step_4: |
        # Workflow ì‹¤í–‰
        1. Observer: ì‹œì¥ êµ¬ì¡° ê´€ì°° (market_structure ë„êµ¬ í™œìš©)
        2. Explorer: ê¸°íšŒ ë°œêµ´ (pattern_search ë„êµ¬ + RAG)
        3. Quantifier: SAM ê³„ì‚° (sam_4methods ë„êµ¬)
    
    context_used: "709 + 1,200 = 1,909ì¤„ (vs 6,102ì¤„, 69% ì ˆì•½)"
  
  example_3_discovery_sprint:
    user_query: "í”¼ì•„ë…¸ êµ¬ë… ì„œë¹„ìŠ¤ ì‹œì¥ (ëª©í‘œ ë¶ˆëª…í™•)"
    
    ai_process:
      step_1: |
        # umis_core.yaml ì½ê¸°
        read_file("umis_core.yaml")
        â†’ Discovery Sprint í•„ìš” íŒë‹¨ (ëª…í™•ë„ < 7)
      
      step_2: |
        # Discovery Sprint ë„êµ¬ + ëª¨ë“  Agent ë„êµ¬
        tool_keys = [
          "tool:framework:discovery_sprint",
          "tool:observer:market_structure",
          "tool:explorer:pattern_search",
          "tool:explorer:7_step_process",
          "tool:quantifier:sam_4methods",
          "tool:validator:data_definition",
          "tool:guardian:progress_monitoring"
        ]
      
      step_3: |
        # System RAG ì‹¤í–‰ (7ê°œ ë„êµ¬)
        for key in tool_keys:
          run_terminal_cmd(f"python3 scripts/query_system_rag.py {key}")
      
      step_4: |
        # Discovery Sprint ì‹¤í–‰
        â†’ 5-Agent ë³‘ë ¬ íƒìƒ‰
        â†’ ëª©í‘œ êµ¬ì²´í™”
        â†’ ë‹¤ìŒ ë‹¨ê³„ ê²°ì •
    
    context_used: "709 + 2,500 = 3,209ì¤„ (vs 6,102ì¤„, 47% ì ˆì•½)"

# ========================================
# ìì£¼ ì‚¬ìš©í•˜ëŠ” ë„êµ¬ í‚¤ (Quick Reference)
# ========================================

common_tool_keys:
  
  explorer:
    - "tool:explorer:pattern_search (RAG íŒ¨í„´ ê²€ìƒ‰)"
    - "tool:explorer:7_step_process (7ë‹¨ê³„ ê¸°íšŒ ë°œêµ´)"
    - "tool:explorer:validation_protocol (ê°€ì„¤ ê²€ì¦)"
    - "tool:explorer:hypothesis_generation (ê°€ì„¤ ìƒì„±)"
  
  quantifier:
    - "tool:quantifier:sam_4methods (SAM 4ê°€ì§€ ë°©ë²•)"
    - "tool:quantifier:growth_analysis (ì„±ì¥ë¥  ë¶„ì„)"
    - "tool:quantifier:scenario_planning (ì‹œë‚˜ë¦¬ì˜¤)"
    - "tool:quantifier:benchmark_analysis (ë²¤ì¹˜ë§ˆí¬)"
  
  validator:
    - "tool:validator:data_definition (ë°ì´í„° ì •ì˜ ê²€ì¦)"
    - "tool:validator:creative_sourcing (ì°½ì˜ì  ì†Œì‹±)"
    - "tool:validator:gap_analysis (Gap ë¶„ì„)"
    - "tool:validator:source_verification (ì¶œì²˜ ê²€ì¦)"
  
  observer:
    - "tool:observer:market_structure (ì‹œì¥ êµ¬ì¡°)"
    - "tool:observer:value_chain (ê°€ì¹˜ì‚¬ìŠ¬)"
    - "tool:observer:inefficiency_detection (ë¹„íš¨ìœ¨ ê°ì§€)"
    - "tool:observer:disruption_opportunity (íŒŒê´´ ê¸°íšŒ)"
  
  guardian:
    - "tool:guardian:progress_monitoring (ì§„í–‰ ëª¨ë‹ˆí„°ë§)"
    - "tool:guardian:quality_evaluation (í’ˆì§ˆ í‰ê°€)"
  
  framework:
    - "tool:framework:13_dimensions (13ì°¨ì› ì‹œì¥ ì •ì˜)"
    - "tool:framework:discovery_sprint (Discovery Sprint)"
    - "tool:framework:7_powers (7 Powers)"
    - "tool:framework:counter_positioning (Counter-Positioning)"
  
  universal:
    - "tool:universal:guestimation (ë¹ ë¥¸ ì¶”ì •)"
    - "tool:universal:domain_reasoner_10_signals (ì •ë°€ ë¶„ì„)"
    - "tool:universal:hybrid_strategy (í•˜ì´ë¸Œë¦¬ë“œ)"

# ========================================
# ë””ë²„ê¹… ëª…ë ¹ (System RAG ë¬¸ì œ ì‹œ)
# ========================================

debug_commands:
  
  check_collection:
    command: "python3 scripts/query_system_rag.py --stats"
    output: "Collection ìƒíƒœ, Agentë³„ ë„êµ¬ ìˆ˜"
  
  list_all_keys:
    command: "python3 scripts/query_system_rag.py --list"
    output: "ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  tool_key"
  
  rebuild_index:
    command: "python3 scripts/build_system_knowledge.py"
    when: "Collection ì—†ìŒ ë˜ëŠ” ì†ìƒ"
    duration: "1ë¶„"
  
  test_search:
    command: "python3 scripts/query_system_rag.py tool:explorer:pattern_search"
    purpose: "ê²€ìƒ‰ í…ŒìŠ¤íŠ¸"

# ========================================
# END
# ========================================

