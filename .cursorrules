# UMIS RAG Cursor Rules
# 
# ëª©ì : Cursorë§Œìœ¼ë¡œ UMIS ì‚¬ìš© + RAG ê°œë°œ ë³‘í–‰
# ì‚¬ìš©ì: ì½”ë”© ëª» í•˜ëŠ” ì‚¬ìš©ì
# í™˜ê²½: Cursor Composer + Agent ëª¨ë“œ
#
# ========================================

## ìë™ RAG ì¬êµ¬ì¶•

When user modifies these YAML files:
  - umis_business_model_patterns_v6.2.yaml
  - umis_disruption_patterns_v6.2.yaml
  - umis_ai_guide_v6.2.yaml

After saving, automatically suggest:
  "RAG ì¸ë±ìŠ¤ë¥¼ ì¬êµ¬ì¶•í• ê¹Œìš”? (2ì´ˆ ì†Œìš”)"
  
If user approves, run:
  ```bash
  cd /Users/kangmin/Documents/AI_dev/umis-main
  source venv/bin/activate
  python scripts/01_convert_yaml.py
  python scripts/02_build_index.py --agent steve
  ```
  
Show result: "âœ… RAG ì—…ë°ì´íŠ¸ ì™„ë£Œ!"

## UMIS ë¶„ì„ ì¤‘ ìë™ RAG í™œìš©

When Steve (Explorer) needs pattern matching:
  - Detect: "íŒ¨í„´ ë§¤ì¹­ í•„ìš”" or "íŠ¸ë¦¬ê±° ì‹œê·¸ë„ ë°œê²¬"
  - Automatically run:
    ```bash
    python scripts/query_rag.py pattern "{trigger_signals}"
    ```
  - Integrate results into analysis
  - Show: "ğŸ” RAG ê²€ìƒ‰: {pattern_id} ë°œê²¬!"

When Steve needs case studies:
  - Detect: "ìœ ì‚¬ ì‚¬ë¡€" or "ì„±ê³µ ì‚¬ë¡€"
  - Automatically run:
    ```bash
    python scripts/query_rag.py case "{industry}" --pattern {pattern_id}
    ```
  - Show results in analysis

## ë°ì´í„° ì¶”ê°€ ì›Œí¬í”Œë¡œìš°

When user says:
  - "ë°ì´í„° ì¶”ê°€", "ìˆ˜ì •í•´ì¤˜", "ë„£ì–´ì¤˜"
  
Action:
  1. Open relevant YAML file
  2. Find correct section (use pattern matching)
  3. Show suggested addition with diff
  4. On user approval:
     - Save file
     - Auto rebuild RAG
     - Confirm: "âœ… ì¶”ê°€ ë° RAG ë°˜ì˜ ì™„ë£Œ"

Example:
  User: "ì½”ì›¨ì´ì— í•´ì§€ìœ¨ 3-5% ì¶”ê°€"
  
  AI:
    - Opens: umis_business_model_patterns_v6.2.yaml
    - Finds: ì½”ì›¨ì´ section (line 348)
    - Suggests:
      ```yaml
      + churn_rate: "3-5%"
      ```
    - Saves + Rebuilds
    - "âœ… ì™„ë£Œ!"

## ë‹¨ì¶• ëª…ë ¹ì–´

User can say:
  - "rag ê²€ìƒ‰ {ì¿¼ë¦¬}" â†’ Run query_rag.py
  - "rag ì¬êµ¬ì¶•" â†’ Full rebuild
  - "rag í†µê³„" â†’ Show stats
  - "rag í…ŒìŠ¤íŠ¸" â†’ Run test search

Auto execute and show results.

## UMIS ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ì§€ì›

When doing UMIS analysis:
  1. Always use @umis_guidelines_v6.2.yaml
  2. Follow UMIS process (Albert â†’ Steve â†’ Bill â†’ Rachel)
  3. Use RAG when needed (automatic)
  4. Save improvements to YAML (automatic)
  
Maintain feedback loop:
  Analysis â†’ Discovery â†’ Addition â†’ Update â†’ Re-analysis

## íŒŒì¼ ê²½ë¡œ ìë™ ì²˜ë¦¬

Project root: /Users/kangmin/Documents/AI_dev/umis-main

When executing commands:
  - Auto cd to project root
  - Auto activate venv
  - Use relative paths from root

## ì—ëŸ¬ ì²˜ë¦¬

If RAG rebuild fails:
  - Show clear error message
  - Suggest: "ì¸ë±ìŠ¤ë¥¼ ì²˜ìŒë¶€í„° ì¬êµ¬ì¶•í• ê¹Œìš”?"
  - Provide recovery command

If YAML syntax error:
  - Point to exact line
  - Suggest fix
  - Validate before rebuild

## ì„±ëŠ¥ ìµœì í™”

- Cache query results (avoid duplicate searches)
- Batch multiple YAML changes (rebuild once)
- Show progress for long operations

## ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€

Instead of:
  "Executing python scripts/query_rag.py..."
  
Use:
  "ğŸ” RAGì—ì„œ íŒ¨í„´ ê²€ìƒ‰ ì¤‘..."
  "âœ… subscription_model ë°œê²¬!"
  "ğŸ’¾ YAML ì €ì¥ ë° RAG ì—…ë°ì´íŠ¸ ì¤‘... (2ì´ˆ)"
  "âœ… ì™„ë£Œ! ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤."

## í•œêµ­ì–´ ìš°ì„ 

- ëª¨ë“  ì‘ë‹µ í•œêµ­ì–´
- ê¸°ìˆ  ìš©ì–´ë„ ì‰½ê²Œ ì„¤ëª…
- ì‚¬ìš©ìê°€ ì½”ë”© ëª» í•´ë„ ì´í•´ ê°€ëŠ¥í•˜ê²Œ
