{
  "metadata": {
    "timestamp": "2025-11-23T17:36:16.861318",
    "test_type": "phase4_comprehensive_fewshot",
    "models": 14,
    "problems": 3,
    "total_tests": 6
  },
  "problems": {
    "phase4_korean_businesses": {
      "name": "Phase 4 - 한국 전체 사업자 수",
      "expected_value": 7837000,
      "expected_unit": "개"
    },
    "phase4_seoul_population": {
      "name": "Phase 4 - 서울시 인구",
      "expected_value": 9668465,
      "expected_unit": "명"
    },
    "phase4_coffee_shops": {
      "name": "Phase 4 - 한국 커피 전문점 수",
      "expected_value": 100000,
      "expected_unit": "개"
    }
  },
  "results": [
    {
      "model": "gpt-5-pro (Premium)",
      "value": 7650000,
      "unit": "개",
      "expected_value": 7837000,
      "accuracy": {
        "score": 25,
        "error_pct": 2.4
      },
      "calculation_connectivity": {
        "score": 30.0,
        "details": [
          "단계별 계산식: 15/15 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "❌ 계산 불일치: 마지막 2단계 합: 1,248,001 (오차 83.7%) (5점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 15
      },
      "logic": {
        "score": 5
      },
      "total_score": 75.0,
      "elapsed": 538.98,
      "response": {
        "value": 7650000,
        "unit": "개",
        "confidence": 0.55,
        "method": "bottom-up",
        "decomposition": [
          {
            "step": "1. 한국 인구",
            "value": 52000000,
            "calculation": "약 5200만으로 가정",
            "reasoning": "최근 한국 총인구 근사치"
          },
          {
            "step": "2. 경제활동참가율",
            "value": 0.62,
            "calculation": "(0.60 + 0.64) / 2 = 0.62",
            "reasoning": "한국 경제활동참가율 60~64% 범위 평균"
          },
          {
            "step": "3. 경제활동인구",
            "value": 32240000,
            "calculation": "step1 × step2 = 52000000 × 0.62 = 32240000",
            "reasoning": "인구 × 참가율"
          },
          {
            "step": "4. 고용률",
            "value": 0.95,
            "calculation": "1 - 실업률(0.05) = 0.95",
            "reasoning": "실업률 3~5% 수준 가정"
          },
          {
            "step": "5. 취업자 수",
            "value": 30628000,
            "calculation": "step3 × step4 = 32240000 × 0.95 = 30628000",
            "reasoning": "경제활동인구 × 고용률"
          },
          {
            "step": "6. 개인사업자 비중(취업자 중)",
            "value": 0.2,
            "calculation": "(0.15 + 0.25) / 2 = 0.20",
            "reasoning": "한국 자영업 비중 15~25% 범위 평균(법인 경영자는 제외하는 개인 위주 가정)"
          },
          {
            "step": "7. 개인사업자 수(사람)",
            "value": 6125600,
            "calculation": "step5 × step6 = 30628000 × 0.20 = 6125600",
            "reasoning": "취업자 중 개인사업자 추정"
          },
          {
            "step": "8. 개인사업자 등록률",
            "value": 0.95,
            "calculation": "(0.90 + 1.00) / 2 = 0.95",
            "reasoning": "등록 기반 경제로 등록률 90~100% 범위 평균"
          },
          {
            "step": "9. 등록된 개인사업자(사람)",
            "value": 5819320,
            "calculation": "step7 × step8 = 6125600 × 0.95 = 5819320",
            "reasoning": "개인사업자 중 세무상 등록자"
          },
          {
            "step": "10. 1인당 평균 사업자등록 수(개인)",
            "value": 1.1,
            "calculation": "1 × 0.9 + 2 × 0.1 = 1.1",
            "reasoning": "10%가 2개 등록 보유, 90%는 1개 보유 가정"
          },
          {
            "step": "11. 개인사업자 등록 수(건)",
            "value": 6401252,
            "calculation": "step9 × step10 = 5819320 × 1.1 = 6401252",
            "reasoning": "개인사업자 다중 등록 반영"
          },
          {
            "step": "12. 인구 1인당 법인 수",
            "value": 0.02,
            "calculation": "((15 + 25) / 2) / 1000 = 0.02",
            "reasoning": "선진국 법인 밀도 15~25개/천명 범위 평균"
          },
          {
            "step": "13. 법인 수(개)",
            "value": 1040000,
            "calculation": "step1 × step12 = 52000000 × 0.02 = 1040000",
            "reasoning": "인구 규모에 따른 법인 수"
          },
          {
            "step": "14. 법인당 평균 사업자등록 수",
            "value": 1.2,
            "calculation": "1 × 0.8 + 2 × 0.2 = 1.2",
            "reasoning": "법인의 20%가 다점포/지점 보유 가정"
          },
          {
            "step": "15. 법인 사업자 등록 수(건)",
            "value": 1248000,
            "calculation": "step13 × step14 = 1040000 × 1.2 = 1248000",
            "reasoning": "법인의 다중 사업자등록 반영"
          }
        ],
        "final_calculation": "step11 + step15 = 6401252 + 1248000 = 7649252 ≈ 7650000",
        "calculation_verification": "step3 = 52000000 × 0.62 = 32240000; step5 = 32240000 × 0.95 = 30628000; step7 = 30628000 × 0.20 = 6125600; step9 = 6125600 × 0.95 = 5819320; step11 = 5819320 × 1.10 = 6401252; step13 = 52000000 × 0.02 = 1040000; step15 = 1040000 × 1.20 = 1248000; 최종 = 6401252 + 1248000 = 7649252 → 반올림 7650000 ✓"
      },
      "problem": "Phase 4 - 한국 전체 사업자 수",
      "problem_id": "phase4_korean_businesses",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5.1 (Premium)",
      "value": 8300000,
      "unit": "개",
      "expected_value": 7837000,
      "accuracy": {
        "score": 25,
        "error_pct": 5.9
      },
      "calculation_connectivity": {
        "score": 30.0,
        "details": [
          "단계별 계산식: 10/10 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "❌ 계산 불일치: 마지막 2단계 합: 4,363,008 (오차 47.4%) (5점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 10
      },
      "logic": {
        "score": 5
      },
      "total_score": 75.0,
      "elapsed": 67.38,
      "response": {
        "value": 8300000,
        "unit": "개",
        "confidence": 0.5,
        "method": "bottom-up",
        "decomposition": [
          {
            "step": "1. 한국 인구 추정",
            "value": 52000000,
            "calculation": "한국 인구를 약 5200만명으로 가정",
            "reasoning": "최근 한국 인구 통계를 반영한 대략치"
          },
          {
            "step": "2. 경제활동인구 수",
            "value": 31200000,
            "calculation": "52000000 × 0.6 = 31200000",
            "reasoning": "전체 인구 중 약 60%가 경제활동인구라고 가정"
          },
          {
            "step": "3. 취업자 수",
            "value": 29640000,
            "calculation": "31200000 × 0.95 = 29640000",
            "reasoning": "경제활동인구 중 약 95%가 실제 취업 상태라고 가정"
          },
          {
            "step": "4. 자영업자(고용주 포함) 인원",
            "value": 5928000,
            "calculation": "29640000 × 0.2 = 5928000",
            "reasoning": "취업자 중 약 20%가 자영업자(고용주 포함)라고 가정"
          },
          {
            "step": "5. 사업자등록이 필요한 자영업자 인원",
            "value": 5335200,
            "calculation": "5928000 × 0.9 = 5335200",
            "reasoning": "자영업자의 약 90%는 세무상 사업자등록이 필요하다고 가정"
          },
          {
            "step": "6. 자영업자 기준 사업자등록 수",
            "value": 5868720,
            "calculation": "5335200 × 1.1 = 5868720",
            "reasoning": "자영업자 중 일부는 복수 사업장을 운영하므로 1인당 평균 1.1개 사업자등록으로 가정"
          },
          {
            "step": "7. 임금근로자 수",
            "value": 23712000,
            "calculation": "29640000 × 0.8 = 23712000",
            "reasoning": "취업자 중 자영업자를 제외한 80%를 임금근로자로 가정"
          },
          {
            "step": "8. 직원이 있는 법인 수(기본)",
            "value": 1580800,
            "calculation": "23712000 / 15 = 1580800",
            "reasoning": "직원 있는 법인의 평균 종업원 수를 15명으로 가정하여 역산"
          },
          {
            "step": "9. 무급/1인 법인 등을 포함한 전체 법인 수",
            "value": 1896960,
            "calculation": "1580800 × 1.2 = 1896960",
            "reasoning": "직원 거의 없는 1인 법인·지주회사 등을 감안해 20%를 추가"
          },
          {
            "step": "10. 법인 기준 사업자등록 수",
            "value": 2466048,
            "calculation": "1896960 × 1.3 = 2466048",
            "reasoning": "체인점·지점 등으로 한 법인이 여러 사업자등록을 가질 수 있어 평균 1.3개로 가정"
          }
        ],
        "final_calculation": "step6 + step10 = 5868720 + 2466048 = 8334768 ≈ 8300000",
        "calculation_verification": "자영업자 기반 사업자등록(step6) 5868720개와 법인 기반 사업자등록(step10) 2466048개를 합하면 5868720 + 2466048 = 8334768개로 계산됨 ✓"
      },
      "problem": "Phase 4 - 한국 전체 사업자 수",
      "problem_id": "phase4_korean_businesses",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5-pro (Premium)",
      "value": 9400000,
      "unit": "명",
      "expected_value": 9668465,
      "accuracy": {
        "score": 25,
        "error_pct": 2.9
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 4/4 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 9,435,000 (오차 0.4%) (25점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 4
      },
      "logic": {
        "score": 5
      },
      "total_score": 95.0,
      "elapsed": 215.0,
      "response": {
        "value": 9400000,
        "unit": "명",
        "confidence": 0.65,
        "method": "top-down",
        "decomposition": [
          {
            "step": "1. 한국 전체 인구",
            "value": 51000000,
            "calculation": "약 5100만명으로 가정",
            "reasoning": "최근 한국 인구 정체 구간"
          },
          {
            "step": "2. 수도권 인구",
            "value": 25500000,
            "calculation": "step1 × 0.5 = 51000000 × 0.5 = 25500000",
            "reasoning": "대한민국 인구의 약 절반이 수도권 거주 가정"
          },
          {
            "step": "3. 수도권 내 서울 비중",
            "value": 0.37,
            "calculation": "수도권(서울·경기·인천) 중 서울 약 35~40% → 0.37 가정",
            "reasoning": "지자체별 인구 분포 특성"
          },
          {
            "step": "4. 서울 인구 추정",
            "value": 9435000,
            "calculation": "step2 × step3 = 25500000 × 0.37 = 9435000",
            "reasoning": "step2 × step3"
          }
        ],
        "final_calculation": "step2 × step3 = 25500000 × 0.37 = 9435000 ≈ 9400000",
        "calculation_verification": "한국인구(51000000) × 수도권비중(0.5) × 서울비중(0.37) = 9435000 ✓"
      },
      "problem": "Phase 4 - 서울시 인구",
      "problem_id": "phase4_seoul_population",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5.1 (Premium)",
      "value": 10000000,
      "unit": "명",
      "expected_value": 9668465,
      "accuracy": {
        "score": 25,
        "error_pct": 3.4
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 4/4 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 10,000,000 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 4
      },
      "logic": {
        "score": 5
      },
      "total_score": 95.0,
      "elapsed": 49.16,
      "response": {
        "value": 10000000,
        "unit": "명",
        "confidence": 0.6,
        "method": "top-down",
        "decomposition": [
          {
            "step": "1. 대한민국 전체 인구",
            "value": 50000000,
            "calculation": "대한민국 전체 인구를 약 5천만 명으로 가정",
            "reasoning": "최근 통계를 대략적으로 반올림해 사용"
          },
          {
            "step": "2. 수도권(서울·경기·인천) 인구 비중",
            "value": 0.5,
            "calculation": "국민 2명 중 1명이 수도권에 산다고 보고 비중을 1/2 = 0.5로 설정",
            "reasoning": "수도권 과밀을 감안해 전체 인구의 절반이 수도권에 거주한다고 가정"
          },
          {
            "step": "3. 수도권 내 서울 인구 비중",
            "value": 0.4,
            "calculation": "수도권 3대 권역(서울, 경기, 인천) 중 서울 비중을 40%로 가정 → 0.4",
            "reasoning": "경기 인구가 더 많고 인천까지 포함되므로 서울 비중을 약 40%로 설정"
          },
          {
            "step": "4. 서울 인구 추정치",
            "value": 10000000,
            "calculation": "step1 × step2 × step3 = 50000000 × 0.5 × 0.4 = 10000000",
            "reasoning": "전국 인구에 수도권 비중과 수도권 내 서울 비중을 곱해 서울 인구를 추정"
          }
        ],
        "final_calculation": "step1 × step2 × step3 = 50000000 × 0.5 × 0.4 = 10000000",
        "calculation_verification": "대한민국 인구(5000만) × 수도권 비중(0.5) × 서울 비중(0.4) = 1000만 ✓"
      },
      "problem": "Phase 4 - 서울시 인구",
      "problem_id": "phase4_seoul_population",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5-pro (Premium)",
      "value": 100000,
      "unit": "",
      "expected_value": 100000,
      "accuracy": {
        "score": 25,
        "error_pct": 0.0
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 5/5 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 100,000 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 5.0,
        "count": 5
      },
      "logic": {
        "score": 0
      },
      "total_score": 80.0,
      "elapsed": 264.62,
      "response": {
        "value": 100000,
        "decomposition": [
          {
            "step": "1. 커피 소비 인구",
            "value": 40000000,
            "calculation": "5천만 × 0.8(성인·이용자 비중)"
          },
          {
            "step": "2. 1인당 월 이용횟수",
            "value": 6,
            "calculation": "주 1~2회 ≈ 6회/월"
          },
          {
            "step": "3. 월 총 방문수",
            "value": 240000000,
            "calculation": "step1 × step2"
          },
          {
            "step": "4. 점포당 월 처리 고객수",
            "value": 2400,
            "calculation": "100잔/일 × 30일 × 0.8(경쟁·상권 중복 가동률)"
          },
          {
            "step": "5. 점포 수",
            "value": 100000,
            "calculation": "step3 / step4"
          }
        ],
        "final_calculation": "step3 / step4 = 2억4천만 / 2400 = 100000",
        "calculation_verification": "계산 확인 완료 ✓"
      },
      "problem": "Phase 4 - 한국 커피 전문점 수",
      "problem_id": "phase4_coffee_shops",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5.1 (Premium)",
      "value": 50000,
      "unit": "",
      "expected_value": 100000,
      "accuracy": {
        "score": 10,
        "error_pct": 100.0
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 8/8 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 50,000 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 5.0,
        "count": 8
      },
      "logic": {
        "score": 0
      },
      "total_score": 65.0,
      "elapsed": 26.23,
      "response": {
        "value": 50000,
        "decomposition": [
          {
            "step": "1. 인구",
            "value": 50000000,
            "calculation": "한국 인구 약 5000만"
          },
          {
            "step": "2. 커피 소비 인구",
            "value": 30000000,
            "calculation": "성인 및 커피 선호층 60% × step1 = 0.6 × 5000만"
          },
          {
            "step": "3. 1인당 월 카페 방문수",
            "value": 4,
            "calculation": "주 1회 방문 가정 → 월 4회"
          },
          {
            "step": "4. 월 총 카페 방문수",
            "value": 120000000,
            "calculation": "step2 × step3 = 3000만 × 4"
          },
          {
            "step": "5. 점포당 월 고객 수",
            "value": 3000,
            "calculation": "하루 100명 × 30일"
          },
          {
            "step": "6. 수요 기반 점포 수",
            "value": 40000,
            "calculation": "step4 / step5 = 1.2억 / 3000"
          },
          {
            "step": "7. 경쟁·상권 중복 보정 계수",
            "value": 1.3,
            "calculation": "과밀 출점 및 중복 상권 고려해 30% 추가"
          },
          {
            "step": "8. 최종 점포 수",
            "value": 50000,
            "calculation": "step6 × step7 ≈ 40000 × 1.3 ≈ 50000"
          }
        ],
        "final_calculation": "step6 × step7 ≈ 40000 × 1.3 ≈ 50000",
        "calculation_verification": "계산 확인 완료 ✓"
      },
      "problem": "Phase 4 - 한국 커피 전문점 수",
      "problem_id": "phase4_coffee_shops",
      "tier": "Premium",
      "reasoning_effort": "high"
    }
  ],
  "summary": [
    {
      "model": "gpt-5-pro (Premium)",
      "avg_total": 83.33333333333333,
      "avg_accuracy": 25.0,
      "avg_connectivity": 43.333333333333336,
      "avg_decomp": 11.666666666666666,
      "avg_logic": 3.3333333333333335,
      "count": 3
    },
    {
      "model": "gpt-5.1 (Premium)",
      "avg_total": 78.33333333333333,
      "avg_accuracy": 20.0,
      "avg_connectivity": 43.333333333333336,
      "avg_decomp": 11.666666666666666,
      "avg_logic": 3.3333333333333335,
      "count": 3
    }
  ]
}