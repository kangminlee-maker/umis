{
  "metadata": {
    "timestamp": "2025-11-23T17:31:27.589990",
    "test_type": "phase4_comprehensive_fewshot",
    "models": 14,
    "problems": 3,
    "total_tests": 6
  },
  "problems": {
    "phase4_korean_businesses": {
      "name": "Phase 4 - 한국 전체 사업자 수",
      "expected_value": 7837000,
      "expected_unit": "개"
    },
    "phase4_seoul_population": {
      "name": "Phase 4 - 서울시 인구",
      "expected_value": 9668465,
      "expected_unit": "명"
    },
    "phase4_coffee_shops": {
      "name": "Phase 4 - 한국 커피 전문점 수",
      "expected_value": 100000,
      "expected_unit": "개"
    }
  },
  "results": [
    {
      "model": "gpt-5-pro (Premium)",
      "value": 7410000,
      "unit": "개",
      "expected_value": 7837000,
      "accuracy": {
        "score": 25,
        "error_pct": 5.8
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 14/14 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 7,410,000 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 14
      },
      "logic": {
        "score": 5
      },
      "total_score": 95.0,
      "elapsed": 1748.38,
      "response": {
        "value": 7410000,
        "unit": "개",
        "confidence": 0.55,
        "method": "bottom-up",
        "decomposition": [
          {
            "step": "1. 한국 인구",
            "value": 52000000,
            "calculation": "가정",
            "reasoning": "약 5,200만명 가정"
          },
          {
            "step": "2. 경제활동인구",
            "value": 31200000,
            "calculation": "step1 × 0.6 = 52000000 × 0.6",
            "reasoning": "경제활동참가율 약 60% 가정"
          },
          {
            "step": "3. 취업자 수",
            "value": 29640000,
            "calculation": "step2 × 0.95 = 31200000 × 0.95",
            "reasoning": "고용률 약 95% 가정"
          },
          {
            "step": "4. 자영업자 수",
            "value": 5928000,
            "calculation": "step3 × 0.2 = 29640000 × 0.2",
            "reasoning": "자영업자 비중 약 20% 가정"
          },
          {
            "step": "5. 자영업자 중 고용주 수",
            "value": 1482000,
            "calculation": "step4 × 0.25 = 5928000 × 0.25",
            "reasoning": "자영업자 중 고용주 약 25% 가정"
          },
          {
            "step": "6. 자영업자 사업장 종사자 수",
            "value": 4446000,
            "calculation": "step5 × 3 = 1482000 × 3",
            "reasoning": "소규모 사업장 평균 직원 3명 가정"
          },
          {
            "step": "7. 임금근로자 수",
            "value": 23712000,
            "calculation": "step3 - step4 = 29640000 - 5928000",
            "reasoning": "임금근로자 = 취업자 - 자영업자"
          },
          {
            "step": "8. 법인에서 일하는 임금근로자 수",
            "value": 19266000,
            "calculation": "step7 - step6 = 23712000 - 4446000",
            "reasoning": "자영업자 사업장 고용을 제외한 임금근로자"
          },
          {
            "step": "9. 법인 1곳당 평균 종사자 수",
            "value": 15,
            "calculation": "가정",
            "reasoning": "중소·영세법인 다수 가정"
          },
          {
            "step": "10. 법인 수",
            "value": 1284400,
            "calculation": "step8 / step9 = 19266000 / 15",
            "reasoning": "법인 종사자 ÷ 법인당 평균 종사자"
          },
          {
            "step": "11. 자영업자 등록자 수",
            "value": 5335200,
            "calculation": "step4 × 0.9 = 5928000 × 0.9",
            "reasoning": "자영업자 등록률 90% 가정"
          },
          {
            "step": "12. 자영업자 등록 수",
            "value": 5868720,
            "calculation": "step11 × 1.1 = 5335200 × 1.1",
            "reasoning": "1인 평균 등록 1.1개(다중등록 반영) 가정"
          },
          {
            "step": "13. 법인 등록 수",
            "value": 1541280,
            "calculation": "step10 × 1.2 = 1284400 × 1.2",
            "reasoning": "법인당 평균 등록 1.2개(지점·종사업장) 가정"
          },
          {
            "step": "14. 총 사업자 수",
            "value": 7410000,
            "calculation": "step12 + step13 = 5868720 + 1541280",
            "reasoning": "자영업자 등록 수 + 법인 등록 수"
          }
        ],
        "final_calculation": "step12 + step13 = 5868720 + 1541280 = 7410000",
        "calculation_verification": "5868720 + 1541280 = 7410000 ✓"
      },
      "problem": "Phase 4 - 한국 전체 사업자 수",
      "problem_id": "phase4_korean_businesses",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5.1 (Premium)",
      "value": 8654880,
      "unit": "개",
      "expected_value": 7837000,
      "accuracy": {
        "score": 25,
        "error_pct": 10.4
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 11/11 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 8,654,880 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 11
      },
      "logic": {
        "score": 5
      },
      "total_score": 95.0,
      "elapsed": 60.57,
      "response": {
        "value": 8654880,
        "unit": "개",
        "confidence": 0.4,
        "method": "bottom-up",
        "decomposition": [
          {
            "step": "1. 한국 인구 추정",
            "value": 52000000,
            "calculation": "약 5200만명으로 가정",
            "reasoning": "최근 한국 인구를 대략 5200만명 수준으로 가정"
          },
          {
            "step": "2. 경제활동인구 추정",
            "value": 31200000,
            "calculation": "52000000 × 0.6 = 31200000",
            "reasoning": "전체 인구의 약 60%가 경제활동인구라고 가정"
          },
          {
            "step": "3. 취업자 수 추정",
            "value": 29640000,
            "calculation": "31200000 × 0.95 = 29640000",
            "reasoning": "경제활동인구 중 약 95%가 실제 취업 상태라고 가정"
          },
          {
            "step": "4. 자영업자 수 추정",
            "value": 7410000,
            "calculation": "29640000 × 0.25 = 7410000",
            "reasoning": "취업자 중 약 25%가 자영업자(고용원 유무 불문)라고 가정"
          },
          {
            "step": "5. 사업자등록을 한 자영업자 수",
            "value": 5928000,
            "calculation": "7410000 × 0.8 = 5928000",
            "reasoning": "자영업자의 약 80%가 국세청에 사업자등록을 했다고 가정(농어업·노점 등 일부는 미등록)"
          },
          {
            "step": "6. 자영업자 사업자등록 수(다중 사업장 포함)",
            "value": 6520800,
            "calculation": "5928000 × 1.1 = 6520800",
            "reasoning": "자영업자 중 일부는 여러 개의 사업장을 운영하므로 1인당 평균 1.1개 사업자등록으로 가정"
          },
          {
            "step": "7. 임금근로자 수 추정",
            "value": 22230000,
            "calculation": "29640000 - 7410000 = 22230000",
            "reasoning": "전체 취업자에서 자영업자를 뺀 인원은 임금근로자로 가정"
          },
          {
            "step": "8. 법인에 고용된 임금근로자 수",
            "value": 17784000,
            "calculation": "22230000 × 0.8 = 17784000",
            "reasoning": "임금근로자의 약 80%가 법인 형태의 사업체에 고용되어 있다고 가정(나머지는 개인사업장 고용)"
          },
          {
            "step": "9. 법인 수(직원이 있는 법인 기준)",
            "value": 1778400,
            "calculation": "17784000 / 10 = 1778400",
            "reasoning": "법인 1개당 평균 임금근로자 수를 10명으로 가정(소규모 법인이 많음을 반영한 값)"
          },
          {
            "step": "10. 법인 사업자등록 수(다중 사업장 포함)",
            "value": 2134080,
            "calculation": "1778400 × 1.2 = 2134080",
            "reasoning": "법인 1개당 평균 1.2개의 사업장을 운영해 각각 사업자등록이 되어 있다고 가정(본점 + 일부 지점)"
          },
          {
            "step": "11. 한국 전체 사업자등록 수 추정",
            "value": 8654880,
            "calculation": "6520800 + 2134080 = 8654880",
            "reasoning": "개인(자영업) 사업자등록 수와 법인 사업자등록 수를 합산"
          }
        ],
        "final_calculation": "step6 + step10 = 6520800 + 2134080 = 8654880",
        "calculation_verification": "6520800 + 2134080 = 8654880로, step11의 값과 일치함 ✓"
      },
      "problem": "Phase 4 - 한국 전체 사업자 수",
      "problem_id": "phase4_korean_businesses",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5-pro (Premium)",
      "value": 9435000,
      "unit": "명",
      "expected_value": 9668465,
      "accuracy": {
        "score": 25,
        "error_pct": 2.5
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 5/5 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 9,435,000 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 5
      },
      "logic": {
        "score": 5
      },
      "total_score": 95.0,
      "elapsed": 166.16,
      "response": {
        "value": 9435000,
        "unit": "명",
        "confidence": 0.65,
        "method": "top-down",
        "decomposition": [
          {
            "step": "1. 한국 전체 인구",
            "value": 51000000,
            "calculation": "약 5100만명으로 가정",
            "reasoning": "최근 한국 인구 규모"
          },
          {
            "step": "2. 수도권 비중",
            "value": 0.5,
            "calculation": "전체의 약 50%로 가정",
            "reasoning": "수도권 인구 집중도"
          },
          {
            "step": "3. 수도권 인구",
            "value": 25500000,
            "calculation": "51000000 × 0.5 = 25500000",
            "reasoning": "step1 × step2"
          },
          {
            "step": "4. 수도권 내 서울 비중",
            "value": 0.37,
            "calculation": "수도권 내 서울 35~38%로 가정 → 0.37",
            "reasoning": "서울·경기·인천 구성 비중"
          },
          {
            "step": "5. 서울 인구(추정)",
            "value": 9435000,
            "calculation": "25500000 × 0.37 = 9435000",
            "reasoning": "step3 × step4"
          }
        ],
        "final_calculation": "step1 × step2 × step4 = 51000000 × 0.5 × 0.37 = 9435000",
        "calculation_verification": "한국 인구(5100만) × 수도권 비중(0.5) × 서울 비중(0.37) = 943만5천 ✓"
      },
      "problem": "Phase 4 - 서울시 인구",
      "problem_id": "phase4_seoul_population",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5.1 (Premium)",
      "value": 10000000,
      "unit": "명",
      "expected_value": 9668465,
      "accuracy": {
        "score": 25,
        "error_pct": 3.4
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 5/5 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 10,000,000 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 15,
        "count": 5
      },
      "logic": {
        "score": 5
      },
      "total_score": 95.0,
      "elapsed": 24.05,
      "response": {
        "value": 10000000,
        "unit": "명",
        "confidence": 0.7,
        "method": "top-down",
        "decomposition": [
          {
            "step": "1. 한국 전체 인구",
            "value": 50000000,
            "calculation": "약 5000만명으로 가정",
            "reasoning": "최근 한국 인구는 약 5,000만명 수준"
          },
          {
            "step": "2. 수도권 인구 비중",
            "value": 0.5,
            "calculation": "수도권(서울·경기·인천)에 전체 인구의 약 50% 거주로 가정",
            "reasoning": "수도권 집중 현상 고려"
          },
          {
            "step": "3. 수도권 인구",
            "value": 25000000,
            "calculation": "50000000 × 0.5 = 25000000",
            "reasoning": "step1 × step2"
          },
          {
            "step": "4. 수도권 내 서울 인구 비중",
            "value": 0.4,
            "calculation": "수도권 인구의 약 40%가 서울 거주로 가정",
            "reasoning": "경기·인천 포함 시 서울 비중을 대략 40%로 추정"
          },
          {
            "step": "5. 서울 인구",
            "value": 10000000,
            "calculation": "25000000 × 0.4 = 10000000",
            "reasoning": "step3 × step4"
          }
        ],
        "final_calculation": "step3 × step4 = 25000000 × 0.4 = 10000000",
        "calculation_verification": "한국 인구(5000만) × 수도권 비중(0.5) × 서울 비중(0.4) = 1000만 ✓"
      },
      "problem": "Phase 4 - 서울시 인구",
      "problem_id": "phase4_seoul_population",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5-pro (Premium)",
      "value": 109000,
      "unit": "",
      "expected_value": 100000,
      "accuracy": {
        "score": 25,
        "error_pct": 9.0
      },
      "calculation_connectivity": {
        "score": 30.0,
        "details": [
          "단계별 계산식: 5/5 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "❌ 계산 불일치: 마지막 2단계 합: 42,001 (오차 61.5%) (5점)"
        ]
      },
      "decomposition": {
        "score": 5.0,
        "count": 5
      },
      "logic": {
        "score": 0
      },
      "total_score": 60.0,
      "elapsed": 222.44,
      "response": {
        "value": 109000,
        "decomposition": [
          {
            "step": "1. 커피 소비 인구",
            "value": 32000000,
            "calculation": "인구 5100만 × 성인비 0.8 × 소비비중 0.78 ≈ 3200만"
          },
          {
            "step": "2. 1인당 연간 카페 구매량(잔)",
            "value": 130,
            "calculation": "주 2.5회 × 52주 ≈ 130잔"
          },
          {
            "step": "3. 연간 총 카페 커피 수요(잔)",
            "value": 4160000000,
            "calculation": "step1 × step2"
          },
          {
            "step": "4. 점포당 연간 판매량(잔)",
            "value": 42000,
            "calculation": "일 140잔 × 300일"
          },
          {
            "step": "5. 경쟁/상권 중복계수",
            "value": 1.1,
            "calculation": "브랜드 경쟁·중복으로 점포 수 10% 증가 가정"
          }
        ],
        "final_calculation": "step3 / step4 × step5 = 4,160,000,000 / 42,000 × 1.1 ≈ 109,000",
        "calculation_verification": "계산 확인 완료 ✓"
      },
      "problem": "Phase 4 - 한국 커피 전문점 수",
      "problem_id": "phase4_coffee_shops",
      "tier": "Premium",
      "reasoning_effort": "high"
    },
    {
      "model": "gpt-5.1 (Premium)",
      "value": 70000,
      "unit": "",
      "expected_value": 100000,
      "accuracy": {
        "score": 15,
        "error_pct": 42.9
      },
      "calculation_connectivity": {
        "score": 50.0,
        "details": [
          "단계별 계산식: 7/7 (10점)",
          "✅ 최종 계산식 제공 (10점)",
          "✅ 계산 검증 제공 (5점)",
          "✅ 계산 완벽 일치: 마지막 단계: 70,000 (오차 0.0%) (25점)"
        ]
      },
      "decomposition": {
        "score": 5.0,
        "count": 7
      },
      "logic": {
        "score": 0
      },
      "total_score": 70.0,
      "elapsed": 60.28,
      "response": {
        "value": 70000,
        "decomposition": [
          {
            "step": "1. 한국 인구",
            "value": 50000000,
            "calculation": "5천만"
          },
          {
            "step": "2. 커피 전문점 이용 비율",
            "value": 0.7,
            "calculation": "커피 전문점을 정기적으로 이용하는 인구 비율 70% 가정"
          },
          {
            "step": "3. 커피 소비 인구",
            "value": 35000000,
            "calculation": "step1 × step2 = 50000000 × 0.7"
          },
          {
            "step": "4. 1인당 하루 커피 전문점 방문 횟수",
            "value": 0.2,
            "calculation": "평균적으로 5일에 1번 방문 → 0.2회/일"
          },
          {
            "step": "5. 하루 총 방문 횟수",
            "value": 7000000,
            "calculation": "step3 × step4 = 35000000 × 0.2"
          },
          {
            "step": "6. 점포당 하루 고객 수",
            "value": 100,
            "calculation": "브랜드 경쟁·상권 중복을 감안해 점포당 하루 평균 100명 방문 가정"
          },
          {
            "step": "7. 커피 전문점 수",
            "value": 70000,
            "calculation": "step5 / step6 = 7000000 / 100"
          }
        ],
        "final_calculation": "step5 / step6 = 7000000 / 100 = 70000",
        "calculation_verification": "계산 확인 완료 ✓"
      },
      "problem": "Phase 4 - 한국 커피 전문점 수",
      "problem_id": "phase4_coffee_shops",
      "tier": "Premium",
      "reasoning_effort": "high"
    }
  ],
  "summary": [
    {
      "model": "gpt-5.1 (Premium)",
      "avg_total": 86.66666666666667,
      "avg_accuracy": 21.666666666666668,
      "avg_connectivity": 50.0,
      "avg_decomp": 11.666666666666666,
      "avg_logic": 3.3333333333333335,
      "count": 3
    },
    {
      "model": "gpt-5-pro (Premium)",
      "avg_total": 83.33333333333333,
      "avg_accuracy": 25.0,
      "avg_connectivity": 43.333333333333336,
      "avg_decomp": 11.666666666666666,
      "avg_logic": 3.3333333333333335,
      "count": 3
    }
  ]
}