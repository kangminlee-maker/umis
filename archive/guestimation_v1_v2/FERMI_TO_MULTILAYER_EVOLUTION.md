# Fermi â†’ Multi-Layer Guestimation ì§„í™”

**ì‘ì„±ì¼**: 2025-11-05  
**ëª©ì **: ê³¼ê±° Fermi ë°©ë²•ë¡ ê³¼ í˜„ì¬ Multi-Layer êµ¬í˜„ ë¹„êµ

---

## ğŸ“ ê³¼ê±°: Fermi Estimation (v7.2.0, 2025-11-04)

**ë¬¸ì„œ**: `docs/GUESTIMATION_FRAMEWORK.md` (831ì¤„)

### Fermi 4ì›ì¹™

1. **ëª¨í˜• ë§Œë“¤ê¸°** (Model)
   - ì¶”ìƒì  ë¬¸ì œ â†’ ê³„ì‚° ê°€ëŠ¥ ëª¨í˜•
   - ì˜ˆ: ì‹œì¥ = ê³ ê° Ã— êµ¬ë§¤ì•¡

2. **ë¶„í•´** (Decomposition)
   - í° ë¬¸ì œ â†’ ì‘ì€ ìš”ì†Œë“¤
   - ì˜ˆ: 1ì¸ë‹¹ ì§€ì¶œ = êµí†µ + ì‹ë¹„ + ìˆ™ë°•

3. **ì œì•½ì¡°ê±´** (Constraint)
   - ë¬¼ë¦¬ì /ì‹œê°„ì  í•œê³„
   - ì˜ˆ: í•˜ë£¨ 24ì‹œê°„, 1ë¼ 30ë¶„

4. **ìë¦¿ìˆ˜** (Order of Magnitude)
   - ì •í™•í•œ ê°’ë³´ë‹¤ ê·œëª¨
   - ì˜ˆ: 500ì–µ? 5,000ì–µ?

### 8ê°€ì§€ ë°ì´í„° ì¶œì²˜

```yaml
ì¶œì²˜ 1: í”„ë¡œì íŠ¸ ë°ì´í„° (í™•ì • ì‚¬ì‹¤)
ì¶œì²˜ 2: LLM ì§ì ‘ ë‹µë³€ (ê°„ë‹¨í•œ ì‚¬ì‹¤)
ì¶œì²˜ 3: ê²€ìƒ‰ ì—”ì§„ ê³µí†µ ë§¥ë½ (ì›¹ ì„œì¹˜) â­
ì¶œì²˜ 4: ë²•ì¹™ (ë¬¼ë¦¬/ë²•ë¥ )
ì¶œì²˜ 5: í–‰ë™ê²½ì œí•™ (Loss Aversion ë“±)
ì¶œì²˜ 6: í†µê³„ íŒ¨í„´ (íŒŒë ˆí† , ì •ê·œë¶„í¬)
ì¶œì²˜ 7: Rule of Thumb (RAG ë²¤ì¹˜ë§ˆí¬) â­
ì¶œì²˜ 8: ì‹œê³µê°„ ì œì•½ (ì ˆëŒ€ í•œê³„)
```

### 3ê°€ì§€ ì¶”ì • ë°©ë²•

1. **Benchmark-based**: ìœ ì‚¬ ì‚¬ë¡€ ì°¾ê¸°
   - RAG ê²€ìƒ‰ â†’ ë¹„êµ ê°€ëŠ¥ì„± ê²€ì¦ (4ëŒ€ ê¸°ì¤€)
   
2. **Decomposition-based**: ë¬¸ì œ ë¶„í•´
   - Fermi í•µì‹¬!
   - A = B Ã— C Ã— D í˜•íƒœ

3. **Constraint-based**: ì œì•½ì¡°ê±´ í™œìš©
   - ë¬¼ë¦¬ì  í•œê³„, ì‹œê°„ ì œì•½

### Fermi 8ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤

```
Step 1: ë¬¸ì œ ëª…í™•í™”
Step 2: ëª¨í˜• ë§Œë“¤ê¸° â­ (Fermi í•µì‹¬!)
Step 3: ë¶„í•´
Step 4: ê³„ì‚°
Step 4.5: Benchmark ë¹„êµ ê²€ì¦ (ì‚¬ìš© ì‹œ)
Step 5: ë¹„ìœ¨ ì¡°ì •
Step 6: Boundary ê²€ì¦
Step 7: ê²€ì¦
Step 8: ì‹ ë¢°ë„ í‰ê°€
```

---

## ğŸŒŸ í˜„ì¬: Multi-Layer Guestimation (v7.2.1, 2025-11-05)

**íŒŒì¼**: `umis_rag/utils/multilayer_guestimation.py` (1,030ì¤„)

### 8-Layer Fallback êµ¬ì¡°

**ì›ë¦¬**: **8ê°€ì§€ ë°ì´í„° ì¶œì²˜ë¥¼ ê³„ì¸µí™”í•˜ì—¬ ìˆœì°¨ ì‹œë„**

```
Layer 1: í”„ë¡œì íŠ¸ ë°ì´í„°      â† ì¶œì²˜ 1
  â†“ ì—†ìŒ
Layer 2: LLM ì§ì ‘ ë‹µë³€        â† ì¶œì²˜ 2
  â†“ ì‹¤íŒ¨
Layer 3: ì›¹ ê²€ìƒ‰ ê³µí†µ ë§¥ë½    â† ì¶œì²˜ 3
  â†“ ì‹¤íŒ¨
Layer 4: ë²•ì¹™ (ë¬¼ë¦¬/ë²•ë¥ )     â† ì¶œì²˜ 4
  â†“ ì—†ìŒ
Layer 5: í–‰ë™ê²½ì œí•™           â† ì¶œì²˜ 5
  â†“ ì—†ìŒ
Layer 6: í†µê³„ íŒ¨í„´            â† ì¶œì²˜ 6
  â†“ ì—†ìŒ
Layer 7: RAG ë²¤ì¹˜ë§ˆí¬         â† ì¶œì²˜ 7
  â†“ ê¸°ê°
Layer 8: ì œì•½ì¡°ê±´             â† ì¶œì²˜ 8
  â†“ ì—†ìŒ
ì¶”ì • ì‹¤íŒ¨
```

### ìë™í™”

**í•µì‹¬ ì°¨ì´**: Fermi 8ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤ë¥¼ **ìë™í™”**!

```python
# Before (Fermi ìˆ˜ë™):
# 1. ì‚¬ìš©ìê°€ 8ë‹¨ê³„ ì§ì ‘ ìˆ˜í–‰
# 2. ì¶œì²˜ 1-8 ì¤‘ ì„ íƒ
# 3. ìˆ˜ë™ìœ¼ë¡œ ê³„ì‚°

# After (Multi-Layer ìë™):
estimator = MultiLayerGuestimation()
result = estimator.estimate("í•œêµ­ ì¸êµ¬ëŠ”?")
# â†’ ìë™ìœ¼ë¡œ 8ê°œ ë ˆì´ì–´ ìˆœì°¨ ì‹œë„
# â†’ ìµœì  ì¶œì²˜ì—ì„œ ê°’ ë°˜í™˜
```

---

## ğŸ“Š ë¹„êµ: Fermi vs Multi-Layer

| í•­ëª© | Fermi (v7.2.0) | Multi-Layer (v7.2.1) |
|------|---------------|---------------------|
| **êµ¬ì¡°** | 8ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤ | 8-Layer Fallback |
| **ì‹¤í–‰** | ì‚¬ìš©ì ìˆ˜ë™ | ìë™ ì‹œë„ |
| **ì¶œì²˜** | 8ê°€ì§€ ì •ì˜ë§Œ | 8ê°œ ë ˆì´ì–´ë¡œ êµ¬í˜„ |
| **ë¹„êµ ê²€ì¦** | Step 4.5 ìˆ˜ë™ | Layer 7 ìë™ |
| **ì„¤ì •** | ë¬¸ì„œë§Œ | .env + YAML |
| **ì¶”ì ì„±** | ë¬¸ì„œí™” | logic_steps ìë™ ê¸°ë¡ |

---

## ğŸ”„ ì§„í™” ê³¼ì •

### Phase 1: Fermi ë¬¸ì„œí™” (v7.2.0 Day 1)

**ëª©í‘œ**: Fermi ë°©ë²•ë¡  ì²´ê³„í™”

**ì‚°ì¶œë¬¼**:
- `docs/GUESTIMATION_FRAMEWORK.md` (831ì¤„)
- 8ê°€ì§€ ì¶œì²˜ ì •ì˜
- 3ê°€ì§€ ë°©ë²• ì„¤ëª…
- Fermi 8ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤

**ìƒíƒœ**: ğŸ“ ë¬¸ì„œë§Œ, êµ¬í˜„ ì—†ìŒ

---

### Phase 2: ë¹„êµ ê²€ì¦ êµ¬í˜„ (v7.2.0 Day 1)

**ëª©í‘œ**: Benchmark ë¹„êµ ê°€ëŠ¥ì„± ìë™ ê²€ì¦

**ì‚°ì¶œë¬¼**:
- `umis_rag/utils/guestimation.py` (414ì¤„)
- GuestimationEngine í´ë˜ìŠ¤
- 4ëŒ€ ê¸°ì¤€ ìë™ ì²´í¬
- ì±„íƒ/ì°¸ê³ /ê¸°ê° ìë™ íŒë‹¨

**ìƒíƒœ**: âœ… ì¶œì²˜ 7 (RAG ë²¤ì¹˜ë§ˆí¬) ë¶€ë¶„ êµ¬í˜„

---

### Phase 3: Multi-Layer ì—”ì§„ (v7.2.1, 2025-11-05)

**ëª©í‘œ**: 8ê°€ì§€ ì¶œì²˜ë¥¼ 8ê°œ ë ˆì´ì–´ë¡œ ìë™í™”

**ì‚°ì¶œë¬¼**:
- `umis_rag/utils/multilayer_guestimation.py` (1,030ì¤„)
- MultiLayerGuestimation í´ë˜ìŠ¤
- 8ê°œ ë ˆì´ì–´ ì™„ì „ êµ¬í˜„
- ìë™ Fallback êµ¬ì¡°

**ìƒíƒœ**: âœ… ì¶œì²˜ 1-8 ëª¨ë‘ êµ¬í˜„ (ì™„ì„±ë„ 82%)

---

## ğŸ¯ Fermi â†’ Multi-Layer ë§¤í•‘

### Fermi 4ì›ì¹™ â†’ Multi-Layer

| Fermi ì›ì¹™ | Multi-Layer êµ¬í˜„ |
|-----------|-----------------|
| **ëª¨í˜• ë§Œë“¤ê¸°** | Layer 1 (í”„ë¡œì íŠ¸ ë°ì´í„°) + Decomposition |
| **ë¶„í•´** | Layer 2-8 ìˆœì°¨ ì‹œë„ (ìë™) |
| **ì œì•½ì¡°ê±´** | Layer 4 (ë²•ì¹™) + Layer 8 (ì œì•½) |
| **ìë¦¿ìˆ˜** | EstimationResult.confidence |

### 8ê°€ì§€ ì¶œì²˜ â†’ 8ê°œ ë ˆì´ì–´

| ì¶œì²˜ | Multi-Layer | ì™„ì„±ë„ |
|------|------------|--------|
| **ì¶œì²˜ 1: í”„ë¡œì íŠ¸ ë°ì´í„°** | Layer 1 | 100% âœ… |
| **ì¶œì²˜ 2: LLM ì§ì ‘** | Layer 2 | 100% âœ… |
| **ì¶œì²˜ 3: ê²€ìƒ‰ ê³µí†µ** | Layer 3 | 100% âœ… |
| **ì¶œì²˜ 4: ë²•ì¹™** | Layer 4 | 80% âš ï¸ |
| **ì¶œì²˜ 5: í–‰ë™ê²½ì œí•™** | Layer 5 | 30% âš ï¸ |
| **ì¶œì²˜ 6: í†µê³„ íŒ¨í„´** | Layer 6 | 40% âš ï¸ |
| **ì¶œì²˜ 7: Rule of Thumb** | Layer 7 | 100% âœ… |
| **ì¶œì²˜ 8: ì‹œê³µê°„ ì œì•½** | Layer 8 | 60% âš ï¸ |

### Fermi 8ë‹¨ê³„ â†’ ìë™í™”

| Fermi ë‹¨ê³„ | Multi-Layer ìë™í™” |
|-----------|-------------------|
| Step 1: ë¬¸ì œ ëª…í™•í™” | `question` íŒŒë¼ë¯¸í„° |
| Step 2: ëª¨í˜• ë§Œë“¤ê¸° | Layer 1-8 ì„ íƒ (ìë™) |
| Step 3: ë¶„í•´ | `_extract_keywords()` |
| Step 4: ê³„ì‚° | ê° Layer ë¡œì§ |
| Step 4.5: Benchmark ê²€ì¦ | Layer 7 (GuestimationEngine) |
| Step 5: ë¹„ìœ¨ ì¡°ì • | Layer 5 (í–‰ë™ê²½ì œí•™) |
| Step 6: Boundary ê²€ì¦ | Layer 8 (ì œì•½ì¡°ê±´) |
| Step 7: ê²€ì¦ | `logic_steps` ì¶”ì  |
| Step 8: ì‹ ë¢°ë„ í‰ê°€ | `confidence` ìë™ ê³„ì‚° |

---

## ğŸ’¡ ì£¼ìš” ê°œì„ ì‚¬í•­

### 1. ìë™í™”

**Before (Fermi)**:
```
ì‚¬ìš©ìê°€ 8ë‹¨ê³„ ìˆ˜ë™ ì‹¤í–‰:
1. ë¬¸ì œ ì •ì˜
2. ëª¨í˜• ë§Œë“¤ê¸°
3. ë¶„í•´
4. ê³„ì‚°
5-8. ì¡°ì •, ê²€ì¦
```

**After (Multi-Layer)**:
```python
# í•œ ì¤„ë¡œ ìë™ ì‹¤í–‰!
result = estimator.estimate("í•œêµ­ ì¸êµ¬ëŠ”?")
# â†’ 8ê°œ ë ˆì´ì–´ ìë™ ì‹œë„
# â†’ ìµœì  ë ˆì´ì–´ì—ì„œ ë°˜í™˜
```

---

### 2. ë¹„êµ ê²€ì¦ ìë™í™”

**Before (Fermi)**:
```
Step 4.5: ìˆ˜ë™ìœ¼ë¡œ 4ëŒ€ ê¸°ì¤€ ì²´í¬
- ì œí’ˆ ë™ì¼? ìœ ì‚¬? ë‹¤ë¦„?
- ì†Œë¹„ì ë™ì¼?
- ê°€ê²© ìœ ì‚¬?
- ë§¥ë½ ë™ì¼?
â†’ ì‚¬ìš©ì íŒë‹¨
```

**After (Multi-Layer)**:
```python
# GuestimationEngineì´ ìë™ ì²´í¬!
filtered = engine.filter_candidates(target, candidates)
# â†’ ì ìˆ˜ ìë™ ê³„ì‚° (0-4ì )
# â†’ ì±„íƒ/ì°¸ê³ /ê¸°ê° ìë™ íŒë‹¨
# â†’ ê¸°ê° ì´ìœ  ëª…ì‹œ
```

---

### 3. ì¶œì²˜ 3 (ê²€ìƒ‰ ê³µí†µ ë§¥ë½) ì•Œê³ ë¦¬ì¦˜í™”

**Before (Fermi)**:
```
ì¶œì²˜ 3: "ìƒìœ„ 5-10ê°œ ê³µí†µ íŒ¨í„´"
â†’ ë°©ë²•ë¡ ë§Œ ì •ì˜, êµ¬í˜„ ì—†ìŒ
```

**After (Multi-Layer)**:
```python
# Layer 3: ì™„ì „ êµ¬í˜„!
def _find_web_consensus(numbers):
    # 1. ì´ìƒì¹˜ ì œê±° (IQR * 1.5)
    filtered = _remove_outliers_iqr(numbers)
    
    # 2. ìœ ì‚¬ë„ 0.7 í´ëŸ¬ìŠ¤í„°ë§
    clusters = _cluster_numbers(filtered, threshold=0.7)
    
    # 3. ìµœëŒ€ í´ëŸ¬ìŠ¤í„° ì¤‘ì•™ê°’
    largest = max(clusters, key=len)
    return median(largest)
```

**ê°œì„ **:
- âœ… ì´ìƒì¹˜ ìë™ ì œê±°
- âœ… ìœ ì‚¬ë„ ê¸°ë°˜ í´ëŸ¬ìŠ¤í„°ë§
- âœ… ì •ë°€í•œ ê³µí†µê°’ (ë²”ìœ„ ì•„ë‹Œ ê°’)

---

### 4. ì„¤ì • ì‹œìŠ¤í…œ

**Before (Fermi)**:
```
# ì„¤ì • ì—†ìŒ, ëª¨ë‘ ìˆ˜ë™
```

**After (Multi-Layer)**:
```bash
# .env
UMIS_MODE=native

# config/multilayer_config.yaml
web_search_mode: "native"
interactive_mode: false

# â†’ í•œ ê³³ë§Œ ìˆ˜ì •í•˜ë©´ ì „ì²´ ë³€ê²½!
```

---

## ğŸ” Fermi ì² í•™ ìœ ì§€ ì—¬ë¶€

### âœ… ìœ ì§€ëœ ê²ƒ

1. **ê·¼ê±° ê¸°ë°˜**
   - Fermi: "ê·¼ê±° ì—†ì´ ì¶”ì •í•˜ë©´ ì•ˆ ëœë‹¤"
   - Multi-Layer: ëª¨ë“  ë ˆì´ì–´ì—ì„œ `used_data` ê¸°ë¡

2. **ìë¦¿ìˆ˜ ì¤‘ì‹œ**
   - Fermi: Order of Magnitude Â±50%
   - Multi-Layer: `confidence` ìˆ˜ì¹˜í™”

3. **ì œì•½ì¡°ê±´ í™œìš©**
   - Fermi: Step 2 (ì œì•½), Step 6 (Boundary)
   - Multi-Layer: Layer 4 (ë²•ì¹™), Layer 8 (ì œì•½)

4. **ë¹„êµ ê°€ëŠ¥ì„± ê²€ì¦**
   - Fermi: Step 4.5 (4ëŒ€ ê¸°ì¤€)
   - Multi-Layer: Layer 7 (GuestimationEngine)

---

### ğŸ†• ì¶”ê°€ëœ ê²ƒ

1. **ìë™ Fallback**
   - 8ê°œ ë ˆì´ì–´ ìˆœì°¨ ì‹œë„
   - ì‹¤íŒ¨ ì‹œ ìë™ ë‹¤ìŒ ë ˆì´ì–´

2. **ì„¤ì • ì‹œìŠ¤í…œ**
   - .env + YAML
   - Native/External ëª¨ë“œ

3. **ì™„ì „í•œ ì¶”ì ì„±**
   - logic_steps ìë™ ê¸°ë¡
   - ê¸°ê° ì´ìœ  ëª…ì‹œ

4. **Quantifier í†µí•©**
   - Agentì—ì„œ ì§ì ‘ í˜¸ì¶œ
   - RAG ìë™ ê²€ìƒ‰

---

## ğŸ“‹ ë§¤í•‘í‘œ

### Fermi í”„ë¡œì„¸ìŠ¤ â†’ Multi-Layer ìë™í™”

| Fermi ë‹¨ê³„ | ìˆ˜ë™ ì‘ì—… | Multi-Layer ìë™í™” | ì½”ë“œ ìœ„ì¹˜ |
|-----------|---------|-------------------|----------|
| Step 1: ë¬¸ì œ ëª…í™•í™” | ì‚¬ìš©ì ì •ì˜ | `question` íŒŒë¼ë¯¸í„° | í•¨ìˆ˜ ì…ë ¥ |
| Step 2: ëª¨í˜• | ì‚¬ìš©ì ì„¤ê³„ | Layer ì„ íƒ (ìë™) | estimate() |
| Step 3: ë¶„í•´ | ì‚¬ìš©ì ë¶„í•´ | `_extract_keywords()` | line 704 |
| Step 4: ê³„ì‚° | ìˆ˜ë™ ê³„ì‚° | ê° Layer ë¡œì§ | line 194-702 |
| Step 4.5: Benchmark ê²€ì¦ | ìˆ˜ë™ ì²´í¬ | GuestimationEngine | Layer 7 |
| Step 5: ë¹„ìœ¨ ì¡°ì • | ìˆ˜ë™ ì¡°ì • | Layer 5 (ë¶€ë¶„) | line 508-541 |
| Step 6: Boundary | ìˆ˜ë™ ê²€ì¦ | Layer 8 | line 652-702 |
| Step 7: ê²€ì¦ | ìˆ˜ë™ Cross-check | logic_steps ì¶”ì  | ìë™ |
| Step 8: ì‹ ë¢°ë„ | ì‚¬ìš©ì í‰ê°€ | confidence ê³„ì‚° | ìë™ |

---

## ğŸ¯ í†µí•© ì‚¬ë¡€

### Fermi ì˜ˆì‹œ (ë¬¸ì„œ): í”¼ì•„ë…¸ êµ¬ë… ì „í™˜ìœ¨

**ìˆ˜ë™ í”„ë¡œì„¸ìŠ¤**:
```
Step 1: í”¼ì•„ë…¸ ë Œíƒˆ ì „í™˜ìœ¨ ì¶”ì •
Step 2: ëª¨í˜• = ìœ ì‚¬ êµ¬ë… ì„œë¹„ìŠ¤ ì°¸ê³ 
Step 3: RAG ê²€ìƒ‰ â†’ ì •ìˆ˜ê¸° 25%, ê³µê¸°ì²­ì •ê¸° 18%
Step 4.5: ë¹„êµ ê²€ì¦
  - ì •ìˆ˜ê¸°: ì œí’ˆ(ë¬¼ë¦¬ì ) âœ“, ì†Œë¹„ì(B2C) âœ“, ê°€ê²©(ìœ ì‚¬) âœ“, ë§¥ë½(í•„ìˆ˜ì¬) âœ—
  - ê³µê¸°ì²­ì •ê¸°: ëª¨ë‘ âœ“ â†’ ì±„íƒ!
Step 4: 18% ì±„íƒ
Step 5: í”¼ì•„ë…¸ëŠ” ì•…ê¸° (ì„ íƒì¬) â†’ ë³´ìˆ˜ì  ì¡°ì • 15%
Step 6: Boundary: 0% < 15% < 100% âœ“
Step 7: ì—­ì‚°: 1,500ëª… Ã— 15% = 225ëª… (í•©ë¦¬ì )
Step 8: ì‹ ë¢°ë„ Medium (Â±20%)
```

### Multi-Layer (ìë™):

```python
target = BenchmarkCandidate(
    name="í”¼ì•„ë…¸ ë Œíƒˆ ì „í™˜ìœ¨",
    product_type="physical",
    consumer_type="B2C",
    price=50000,
    is_essential=False
)

candidates = [
    BenchmarkCandidate(name="ì •ìˆ˜ê¸°", value=0.25, ...),
    BenchmarkCandidate(name="ê³µê¸°ì²­ì •ê¸°", value=0.18, ...),
]

result = estimator.estimate(
    "í”¼ì•„ë…¸ ë Œíƒˆ ì „í™˜ìœ¨ì€?",
    target_profile=target,
    rag_candidates=candidates
)

# ìë™ìœ¼ë¡œ:
# Layer 1-6: ì‹¤íŒ¨
# Layer 7: RAG ë²¤ì¹˜ë§ˆí¬
#   - ë¹„êµ ê²€ì¦ (4ëŒ€ ê¸°ì¤€)
#   - ê³µê¸°ì²­ì •ê¸°: 3.5/4 (ì±„íƒ!)
#   - ì •ìˆ˜ê¸°: 2.5/4 (ì°¸ê³ )
# â†’ 18% ë°˜í™˜ (confidence 87.5%)
```

**ê²°ê³¼**:
- âœ… ë™ì¼í•œ ë¡œì§
- âœ… ì™„ì „ ìë™í™”
- âœ… ì¶”ì  ê°€ëŠ¥

---

## ğŸ’¡ Fermi ì›ì¹™ì´ Multi-Layerì— ë…¹ì•„ë“  ë°©ì‹

### Fermi ì›ì¹™ 1: ëª¨í˜• ë§Œë“¤ê¸°

**Multi-Layer êµ¬í˜„**:
```python
# ì‚¬ìš©ìê°€ questionë§Œ ì œê³µ
# â†’ Multi-Layerê°€ ìë™ìœ¼ë¡œ 8ê°œ ëª¨í˜• ì‹œë„

def estimate(question):
    # ëª¨í˜• 1: í”„ë¡œì íŠ¸ ë°ì´í„°ì— ìˆëŠ”ê°€?
    if project_has(question):
        return project_value
    
    # ëª¨í˜• 2: LLMì´ ë‹µí•  ìˆ˜ ìˆëŠ”ê°€?
    if is_simple_fact(question):
        return llm_answer
    
    # ... (8ê°€ì§€ ëª¨í˜• ìë™ ì‹œë„)
```

### Fermi ì›ì¹™ 2: ë¶„í•´

**Multi-Layer êµ¬í˜„**:
```python
# í‚¤ì›Œë“œ ìë™ ë¶„í•´
keywords = _extract_keywords("í•œêµ­ ìŒì‹ì  ì¬ë°©ë¬¸ ì£¼ê¸°")
# â†’ ['í•œêµ­', 'ìŒì‹ì ', 'ì¬ë°©ë¬¸', 'ì£¼ê¸°']

# ê° ë ˆì´ì–´ì—ì„œ í™œìš©
# Layer 1: project_context í‚¤ì›Œë“œ ë§¤ì¹­
# Layer 4: 'ì£¼ê¸°' â†’ ì‹œê°„ ë²•ì¹™ ê²€ìƒ‰
```

### Fermi ì›ì¹™ 3: ì œì•½ì¡°ê±´

**Multi-Layer êµ¬í˜„**:
- **Layer 4**: ì ˆëŒ€ì  ì œì•½ (ì‹œê°„ ë²•ì¹™)
- **Layer 8**: ë…¼ë¦¬ì  ê²½ê³„ (0-100%, 0-24h)

### Fermi ì›ì¹™ 4: ìë¦¿ìˆ˜

**Multi-Layer êµ¬í˜„**:
```python
result = EstimationResult(
    value=52000000,
    confidence=1.0,
    error_range="Â±0%"  # Layer 1ì€ í™•ì •
)

# ë˜ëŠ”
result = EstimationResult(
    value=30,
    confidence=0.75,
    error_range="Â±30%"  # Layer 7ì€ ì¶”ì •
)
```

---

## ğŸŒŸ ì£¼ìš” í˜ì‹ 

### 1. ì¶œì²˜ 3 (Search Consensus) ì•Œê³ ë¦¬ì¦˜í™”

**Fermi (ë¬¸ì„œ)**:
```
"ìƒìœ„ 5-10ê°œ ê³µí†µ íŒ¨í„´"
â†’ ê°œë…ë§Œ
```

**Multi-Layer (ì½”ë“œ)**:
```python
def _find_web_consensus(numbers):
    # 1. ì´ìƒì¹˜ ì œê±° (IQR)
    # 2. ìœ ì‚¬ë„ 0.7 í´ëŸ¬ìŠ¤í„°ë§
    # 3. ìµœëŒ€ í´ëŸ¬ìŠ¤í„° ì¤‘ì•™ê°’
    
# ì˜ˆ: [100, 105, 500, 98, 103]
# â†’ ì´ìƒì¹˜ ì œê±°: 500
# â†’ í´ëŸ¬ìŠ¤í„°: [98, 100, 103, 105]
# â†’ ì¤‘ì•™ê°’: 101.5
```

### 2. Layer 7 (RAG) ì™„ì „ ìë™

**Fermi (ìˆ˜ë™)**:
```
Step 4.5: ë¹„êµ ê°€ëŠ¥ì„± ìˆ˜ë™ ì²´í¬
â†’ ì‚¬ìš©ìê°€ ì§ì ‘ íŒë‹¨
```

**Multi-Layer (ìë™)**:
```python
# ìë™ìœ¼ë¡œ:
# 1. RAG ê²€ìƒ‰
# 2. 4ëŒ€ ê¸°ì¤€ ì ìˆ˜ ê³„ì‚°
# 3. ì±„íƒ/ì°¸ê³ /ê¸°ê° íŒë‹¨
# 4. ê¸°ê° ì´ìœ  ê¸°ë¡
```

### 3. ì„¤ì • ê¸°ë°˜ í™•ì¥

**Fermi (í•˜ë“œì½”ë”©)**:
```
ë¬¸ì„œì— ì •ì˜ë§Œ
ì½”ë“œ ì—†ìŒ
```

**Multi-Layer (ì„¤ì •)**:
```yaml
# config/multilayer_config.yaml
layer_3_web_search:
  api:
    results_count: 30  # 20 â†’ 30 ë³€ê²½ ê°€ëŠ¥!
  
  consensus_extraction:
    similarity_based:
      threshold: 0.8  # 0.7 â†’ 0.8 ë³€ê²½ ê°€ëŠ¥!
```

---

## ğŸ“ Fermiì˜ ê°€ì¹˜

### Fermiê°€ ì œê³µí•œ ê²ƒ

1. **ì² í•™**: "ê·¼ê±° ì—†ì´ ì¶”ì •í•˜ë©´ ì•ˆ ëœë‹¤"
2. **ë°©ë²•ë¡ **: ëª¨í˜•, ë¶„í•´, ì œì•½, ìë¦¿ìˆ˜
3. **ì¶œì²˜**: 8ê°€ì§€ ëª…í™•í•œ ì •ì˜
4. **í”„ë¡œì„¸ìŠ¤**: 8ë‹¨ê³„ ì²´ê³„

â†’ **Multi-Layerì˜ ê¸°ë°˜ì´ ë¨**

### Multi-Layerê°€ ì¶”ê°€í•œ ê²ƒ

1. **ìë™í™”**: 8ë‹¨ê³„ â†’ ìë™ ì‹¤í–‰
2. **ì•Œê³ ë¦¬ì¦˜**: ê°œë… â†’ ì½”ë“œ
3. **ì„¤ì •**: í™•ì¥ ê°€ëŠ¥
4. **í†µí•©**: Quantifier Agent

â†’ **Fermië¥¼ ì‹¤í–‰ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¦**

---

## ğŸ¯ ê²°ë¡ 

**Multi-Layer Guestimation = Fermi Estimationì˜ ìë™í™” êµ¬í˜„**

### Fermi (v7.2.0)
- ğŸ“ ë°©ë²•ë¡  ë¬¸ì„œí™”
- ğŸ“ êµìœ¡ìš©
- ğŸ¤ ì‚¬ìš©ì ìˆ˜ë™ ì‹¤í–‰

### Multi-Layer (v7.2.1)
- ğŸ’» ì™„ì „ êµ¬í˜„
- ğŸ¤– ìë™ ì‹¤í–‰
- ğŸ”§ ì„¤ì • ê°€ëŠ¥
- ğŸ“Š ì¶”ì  ê°€ëŠ¥

**ê´€ê³„**: Multi-LayerëŠ” Fermiì˜ **ìë™í™” ì—”ì§„**

---

**ì‘ì„±**: 2025-11-05  
**Fermi ë¬¸ì„œ**: docs/GUESTIMATION_FRAMEWORK.md (831ì¤„)  
**Multi-Layer ì½”ë“œ**: umis_rag/utils/multilayer_guestimation.py (1,030ì¤„)  
**ìƒíƒœ**: âœ… Fermi ì² í•™ ì™„ì „ ê³„ìŠ¹ + ìë™í™” ì™„ì„±!
