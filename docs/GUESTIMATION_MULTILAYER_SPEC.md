# Guestimation ë©€í‹°ë ˆì´ì–´ êµ¬í˜„ ëª…ì„¸ì„œ

**ë²„ì „**: v2.0  
**ì‘ì„±ì¼**: 2025-11-05  
**ìƒíƒœ**: âœ… **êµ¬í˜„ ì™„ë£Œ** (v7.2.1)

---

## ğŸ¯ ëª©í‘œ

**8ê°€ì§€ ë°ì´í„° ì¶œì²˜ë¥¼ ê³„ì¸µí™”í•˜ì—¬, ìˆœì°¨ì ìœ¼ë¡œ ì‹œë„í•˜ëŠ” Fallback êµ¬ì¡° êµ¬í˜„**

---

## ğŸ—ï¸ ë©€í‹°ë ˆì´ì–´ ì•„í‚¤í…ì²˜

### ê³„ì¸µ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Question: "í•œêµ­ ìŒì‹ì ì˜ í‰ê·  ì¬ë°©ë¬¸ ì£¼ê¸°ëŠ”?"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: í”„ë¡œì íŠ¸ ë°ì´í„°                            â”‚
â”‚  - ì´ë¯¸ ìˆ˜ì§‘ëœ í™•ì • ë°ì´í„° í™•ì¸                       â”‚
â”‚  - ì‹ ë¢°ë„: 100%                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            ìˆìŒ? â”€â”€YESâ”€â”€> ë°˜í™˜
              â”‚
              NO
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: LLM ì§ì ‘ ë‹µë³€                              â”‚
â”‚  - ê°„ë‹¨í•œ ì‚¬ì‹¤ ì§ˆë¬¸ (ì¸êµ¬, ìƒì‹)                      â”‚
â”‚  - ì‹ ë¢°ë„: 70% (ê²€ì¦ ê¶Œì¥)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            ê°€ëŠ¥? â”€â”€YESâ”€â”€> ë°˜í™˜ + ê²€ì¦
              â”‚
              NO
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: ì›¹ ê²€ìƒ‰ ê³µí†µ ë§¥ë½                           â”‚
â”‚  - ìƒìœ„ 5-10ê°œ ì¶œì²˜ ê³µí†µê°’                           â”‚
â”‚  - ì‹ ë¢°ë„: 80% (ë³µìˆ˜ ì¶œì²˜)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            ë°œê²¬? â”€â”€YESâ”€â”€> ë°˜í™˜
              â”‚
              NO
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: ë²•ì¹™ (ë¬¼ë¦¬/ë²•ë¥ )                           â”‚
â”‚  - ì ˆëŒ€ì  ì œì•½ì¡°ê±´ (24h, 52ì£¼)                       â”‚
â”‚  - ì‹ ë¢°ë„: 100%                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            ì ìš©? â”€â”€YESâ”€â”€> ì œì•½ìœ¼ë¡œ ì‚¬ìš©
              â”‚
              NO
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 5: í–‰ë™ê²½ì œí•™                                 â”‚
â”‚  - ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë¹„í•©ë¦¬ì„± (Loss Aversion 2ë°°)          â”‚
â”‚  - ì‹ ë¢°ë„: 70%                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 6: í†µê³„ íŒ¨í„´                                  â”‚
â”‚  - íŒŒë ˆí†  80-20, ì •ê·œë¶„í¬                            â”‚
â”‚  - ì‹ ë¢°ë„: 60%                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 7: Rule of Thumb (RAG í¬í•¨)                  â”‚
â”‚  - RAG ë²¤ì¹˜ë§ˆí¬ ê²€ìƒ‰ + ë¹„êµ ê°€ëŠ¥ì„± ê²€ì¦               â”‚
â”‚  - ì‹ ë¢°ë„: ë¹„êµ ê°€ëŠ¥ì„±ì— ë”°ë¼ (30-80%)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            ì±„íƒ ê°€ëŠ¥? â”€â”€YESâ”€â”€> ë°˜í™˜
              â”‚
              NO
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 8: ì‹œê³µê°„ ì œì•½                                â”‚
â”‚  - Boundary ì¶”ì • (ìµœì†Œ/ìµœëŒ€)                         â”‚
â”‚  - ì‹ ë¢°ë„: 50%                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
          ìµœì¢… ì¶”ì •ê°’
```

---

## ğŸ’» êµ¬í˜„ ì½”ë“œ ìŠ¤í™

### í´ë˜ìŠ¤ êµ¬ì¡°

```python
from enum import Enum
from dataclasses import dataclass
from typing import Optional, List, Dict, Any

class DataSource(Enum):
    """ë°ì´í„° ì¶œì²˜ (Layer)"""
    PROJECT_DATA = 1      # í”„ë¡œì íŠ¸ ë°ì´í„°
    LLM_DIRECT = 2        # LLM ì§ì ‘ ë‹µë³€
    WEB_CONSENSUS = 3     # ì›¹ ê²€ìƒ‰ ê³µí†µ ë§¥ë½
    LAW = 4               # ë²•ì¹™ (ë¬¼ë¦¬/ë²•ë¥ )
    BEHAVIORAL = 5        # í–‰ë™ê²½ì œí•™
    STATISTICAL = 6       # í†µê³„ íŒ¨í„´
    RULE_OF_THUMB = 7     # RAG + ë¹„êµ ê²€ì¦
    CONSTRAINT = 8        # ì‹œê³µê°„ ì œì•½

@dataclass
class EstimationResult:
    """ì¶”ì • ê²°ê³¼"""
    value: float
    source_layer: DataSource
    confidence: float  # 0.0 ~ 1.0
    logic: List[str]
    used_data: List[Dict]
    rejected_data: List[Dict]
    
class MultiLayerGuestimation:
    """
    ë©€í‹°ë ˆì´ì–´ Guestimation ì—”ì§„
    
    8ê°œ ë ˆì´ì–´ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹œë„í•˜ì—¬
    ê°€ì¥ ì í•©í•œ ì¶”ì • ë°©ë²• ìë™ ì„ íƒ
    """
    
    def __init__(self, project_context=None):
        self.layers = self._initialize_layers()
        self.project_context = project_context or {}
    
    def estimate(
        self, 
        question: str,
        target_profile: Dict = None
    ) -> EstimationResult:
        """
        ë©€í‹°ë ˆì´ì–´ ì¶”ì •
        
        Args:
            question: ì¶”ì • ì§ˆë¬¸
            target_profile: íƒ€ê²Ÿ í”„ë¡œí•„ (ë¹„êµ ê¸°ì¤€)
        
        Returns:
            EstimationResult
        """
        
        # Layer 1: í”„ë¡œì íŠ¸ ë°ì´í„° í™•ì¸
        result = self._try_project_data(question)
        if result:
            return result
        
        # Layer 2: LLM ì§ì ‘ ë‹µë³€
        result = self._try_llm_direct(question)
        if result and result.confidence >= 0.7:
            return result
        
        # Layer 3: ì›¹ ê²€ìƒ‰
        result = self._try_web_consensus(question)
        if result and result.confidence >= 0.8:
            return result
        
        # Layer 4: ë²•ì¹™
        result = self._try_law_based(question)
        if result:
            return result
        
        # Layer 5: í–‰ë™ê²½ì œí•™
        result = self._try_behavioral(question, target_profile)
        if result and result.confidence >= 0.6:
            return result
        
        # Layer 6: í†µê³„ íŒ¨í„´
        result = self._try_statistical(question)
        if result and result.confidence >= 0.5:
            return result
        
        # Layer 7: RAG + ë¹„êµ ê²€ì¦
        result = self._try_rag_benchmark(question, target_profile)
        if result and result.confidence >= 0.5:
            return result
        
        # Layer 8: ì œì•½ì¡°ê±´ (ìµœí›„ ìˆ˜ë‹¨)
        result = self._try_constraint_boundary(question)
        if result:
            return result
        
        # ëª¨ë“  ë ˆì´ì–´ ì‹¤íŒ¨
        return EstimationResult(
            value=None,
            source_layer=None,
            confidence=0.0,
            logic=["ì¶”ì • ë¶ˆê°€ëŠ¥"],
            used_data=[],
            rejected_data=[]
        )
    
    # ê° ë ˆì´ì–´ë³„ êµ¬í˜„ ë©”ì„œë“œ
    
    def _try_project_data(self, question):
        """Layer 1: í”„ë¡œì íŠ¸ ë°ì´í„°"""
        # self.project_contextì—ì„œ ê²€ìƒ‰
        ...
    
    def _try_llm_direct(self, question):
        """Layer 2: LLM ì§ì ‘ ë‹µë³€"""
        # LLMì—ê²Œ ê°„ë‹¨í•œ ì‚¬ì‹¤ ì§ˆë¬¸
        ...
    
    def _try_web_consensus(self, question):
        """Layer 3: ì›¹ ê²€ìƒ‰ ê³µí†µ ë§¥ë½"""
        # ì›¹ ê²€ìƒ‰ í›„ ìƒìœ„ ê²°ê³¼ ê³µí†µê°’
        ...
    
    def _try_law_based(self, question):
        """Layer 4: ë²•ì¹™ ê¸°ë°˜"""
        # ë¬¼ë¦¬ ë²•ì¹™, ë²•ë¥  ì œì•½
        ...
    
    def _try_behavioral(self, question, target_profile):
        """Layer 5: í–‰ë™ê²½ì œí•™"""
        # Loss Aversion, Anchoring ë“±
        ...
    
    def _try_statistical(self, question):
        """Layer 6: í†µê³„ íŒ¨í„´"""
        # íŒŒë ˆí† , ì •ê·œë¶„í¬ ë“±
        ...
    
    def _try_rag_benchmark(self, question, target_profile):
        """Layer 7: RAG ë²¤ì¹˜ë§ˆí¬"""
        # RAG ê²€ìƒ‰ + ë¹„êµ ê°€ëŠ¥ì„± ê²€ì¦ (ê¸°ì¡´ GuestimationEngine í™œìš©)
        from umis_rag.utils.guestimation import GuestimationEngine
        engine = GuestimationEngine()
        ...
    
    def _try_constraint_boundary(self, question):
        """Layer 8: ì œì•½ì¡°ê±´"""
        # ìµœì†Œ/ìµœëŒ€ ê²½ê³„ ì¶”ì •
        ...
```

---

## ğŸ“‹ êµ¬í˜„ ê³„íš

### Phase 1: í•µì‹¬ ë ˆì´ì–´ (3ê°œ)
- Layer 1: í”„ë¡œì íŠ¸ ë°ì´í„°
- Layer 2: LLM ì§ì ‘ ë‹µë³€
- Layer 7: RAG ë²¤ì¹˜ë§ˆí¬ (ê¸°ì¡´ í™œìš©)

### Phase 2: ì¶”ê°€ ë ˆì´ì–´ (5ê°œ)
- Layer 3: ì›¹ ê²€ìƒ‰
- Layer 4: ë²•ì¹™
- Layer 5: í–‰ë™ê²½ì œí•™
- Layer 6: í†µê³„ íŒ¨í„´
- Layer 8: ì œì•½ì¡°ê±´

### Phase 3: í†µí•©
- Quantifier Agent í†µí•©
- Excel ìë™ ìƒì„± ì—°ë™
- ì¶”ì • ê·¼ê±° ìë™ ë¬¸ì„œí™”

---

## ğŸ” í˜„ì¬ ìƒíƒœ (v7.2.0)

### êµ¬í˜„ë¨ âœ…
- GuestimationEngine (ë¹„êµ ê²€ì¦ë§Œ)
- 8ê°€ì§€ ì¶œì²˜ ë¬¸ì„œí™”
- 3ê°€ì§€ ë°©ë²• ê°€ì´ë“œ

### ë¯¸êµ¬í˜„ âŒ
- MultiLayerGuestimation í´ë˜ìŠ¤
- 8ê°œ ë ˆì´ì–´ ìˆœì°¨ ì‹œë„ ë¡œì§
- ìë™ Fallback ë©”ì»¤ë‹ˆì¦˜

---

## ğŸ’¡ êµ¬í˜„ í•„ìš”ì„±

### í•„ìš”í•œ ê²½ìš°
- ìë™í™”ëœ ì¶”ì • í•„ìš”
- ì—¬ëŸ¬ ë°©ë²• ì‹œë„ ìë™í™”
- ìµœì  ë ˆì´ì–´ ìë™ ì„ íƒ

### í˜„ì¬ë¡œ ì¶©ë¶„í•œ ê²½ìš°
- ìˆ˜ë™ ë¶„ì„ (í˜„ì¬)
- Native Mode ì‚¬ìš©
- RAG + LLM ì¡°í•©

---

## ğŸš€ êµ¬í˜„ ì œì•ˆ

**ì¦‰ì‹œ êµ¬í˜„ ê°€ëŠ¥** (30-40ë¶„):
1. MultiLayerGuestimation í´ë˜ìŠ¤ ìƒì„±
2. í•µì‹¬ 3ê°œ ë ˆì´ì–´ êµ¬í˜„
3. Quantifier í†µí•©

**êµ¬í˜„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?**

---

**ì‘ì„±**: 2025-11-05  
**ìƒíƒœ**: ëª…ì„¸ì„œ (ë¯¸êµ¬í˜„)  
**ìš°ì„ ìˆœìœ„**: Medium (í–¥í›„ v7.3.0)

