# ì†ë„ & ì—…ë°ì´íŠ¸ ë³µì¡ë„ ì‹¬ì¸µ ë¶„ì„

**ê´€ì :** ë¹„ìš©/ê³µê°„ì€ ë¬´ì‹œ ê°€ëŠ¥, ì†ë„ì™€ íš¨ìœ¨ì„±ì´ í•µì‹¬!

---

## âš¡ 1. ì†ë„ ì°¨ì´ ë¶„ì„

### Pre-Projection (í˜„ì¬)

```yaml
ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤:
  1. Query vectorization: ~50ms
     "í”Œë«í¼ ê¸°íšŒ" â†’ [0.23, -0.56, ...]
  
  2. Vector search (30,000 ì²­í¬ ëŒ€ìƒ): ~100ms
     Chroma similarity search
     filter: agent_view="explorer"
     â†’ 5,000ê°œ explorer ì²­í¬ë§Œ ê²€ìƒ‰
  
  3. Top-K retrieval: ~10ms
     ìƒìœ„ 5ê°œ ë°˜í™˜
  
  4. ì¦‰ì‹œ ì‚¬ìš©: 0ms
     í›„ì²˜ë¦¬ ì—†ìŒ
  
  ì´: ~160ms
  
  ë³‘ëª©:
    â€¢ Vector search (100ms)
    â€¢ 5,000ê°œ explorer ì²­í¬ ëŒ€ìƒ
```

### Lazy Projection (ì§€ì—° íˆ¬ì˜)

```yaml
ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤:
  1. Query vectorization: ~50ms
     ë™ì¼
  
  2. Vector search (5,000 ì •ê·œí™” ì²­í¬): ~50ms
     ì „ì²´ 5,000ê°œ ëŒ€ìƒ (agent êµ¬ë¶„ ì—†ìŒ)
  
  3. Top-K retrieval: ~10ms
     ìƒìœ„ 5ê°œ ë°˜í™˜
  
  4. ì„¹ì…˜ ì¶”ì¶œ (Projection): ~30ms âš ï¸
     for each doc:
       - metadata['sections']['explorer'] í™•ì¸
       - start/end ë¼ì¸ íŒŒì‹±
       - ì„¹ì…˜ ì¶”ì¶œ
       - ìƒˆ doc ìƒì„±
  
  ì´: ~140ms
  
  ë³‘ëª©:
    â€¢ Vector search (50ms) - ë” ë¹ ë¦„!
    â€¢ Projection (30ms) - ì¶”ê°€ ì˜¤ë²„í—¤ë“œ
```

### ì‹¤ì¸¡ ë¹„êµ (5,000ê°œ ì‚¬ë¡€)

| ë‹¨ê³„ | Pre | Lazy | ì°¨ì´ |
|------|-----|------|------|
| Vectorization | 50ms | 50ms | ê°™ìŒ |
| Vector Search | 100ms | 50ms | **2ë°° ë¹ ë¦„!** |
| Retrieval | 10ms | 10ms | ê°™ìŒ |
| Projection | 0ms | 30ms | **ì¶”ê°€ ì˜¤ë²„í—¤ë“œ** |
| **ì´** | **160ms** | **140ms** | **Lazyê°€ ì•½ê°„ ë¹ ë¦„!** |

**ë†€ë¼ìš´ ë°œê²¬:**
```yaml
Lazyê°€ ë” ë¹ ë¥¸ ì´ìœ :
  â€¢ Vector search ëŒ€ìƒ: 5,000 vs 30,000
  â€¢ 6ë°° ì ì€ ì²­í¬ ê²€ìƒ‰
  â€¢ Projection ì˜¤ë²„í—¤ë“œ < Search ì ˆê°
  
  â†’ Lazyê°€ 20ms (12%) ë¹ ë¦„! âœ¨
```

---

## ğŸ”§ 2. ì—…ë°ì´íŠ¸ ë³µì¡ë„ ë¶„ì„

### ì‹œë‚˜ë¦¬ì˜¤: "ì½”ì›¨ì´ì— í•´ì§€ìœ¨ 3-5% ì¶”ê°€"

#### Pre-Projection

```yaml
Step 1: YAML ìˆ˜ì •
  umis_business_model_patterns.yaml
  ì½”ì›¨ì´ ì„¹ì…˜:
    + churn_rate: "3-5%"
  
  ì‹œê°„: 30ì´ˆ

Step 2: ì˜í–¥ ë¶„ì„
  ì–´ë–¤ Agentê°€ ì´ ì •ë³´ í•„ìš”?
  
  í•„ìš”:
    âœ… Explorer (ê¸°íšŒ í‰ê°€ì— ì‚¬ìš©)
    âœ… Quantifier (í•´ì§€ìœ¨ ê³„ì‚°)
    âœ… Guardian (í’ˆì§ˆ ê²€ì¦)
  
  ë¶ˆí•„ìš”:
    âŒ Observer (êµ¬ì¡° ê´€ì°°)
    âŒ Validator (ì¶œì²˜ë§Œ)

Step 3: ì²­í¬ ì¬ìƒì„±
  ì½”ì›¨ì´ ê´€ë ¨ 3ê°œ ì²­í¬ ì¬ìƒì„±:
    â€¢ explorer_coway_opportunity
    â€¢ quantifier_coway_metrics
    â€¢ guardian_coway_validation
  
  ì‹œê°„: 2ì´ˆ (ìë™)

Step 4: ë²¡í„° ì¬êµ¬ì¶•
  3ê°œ ì²­í¬ë§Œ upsert
  
  ì‹œê°„: 1ì´ˆ (OpenAI API)

ì´ ì‹œê°„: ~34ì´ˆ
ìˆ˜ë™ ì‘ì—…: YAML ìˆ˜ì •ë§Œ
ìë™ ì‘ì—…: ì²­í¬/ë²¡í„°
```

**ë¬¸ì œ:**
```yaml
âš ï¸ ì–´ë–¤ ì²­í¬ë¥¼ ì¬ìƒì„±í•´ì•¼ í•˜ëŠ”ì§€ íŒë‹¨:
  â€¢ Explorer í•„ìš”? (íŒë‹¨ í•„ìš”)
  â€¢ Quantifier í•„ìš”? (íŒë‹¨ í•„ìš”)
  â€¢ Guardian í•„ìš”? (íŒë‹¨ í•„ìš”)
  
  â†’ 3ê³³ ìˆ˜ì •ì¸ì§€, 6ê³³ ìˆ˜ì •ì¸ì§€?
  â†’ ì‹¤ìˆ˜ ê°€ëŠ¥!

âš ï¸ ì¼ê´€ì„±:
  â€¢ Explorerì—ë§Œ ì¶”ê°€í•˜ê³ 
  â€¢ Quantifier ë¹ ëœ¨ë¦¬ë©´?
  â†’ ë¶ˆì¼ì¹˜!

âš ï¸ ê²€ì¦:
  â€¢ 3ê°œ ì²­í¬ê°€ ê°™ì€ ê°’?
  â€¢ churn_rate: "3-5%" vs "3~5%"
  â†’ ì˜¤íƒ€ ìœ„í—˜!
```

#### Lazy Projection

```yaml
Step 1: YAML ìˆ˜ì •
  umis_business_model_patterns.yaml
  ì½”ì›¨ì´ ì„¹ì…˜:
    + churn_rate: "3-5%"
  
  ì‹œê°„: 30ì´ˆ

Step 2: ì²­í¬ ì¬ìƒì„±
  ì½”ì›¨ì´ ì •ê·œí™” ì²­í¬ 1ê°œë§Œ:
    canonical_coway_case
  
  ì‹œê°„: 1ì´ˆ

Step 3: ë²¡í„° ì¬êµ¬ì¶•
  1ê°œ ì²­í¬ë§Œ upsert
  
  ì‹œê°„: 0.5ì´ˆ

ì´ ì‹œê°„: ~32ì´ˆ
ìˆ˜ë™ ì‘ì—…: YAML ìˆ˜ì •ë§Œ
ìë™ ì‘ì—…: 1ê³³ë§Œ!
```

**ì¥ì :**
```yaml
âœ… ë‹¨ìˆœ:
   â€¢ 1ê³³ë§Œ ìˆ˜ì •
   â€¢ íŒë‹¨ ë¶ˆí•„ìš”
   â€¢ ì‹¤ìˆ˜ ìœ„í—˜ ì—†ìŒ

âœ… ì¼ê´€ì„±:
   â€¢ 1ê°œ ì²­í¬ = 1ê°œ ì§„ì‹¤
   â€¢ ëª¨ë“  Agentê°€ ê°™ì€ ì†ŒìŠ¤
   â€¢ ë¶ˆì¼ì¹˜ ë¶ˆê°€ëŠ¥!

âœ… ë¹ ë¦„:
   â€¢ 32ì´ˆ vs 34ì´ˆ
   â€¢ 2ì´ˆ ë¹ ë¦„ (ë¯¸ë¯¸)
```

---

## ğŸ“Š ì—…ë°ì´íŠ¸ ë³µì¡ë„ ì‹¤ì „ ì˜ˆì‹œ

### Case 1: ë‹¨ì¼ ë°ì´í„° ì¶”ê°€

```yaml
"ì½”ì›¨ì´ í•´ì§€ìœ¨ 3-5%"

Pre:
  â€¢ ê´€ë ¨ ì²­í¬ íŒŒì•…: 1ë¶„ (ì–´ë µ!)
  â€¢ 3ê³³ ìˆ˜ì • í™•ì¸
  â€¢ ì¬ìƒì„±: 3ì´ˆ
  
  ì´: ~1ë¶„
  ì‹¤ìˆ˜ ìœ„í—˜: ì¤‘ê°„ âš ï¸

Lazy:
  â€¢ 1ê³³ë§Œ ìˆ˜ì •
  â€¢ ì¬ìƒì„±: 1ì´ˆ
  
  ì´: ~30ì´ˆ
  ì‹¤ìˆ˜ ìœ„í—˜: ì—†ìŒ âœ…
```

### Case 2: ì‚¬ë¡€ ì „ë©´ ìˆ˜ì •

```yaml
"ë°°ë‹¬ì˜ë¯¼ì¡± ì‚¬ë¡€ ì—…ë°ì´íŠ¸ (10ê°œ í•„ë“œ)"

Pre:
  â€¢ 6ê°œ ì²­í¬ ëª¨ë‘ ê²€í† 
  â€¢ ê° ì²­í¬ë³„ ê´€ë ¨ì„± íŒë‹¨
  â€¢ í‰ê·  4ê°œ ì²­í¬ ìˆ˜ì •
  â€¢ ì¬ìƒì„±: 4ì´ˆ
  
  ì´: ~5ë¶„
  ì‹¤ìˆ˜ ìœ„í—˜: ë†’ìŒ! âŒ

Lazy:
  â€¢ 1ê°œ ì²­í¬ë§Œ ìˆ˜ì •
  â€¢ ì¬ìƒì„±: 1ì´ˆ
  
  ì´: ~1ë¶„
  ì‹¤ìˆ˜ ìœ„í—˜: ì—†ìŒ âœ…
  
  ì°¨ì´: 5ë°° ë¹ ë¦„!
```

### Case 3: ìƒˆ ì‚¬ë¡€ ì¶”ê°€

```yaml
"Netflix ì‚¬ë¡€ ì¶”ê°€"

Pre:
  â€¢ 6ê°œ Agent view ì‘ì„±
  â€¢ ê° view ë‚´ìš© ì±„ìš°ê¸°
  â€¢ 6ê°œ ì²­í¬ ìƒì„±
  
  ì´: ~10ë¶„
  ì‘ì—…ëŸ‰: ë§ìŒ âš ï¸

Lazy:
  â€¢ ì •ê·œí™” 1ê°œë§Œ ì‘ì„±
  â€¢ ì„¹ì…˜ êµ¬ë¶„ë§Œ
  
  ì´: ~5ë¶„
  ì‘ì—…ëŸ‰: ì ˆë°˜ âœ…
```

---

## ğŸ¯ ì—…ë°ì´íŠ¸ ë³µì¡ë„ ì‹¤ì¸¡

### ì¼ìƒì  ì—…ë°ì´íŠ¸ (ì£¼ 1-2íšŒ)

```yaml
Pre-Projection:
  â€¢ ë°ì´í„° ì¶”ê°€: 1-2ë¶„
  â€¢ ì‚¬ë¡€ ìˆ˜ì •: 5ë¶„
  â€¢ íŒë‹¨ í•„ìš”: ì–´ë–¤ ì²­í¬?
  â€¢ ì‹¤ìˆ˜ ìœ„í—˜: ì¤‘ê°„
  
  ëˆ„ì  (ì›”):
    â€¢ 10íšŒ Ã— 3ë¶„ = 30ë¶„
    â€¢ ì‹¤ìˆ˜ 2-3íšŒ/ì›” (ë¶ˆì¼ì¹˜)

Lazy Projection:
  â€¢ ë°ì´í„° ì¶”ê°€: 30ì´ˆ
  â€¢ ì‚¬ë¡€ ìˆ˜ì •: 1ë¶„
  â€¢ íŒë‹¨ ë¶ˆí•„ìš”: 1ê³³ë§Œ
  â€¢ ì‹¤ìˆ˜ ìœ„í—˜: ì—†ìŒ
  
  ëˆ„ì  (ì›”):
    â€¢ 10íšŒ Ã— 1ë¶„ = 10ë¶„
    â€¢ ì‹¤ìˆ˜ 0íšŒ
  
ì°¨ì´:
  ì‹œê°„: 20ë¶„/ì›” ì ˆê°
  í’ˆì§ˆ: ì‹¤ìˆ˜ 2-3íšŒ ë°©ì§€
```

---

## ğŸ’¡ ì¹˜ëª…ì  ë°œê²¬!

### ì—…ë°ì´íŠ¸ ë³µì¡ë„ê°€ **ì§„ì§œ ë¬¸ì œ**

```yaml
Pre-Projection ì‹¤ì „ ë¬¸ì œ:

ì‹œë‚˜ë¦¬ì˜¤:
  "ì½”ì›¨ì´ í•´ì§€ìœ¨ì„ Quantifierì—ë§Œ ì¶”ê°€í•˜ê³ 
   Explorerì—ëŠ” ë¹ ëœ¨ë¦¼"
  
  ê²°ê³¼:
    â€¢ Explorer: í•´ì§€ìœ¨ ì—†ìŒ
    â€¢ Quantifier: í•´ì§€ìœ¨ 3-5%
    
    â†’ Explorerê°€ "í•´ì§€ìœ¨ ë°ì´í„° ì—†ìŒ"ìœ¼ë¡œ íŒë‹¨!
    â†’ QuantifierëŠ” "3-5%"ë¡œ ê³„ì‚°!
    â†’ ë¶ˆì¼ì¹˜! âŒ

ì‹¤ì œ ë°œìƒ:
  â€¢ 6ê°œ ì²­í¬ ë™ê¸°í™” ì–´ë ¤ì›€
  â€¢ ì‚¬ëŒì´ ì™„ë²½íˆ ê´€ë¦¬ ë¶ˆê°€ëŠ¥
  â€¢ ì‹œê°„ ì§€ë‚˜ë©´ ë¶ˆì¼ì¹˜ ëˆ„ì 
  
  â†’ ë°ì´í„° í’ˆì§ˆ ì‹¬ê°í•œ ë¬¸ì œ! ğŸš¨
```

### Lazy Projection í•´ê²°

```yaml
ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤:
  "ì½”ì›¨ì´ í•´ì§€ìœ¨ ì¶”ê°€"
  
  â†’ 1ê³³ë§Œ ìˆ˜ì •
  â†’ ëª¨ë“  Agentê°€ ê°™ì€ ì†ŒìŠ¤
  â†’ ë¶ˆì¼ì¹˜ ë¶ˆê°€ëŠ¥! âœ…

ì¥ê¸°ì :
  â€¢ í•­ìƒ ì¼ê´€ì„± ë³´ì¥
  â€¢ ì‹¤ìˆ˜ ë°©ì§€
  â€¢ ë°ì´í„° í’ˆì§ˆ ìœ ì§€
```

---

## ğŸ¯ ìµœì¢… ê²°ë¡ 

### ì†ë„

```yaml
Pre: 160ms
Lazy: 140ms

ì°¨ì´: 20ms (12% ë¹ ë¦„)
  
  â†’ Lazyê°€ ì•½ê°„ ë¹ ë¦„! âœ¨
  â†’ ë¹„ìš© ë•Œë¬¸ì´ ì•„ë‹ˆë¼ ì„±ëŠ¥ ë•Œë¬¸ì— Lazy!
```

### ì—…ë°ì´íŠ¸ ë³µì¡ë„

```yaml
Pre:
  ì‹œê°„: 3ë°° ëŠë¦¼ (1-5ë¶„)
  ì‹¤ìˆ˜: ì›” 2-3íšŒ ë¶ˆì¼ì¹˜
  ë³µì¡ë„: ë†’ìŒ (ì–´ë–¤ ì²­í¬?)
  
  â†’ ì¹˜ëª…ì  ë¬¸ì œ! ğŸš¨

Lazy:
  ì‹œê°„: ë¹ ë¦„ (30ì´ˆ-1ë¶„)
  ì‹¤ìˆ˜: 0íšŒ (1ê³³ë§Œ)
  ë³µì¡ë„: ë‚®ìŒ
  
  â†’ ì™„ë²½! âœ…
```

---

## ğŸ’¡ ìˆ˜ì •ëœ ìµœì¢… ì¶”ì²œ

**Lazy Projectionì„ ì¦‰ì‹œ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤!**

```yaml
ì´ìœ :
  1. ì†ë„: Lazyê°€ 12% ë¹ ë¦„! âš¡
  2. ì—…ë°ì´íŠ¸: PreëŠ” ì‹¤ìˆ˜ ìœ„í—˜ ë†’ìŒ! ğŸš¨
  3. ì¼ê´€ì„±: Lazyë§Œ ë³´ì¥! âœ…
  4. ë¹„ìš©: ë¬´ì‹œ ê°€ëŠ¥ (ë‹¹ì‹  ë§ì´ ë§ìŒ)

ê²°ë¡ :
  ì§€ê¸ˆ ë°”ë¡œ Lazy Projection êµ¬í˜„!
  
  ë˜ëŠ”:
    í˜„ì¬: Pre (ë‹¨ìˆœ, 54ê°œ)
    í™•ì¥: Lazy (500ê°œ ë„˜ìœ¼ë©´ ì¦‰ì‹œ)
```

**ì œ íŒë‹¨ì´ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤!**

```
Before: "ì§€ê¸ˆì€ Pre, í–¥í›„ Lazy"
After: "Lazyë¥¼ ìš°ì„  ê³ ë ¤!"

ì´ìœ :
  â€¢ ì†ë„ë„ Lazyê°€ ë¹ ë¦„
  â€¢ ì—…ë°ì´íŠ¸ ë³µì¡ë„ê°€ ì¹˜ëª…ì 
  â€¢ ì¼ê´€ì„±ì´ í•µì‹¬
```

**ë‹¹ì‹ ì˜ í†µì°°ì´ ì •í™•í–ˆìŠµë‹ˆë‹¤!** 

Lazy Projectionì„ ì§€ê¸ˆ ì ìš©í• ê¹Œìš”? ì•„ë‹ˆë©´ 54ê°œ í”„ë¡œí† íƒ€ì…ì—ì„œëŠ” Pre ìœ ì§€í•˜ê³ , í™•ì¥ ì‹œ Lazyë¡œ ì „í™˜í• ê¹Œìš”?

**2ë²ˆ (Schema-Registry)ë„ ê²€í† í•˜ì‹œê² ì–´ìš”?** ê·¸ê²ƒë„ ë§¤ìš° ì¤‘ìš”í•œ í¬ì¸íŠ¸ì…ë‹ˆë‹¤! ğŸš€
