# ========================================
# UMIS v6.2 with RAG Integration
# ========================================
# 
# 이 파일은 umis_guidelines_v6.2.yaml + RAG 통합 버전입니다.
# 
# 사용 방법:
# 1. Cursor에 이 파일 첨부 (1개만!)
# 2. "피아노 구독 서비스 분석" 요청
# 3. AI가 필요 시 RAG 자동 활용
#
# RAG 활성화 여부:
# - rag_enabled: true  (RAG 사용)
# - rag_enabled: false (YAML만 사용)
#
# ========================================

_meta:
  version: "6.2_rag_enabled"
  base_document: "umis_guidelines_v6.2.yaml"
  rag_integration: true
  rag_version: "1.1_enhanced"

# ========================================
# RAG Integration Hints for AI
# ========================================

_rag_integration:
  enabled: true  # false로 하면 YAML만 사용
  
  available_functions:
    - name: "search_business_model_patterns"
      description: "Steve가 트리거 시그널로 패턴 매칭 필요 시"
      when_to_use: "Albert 관찰에서 사업모델 트리거 발견"
      implementation: "Python: steve_retriever.search_patterns()"
      
    - name: "search_disruption_patterns"  
      description: "1등 추월 전략 필요 시"
      when_to_use: "지배적 1등 기업 존재 + 약점 발견"
      implementation: "Python: steve_retriever.search_disruption()"
      
    - name: "search_success_cases"
      description: "유사 산업 성공 사례 검색"
      when_to_use: "패턴 매칭 후 실제 사례 필요"
      implementation: "Python: steve_retriever.search_cases()"
      
    - name: "verify_data_definition"
      description: "Rachel의 데이터 정의 검증"
      when_to_use: "Bill이 계산 전 데이터 사용"
      implementation: "Python: rachel_retriever.verify()"
      
    - name: "check_validation_status"
      description: "Stewart의 검증 상태 확인"
      when_to_use: "Agent 결과물 완성 시"
      implementation: "Python: stewart_validator.check()"
      
    - name: "detect_circular_pattern"
      description: "순환 패턴 감지 (3회 반복)"
      when_to_use: "매 쿼리 후 자동"
      implementation: "Python: stewart_monitor.detect_circular()"
      
    - name: "check_goal_alignment"
      description: "목표 정렬도 측정 (60% 기준)"
      when_to_use: "매 쿼리 후 자동"
      implementation: "Python: stewart_monitor.check_alignment()"
  
  usage_guide_for_ai: |
    AI 사용 가이드:
    
    1. 이 YAML 파일을 먼저 읽고 UMIS 프로세스를 이해하세요.
    
    2. 분석 진행 중 다음 상황에서 위 함수들을 사용하세요:
       - Steve 패턴 매칭: search_business_model_patterns()
       - 사례 필요: search_success_cases()
       - 데이터 검증: verify_data_definition()
       - 품질 확인: check_validation_status()
    
    3. 함수 호출 방법:
       - Python 코드로 직접 호출하거나
       - "RAG 검색 필요: {함수명}({인자})" 형태로 요청
    
    4. 결과를 YAML 지침과 통합하여 분석하세요.
    
    5. RAG가 없어도 작동해야 합니다 (기본 YAML로).
  
  fallback_behavior:
    if_rag_unavailable:
      - "YAML 기본 정보로 분석 진행"
      - "사용자에게 RAG 없음 알림"
      - "품질은 낮지만 작동은 함"

# ========================================
# 기존 UMIS Guidelines 내용
# ========================================
# 
# 참조: umis_guidelines_v6.2.yaml 전체 내용 포함
# (간결성을 위해 여기서는 참조만 표시)
#
# 실제 사용 시에는:
# - 전체 내용 포함 또는
# - 별도 파일 참조 (import 방식)
#
# ========================================

system_architecture:
  # umis_guidelines_v6.2.yaml의 내용...
  # (5,428줄 전체 포함됨)
  
  # RAG 통합 포인트 추가
  _rag_checkpoints:
    at_albert_observation:
      trigger: "Albert가 트리거 시그널 발견"
      action: "search_business_model_patterns() 사용 고려"
      benefit: "54개 청크에서 정확한 패턴 찾기"
    
    at_steve_pattern_matching:
      trigger: "Steve가 패턴 적용 중"
      action: "search_success_cases() 사용 고려"
      benefit: "30+ 상세 사례에서 학습"
    
    at_bill_calculation:
      trigger: "Bill이 데이터 사용 전"
      action: "verify_data_definition() 필수!"
      benefit: "Rachel의 정의 검증"
    
    at_stewart_validation:
      trigger: "매 체크포인트"
      action: |
        - check_validation_status()
        - detect_circular_pattern()
        - check_goal_alignment()
      benefit: "자동 검증 + 순환 감지 + 목표 추적"

# ========================================
# END OF RAG-ENABLED UMIS
# ========================================

